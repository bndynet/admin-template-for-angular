/**!
 * admin-template-for-angular v0.0.0
 *
 * Copyright (c) 2022 Bendy Zhang
 * Released under the undefined license
 */
var APP_BUILD = 'Thu Sep 08 2022 14:27:58 GMT+0000 (Coordinated Universal Time)';var APP_VERSION = '0.0.0';(self.webpackChunkadmin_template_for_angular=self.webpackChunkadmin_template_for_angular||[]).push([[362],{8362:(Te,le,J)=>{"use strict";J.r(le),J.d(le,{DevModule:()=>wt});var ee=J(3555),z=J(6895),F=J(3558),a=J(9752),m=J(3288),h=J(3689),_=J(2654),d=J(2868),f=J(537),e=J(4650),v=J(529),n=J(3848);let s=(()=>{class O{constructor(b,A,j){this.el=b,this.renderer=A,this.document=j}ngOnChanges(b){b.loading&&(b.loading.currentValue?this.enable():this.disable())}enable(){this.el.nativeElement.classList.add("overlay-parent"),this.renderer.appendChild(this.el.nativeElement,this.getElement())}disable(){this.el.nativeElement.classList.remove("overlay-parent"),this.el.nativeElement.querySelector(".overlay-loading")&&this.renderer.removeChild(this.el.nativeElement,this.el.nativeElement.querySelector(".overlay-loading"))}getElement(){const b=this.document.createElement("div");b.className="overlay overlay-loading";const A=this.document.createElement("div");if(A.className="loading-body",A.innerHTML='<svg class="loading-spinner" viewBox="25 25 50 50" class="circular"><circle cx="50" cy="50" r="20" fill="none" class="path"></circle></svg>',b.appendChild(A),this.loadingText){const j=this.document.createElement("div");j.classList.add("loading-text"),j.innerHTML=this.loadingText,A.appendChild(j)}return b}}return O.\u0275fac=function(b){return new(b||O)(e.Y36(e.SBq),e.Y36(e.Qsj),e.Y36(z.K0))},O.\u0275dir=e.lG2({type:O,selectors:[["","vLoading",""]],inputs:{loading:["vLoading","loading"],loadingText:["vLoadingText","loadingText"]},features:[e.TTD]}),O})();var u=J(9457),o=J(9226),r=J(4425),t=J(4006),i=J(4859),c=J(7392),l=J(8312);function p(O,P){if(1&O&&(e.TgZ(0,"div",5),e._uU(1),e.qZA()),2&O){const b=e.oxw();e.xp6(1),e.hij(" ",b.title," ")}}function g(O,P){if(1&O){const b=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){e.CHM(b);const j=e.oxw();return e.KtG(j.copyContent())}),e.TgZ(1,"mat-icon"),e._uU(2,"content_copy"),e.qZA()()}}const w=function(O){return{"no-line-numbers":O}};let y=(()=>{class O{constructor(b,A){this.theme=b,this.clipboard=A,this.theme.themeChanged.subscribe(j=>{this.themeName=this.theme.isDark()?"material":"default"})}ngOnInit(){this.theme.isDark()&&(this.themeName="material")}copyContent(){this.clipboard.copy(this.content)}getOptions(){let b={lineNumbers:!this.hideLineNumbers,mode:this.language,readOnly:!this.editable};return this.themeName&&(b={...b,theme:this.themeName}),b}}return O.\u0275fac=function(b){return new(b||O)(e.Y36(o.f),e.Y36(r.TU))},O.\u0275cmp=e.Xpm({type:O,selectors:[["el-code-block"]],inputs:{title:"title",content:"content",language:"language",loading:"loading",editable:"editable",hideLineNumbers:"hideLineNumbers"},decls:5,vars:9,consts:[[1,"cb",3,"ngClass"],["class","cb-header",4,"ngIf"],[1,"cb-content",3,"vLoading"],["mat-icon-button","","class","cb-copy-button","aria-label","Copy",3,"click",4,"ngIf"],[3,"ngModel","preserveScrollPosition","options","ngModelChange"],[1,"cb-header"],["mat-icon-button","","aria-label","Copy",1,"cb-copy-button",3,"click"]],template:function(b,A){1&b&&(e.TgZ(0,"div",0),e.YNc(1,p,2,1,"div",1),e.TgZ(2,"div",2),e.YNc(3,g,3,0,"button",3),e.TgZ(4,"ngx-codemirror",4),e.NdJ("ngModelChange",function(Y){return A.content=Y}),e.qZA()()()),2&b&&(e.Q6J("ngClass",e.VKq(7,w,A.hideLineNumbers)),e.xp6(1),e.Q6J("ngIf",A.title),e.xp6(1),e.Q6J("vLoading",!0===A.loading),e.xp6(1),e.Q6J("ngIf",A.content),e.xp6(1),e.Q6J("ngModel",A.content)("preserveScrollPosition",!1)("options",A.getOptions()))},dependencies:[z.mk,z.O5,t.JJ,t.On,i.lW,c.Hw,l.C,s],styles:[".cb[_ngcontent-%COMP%]{position:relative}.cb.no-line-numbers[_ngcontent-%COMP%]   .cb-content[_ngcontent-%COMP%]{padding:0 0 0 .75rem}.cb-header[_ngcontent-%COMP%]{border-radius:5px 5px 0 0;color:#fff;min-height:20px;padding:.75rem 1rem}.cb-copy-button[_ngcontent-%COMP%]{position:absolute;right:5px;top:2px;z-index:10}.cb-content[_ngcontent-%COMP%]{background-color:#fff;border:solid 1px #efefef;border-radius:0 0 5px 5px;border-top:none;position:relative}[_nghost-%COMP%]   .cb-header[_ngcontent-%COMP%]{background-color:var(----background)}[_nghost-%COMP%]   .cb-content[_ngcontent-%COMP%]{background-color:var(----secondary-background);border-color:var(----divider)}[_nghost-%COMP%]     .CodeMirror{background-color:transparent!important}.popular   [_nghost-%COMP%]   .cb-header[_ngcontent-%COMP%]{background-color:var(--popular--background)}.popular   [_nghost-%COMP%]   .cb-content[_ngcontent-%COMP%]{background-color:var(--popular--secondary-background);border-color:var(--popular--divider)}.popular   [_nghost-%COMP%]     .CodeMirror{background-color:transparent!important}.dark   [_nghost-%COMP%]   .cb-header[_ngcontent-%COMP%]{background-color:var(--dark--background)}.dark   [_nghost-%COMP%]   .cb-content[_ngcontent-%COMP%]{background-color:var(--dark--secondary-background);border-color:var(--dark--divider)}.dark   [_nghost-%COMP%]     .CodeMirror{background-color:transparent!important}  .CodeMirror,   .CodeMirror pre.CodeMirror-line,   .CodeMirror pre.CodeMirror-line-like{font-family:Roboto Mono,monospace}  .CodeMirror-gutters{border-color:#efefef}"]}),O})();function S(O,P){if(1&O&&(e.TgZ(0,"mat-tab",6),e._UZ(1,"el-code-block",7),e.qZA()),2&O){const b=P.$implicit,A=e.oxw(2);e.s9C("label",b.tag),e.xp6(1),e.Q6J("vLoading",A.loadingCode)("language",b.lang)("content",b.code)("hideLineNumbers",!0)}}function C(O,P){if(1&O){const b=e.EpF();e.TgZ(0,"section",3)(1,"mat-tab-group",4),e.NdJ("selectedIndexChange",function(j){e.CHM(b);const Y=e.oxw();return e.KtG(Y.currentTabIndex=j)})("selectedTabChange",function(j){e.CHM(b);const Y=e.oxw();return e.KtG(Y.changeCompFile(j))}),e.YNc(2,S,2,5,"mat-tab",5),e.qZA()()}if(2&O){const b=e.oxw();e.xp6(1),e.Q6J("selectedIndex",b.currentTabIndex)("@.disabled",!0),e.xp6(1),e.Q6J("ngForOf",b.compFiles)}}let T=(()=>{class O{constructor(b,A){this.router=b,this.http=A,this.currentTabIndex=0,this.compFiles=[],this.showCode=!0,this.fileTagLangMapping={TS:"javascript",HTML:"xml",SCSS:"css"},this.subs=new _.w,this.router.events.subscribe(j=>{if(j instanceof h.m2){const Y=j.urlAfterRedirects,te=Y.split("/")[Y.split("/").length-1],_e=`${Y.replace("/admin/","assets/")}/${te}.component`;if(this.title=te.toUpperCase().replace("-"," "),!j.url.includes("examples"))return void(this.showCode=!1);this.showCode=!0,this.compFiles=[],Object.keys(this.fileTagLangMapping).forEach(ne=>{this.compFiles.push({tag:ne,lang:this.fileTagLangMapping[ne],name:`${_e}.${ne.toLowerCase()}`,code:""})}),this.currentTabIndex=0,this.changeCompFile({index:this.currentTabIndex,tab:null})}})}ngOnInit(){}ngOnDestroy(){this.subs.unsubscribe()}changeCompFile(b){const A=this.compFiles[b.index];A.code||this.subs.add(this.http.get(A.name,{responseType:"text"}).pipe((0,d.b)(()=>{this.loadingCode=!0}),(0,f.x)(()=>{this.loadingCode=!1})).subscribe(j=>{A.code=j}))}}return O.\u0275fac=function(b){return new(b||O)(e.Y36(h.F0),e.Y36(v.eN))},O.\u0275cmp=e.Xpm({type:O,selectors:[["app-dev"]],decls:4,vars:2,consts:[[3,"title"],[1,"page-container"],["class","code-section",4,"ngIf"],[1,"code-section"],[3,"selectedIndex","selectedIndexChange","selectedTabChange"],[3,"label",4,"ngFor","ngForOf"],[3,"label"],[3,"vLoading","language","content","hideLineNumbers"]],template:function(b,A){1&b&&(e._UZ(0,"el-page-header",0),e.TgZ(1,"div",1),e._UZ(2,"router-outlet"),e.YNc(3,C,3,3,"section",2),e.qZA()),2&b&&(e.Q6J("title",A.title),e.xp6(3),e.Q6J("ngIf",A.showCode))},dependencies:[z.sg,z.O5,h.lC,n.SP,n.uX,s,u.q,y],styles:[".code-section[_ngcontent-%COMP%]{margin-top:2rem}"]}),O})();var L=J(6748),M=J(2166),k=J(5412),E=J(9549),H=J(4144),D=J(6561);function Z(O,P){if(1&O&&(e.TgZ(0,"h3"),e._uU(1),e.qZA()),2&O){const b=e.oxw();e.xp6(1),e.hij("Hi ",b.name,"!")}}let G=(()=>{class O{constructor(b,A){this.app=b,this.dialog=A}ngOnInit(){}close(){this.dialog.close()}save(){this.pending=!0,this.app.status.requesting(),setTimeout(()=>{this.close(),this.pending=!1,this.app.status.requested(),this.app.notificaiton.info(`Saving ${name} ...`)},3e3)}}return O.\u0275fac=function(b){return new(b||O)(e.Y36(M.z),e.Y36(k.so))},O.\u0275cmp=e.Xpm({type:O,selectors:[["app-examples-dialog-form"]],decls:17,vars:7,consts:[["title","Form",3,"showCloseIcon","loading"],["body",""],[2,"width","600px",3,"vLoading"],[1,"full-width"],["name","name","matInput","","placeholder","Your name...",3,"ngModel","ngModelChange"],["rows","8","name","des","matInput","","placeholder","Your name..."],[4,"ngIf"],["footer",""],["mat-raised-button","",3,"disabled","click"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(b,A){1&b&&(e.TgZ(0,"el-dialog",0),e.ynx(1,1),e.TgZ(2,"form",2)(3,"mat-form-field",3)(4,"mat-label"),e._uU(5,"Name"),e.qZA(),e.TgZ(6,"input",4),e.NdJ("ngModelChange",function(Y){return A.name=Y}),e.qZA()(),e.TgZ(7,"mat-form-field",3)(8,"mat-label"),e._uU(9,"Description"),e.qZA(),e._UZ(10,"textarea",5),e.qZA()(),e.YNc(11,Z,2,1,"h3",6),e.BQk(),e.ynx(12,7),e.TgZ(13,"button",8),e.NdJ("click",function(){return A.close()}),e._uU(14," Cancel "),e.qZA(),e.TgZ(15,"button",9),e.NdJ("click",function(){return A.save()}),e._uU(16," Save "),e.qZA(),e.BQk(),e.qZA()),2&b&&(e.Q6J("showCloseIcon",!0)("loading",A.pending),e.xp6(2),e.Q6J("vLoading",A.pending),e.xp6(4),e.Q6J("ngModel",A.name),e.xp6(5),e.Q6J("ngIf",A.name),e.xp6(2),e.Q6J("disabled",A.pending),e.xp6(2),e.Q6J("disabled",A.pending))},dependencies:[z.O5,t._Y,t.Fj,t.JJ,t.JL,t.On,t.F,i.lW,E.KE,E.hX,H.Nt,s,D.a]}),O})();var N=J(722);const V=function(O){return{loading:O}};let $=(()=>{class O{constructor(b,A,j,Y){this.http=b,this.app=A,this.status=j,this.notification=Y,this.buttonLoading=!1,this.requesting=!1}ngOnInit(){}toggleRequesting(){this.requesting=!this.requesting,this.requesting?this.status.requesting():this.status.requested()}showInfo(b){this.notification.info(b)}showSuccess(b){this.notification.success(b)}showWarning(b){this.notification.warn(b)}showError(b){this.notification.error(b)}alert(){this.app.dialog.alert("Alert Dialog","This is an alert dialog.",()=>{this.notification.info("Done")})}confirm(){this.app.dialog.confirm("Confirm Dialog","This is a confirm dialog.",()=>{this.notification.info("Done")})}delete(){this.app.dialog.deleteConfirm(()=>{this.notification.info("Done")})}formDialog(){this.app.dialog.open(G,{},()=>{})}requestError(){(0,L.bo)(this.http).subscribe()}}return O.\u0275fac=function(b){return new(b||O)(e.Y36(v.eN),e.Y36(N.zi),e.Y36(N.Bj),e.Y36(N.gq))},O.\u0275cmp=e.Xpm({type:O,selectors:[["app-examples-button"]],decls:42,vars:22,consts:[["mat-raised-button","",3,"click"],["mat-raised-button","",3,"ngClass","click"],["mat-raised-button","","color","primary",3,"ngClass","disabled","click"],["mat-fab","","color","primary",3,"ngClass","click"],["mat-fab","","color","primary",3,"ngClass","disabled","click"],["mat-mini-fab","","color","primary",3,"ngClass","disabled","click"],["mat-icon-button","","color","primary",3,"ngClass","disabled","click"]],template:function(b,A){1&b&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return A.toggleRequesting()}),e._uU(1,"Global Progress"),e.qZA(),e.TgZ(2,"button",1),e.NdJ("click",function(){return A.buttonLoading=!A.buttonLoading}),e._uU(3,"Loading Button"),e.qZA(),e.TgZ(4,"button",2),e.NdJ("click",function(){return A.buttonLoading=!A.buttonLoading}),e._uU(5,"Loading"),e.qZA(),e.TgZ(6,"button",3),e.NdJ("click",function(){return A.buttonLoading=!A.buttonLoading}),e.TgZ(7,"mat-icon"),e._uU(8,"save"),e.qZA()(),e.TgZ(9,"button",4),e.NdJ("click",function(){return A.buttonLoading=!A.buttonLoading}),e.TgZ(10,"mat-icon"),e._uU(11,"save"),e.qZA()(),e.TgZ(12,"button",5),e.NdJ("click",function(){return A.buttonLoading=!A.buttonLoading}),e.TgZ(13,"mat-icon"),e._uU(14,"save"),e.qZA()(),e.TgZ(15,"button",6),e.NdJ("click",function(){return A.buttonLoading=!A.buttonLoading}),e.TgZ(16,"mat-icon"),e._uU(17,"save"),e.qZA()(),e._UZ(18,"br")(19,"br"),e.TgZ(20,"button",0),e.NdJ("click",function(){return A.showInfo("Information")}),e._uU(21,"Show Information"),e.qZA(),e.TgZ(22,"button",0),e.NdJ("click",function(){return A.showSuccess("Success")}),e._uU(23,"Show Success"),e.qZA(),e.TgZ(24,"button",0),e.NdJ("click",function(){return A.showWarning("Warning")}),e._uU(25,"Show Warning"),e.qZA(),e.TgZ(26,"button",0),e.NdJ("click",function(){return A.showError("Error")}),e._uU(27,"Show Error"),e.qZA(),e._UZ(28,"br")(29,"br"),e.TgZ(30,"button",0),e.NdJ("click",function(){return A.alert()}),e._uU(31,"Alert"),e.qZA(),e.TgZ(32,"button",0),e.NdJ("click",function(){return A.confirm()}),e._uU(33,"Confirm"),e.qZA(),e.TgZ(34,"button",0),e.NdJ("click",function(){return A.delete()}),e._uU(35,"Delete Confirm"),e.qZA(),e.TgZ(36,"button",0),e.NdJ("click",function(){return A.formDialog()}),e._uU(37,"Form Dialog"),e.qZA(),e._UZ(38,"br")(39,"br"),e.TgZ(40,"button",0),e.NdJ("click",function(){return A.requestError()}),e._uU(41,"Request with Error"),e.qZA()),2&b&&(e.xp6(2),e.Q6J("ngClass",e.VKq(10,V,A.buttonLoading)),e.xp6(2),e.Q6J("ngClass",e.VKq(12,V,A.buttonLoading))("disabled",A.buttonLoading),e.xp6(2),e.Q6J("ngClass",e.VKq(14,V,A.buttonLoading)),e.xp6(3),e.Q6J("ngClass",e.VKq(16,V,A.buttonLoading))("disabled",A.buttonLoading),e.xp6(3),e.Q6J("ngClass",e.VKq(18,V,A.buttonLoading))("disabled",A.buttonLoading),e.xp6(3),e.Q6J("ngClass",e.VKq(20,V,A.buttonLoading))("disabled",A.buttonLoading))},dependencies:[z.mk,i.lW,c.Hw],styles:["button[_ngcontent-%COMP%]{margin-right:.5rem}"]}),O})();var x=J(3546);function R(O,P){if(1&O&&(e.TgZ(0,"a",1),e._uU(1),e.qZA()),2&O){const b=P.$implicit;e.Q6J("routerLink",b.value),e.xp6(1),e.Oqu(b.key)}}let B=(()=>{class O{constructor(){}ngOnInit(){}}return O.\u0275fac=function(b){return new(b||O)},O.\u0275cmp=e.Xpm({type:O,selectors:[["el-icon-card"]],inputs:{color:"color",icon:"icon",value:"value",label:"label",links:"links"},decls:10,vars:9,consts:[["routerLinkActive","active",3,"routerLink",4,"ngFor","ngForOf"],["routerLinkActive","active",3,"routerLink"]],template:function(b,A){1&b&&(e.TgZ(0,"mat-card")(1,"mat-icon"),e._uU(2),e.qZA(),e.TgZ(3,"mat-card-title"),e._uU(4),e.qZA(),e.TgZ(5,"mat-card-subtitle"),e._uU(6),e.qZA(),e.TgZ(7,"mat-card-footer"),e.YNc(8,R,2,2,"a",0),e.ALo(9,"keyvalue"),e.qZA()()),2&b&&(e.Gre("mat-",A.color,""),e.xp6(2),e.Oqu(A.icon),e.xp6(2),e.Oqu(A.value),e.xp6(2),e.Oqu(A.label),e.xp6(2),e.Q6J("ngForOf",e.lcZ(9,7,A.links)))},dependencies:[z.sg,h.yS,h.Od,x.a8,x.n5,x.$j,x.rt,c.Hw,z.Nd],styles:["[_nghost-%COMP%]{display:block;min-width:200px;width:100%}[_nghost-%COMP%]:hover   .mat-icon[_ngcontent-%COMP%]{transform:scale(1.25)}[color][_nghost-%COMP%]   a[_ngcontent-%COMP%]{color:#dedede}[color][_nghost-%COMP%]   .mat-card[_ngcontent-%COMP%]{color:#ffffffb3}[color][_nghost-%COMP%]   .mat-card-subtitle[_ngcontent-%COMP%]{color:#ffffffb3}[color][_nghost-%COMP%]:hover   .mat-card[_ngcontent-%COMP%]{color:#fff}[color][_nghost-%COMP%]:hover   .mat-card-subtitle[_ngcontent-%COMP%]{color:#fff}[_nghost-%COMP%]     .mat-card-title:not(:first-child), [_nghost-%COMP%]   .mat-card-subtitle[_ngcontent-%COMP%]:not(:first-child){margin-top:0}a[_ngcontent-%COMP%]{text-decoration:none}.mat-icon[_ngcontent-%COMP%]{font-size:3.5rem;height:inherit;opacity:.2;position:absolute;right:10px;top:10px;transition:all .5s ease-in-out;width:inherit}.mat-card-title[_ngcontent-%COMP%]{margin-top:0}.mat-card-footer[_ngcontent-%COMP%]{display:flex;font-size:.85rem;text-align:center}.mat-card-footer[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{background-color:#0000001a;cursor:pointer;flex:1;padding:5px}.mat-card-footer[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:hover{background-color:#0003}[color=primary][_nghost-%COMP%]     .mat-card{background-color:var(----primary)}[color=accent][_nghost-%COMP%]     .mat-card{background-color:var(----accent)}[color=warn][_nghost-%COMP%]     .mat-card{background-color:var(----warn)}.popular   [color=primary][_nghost-%COMP%]     .mat-card{background-color:var(--popular--primary)}.popular   [color=accent][_nghost-%COMP%]     .mat-card{background-color:var(--popular--accent)}.popular   [color=warn][_nghost-%COMP%]     .mat-card{background-color:var(--popular--warn)}.dark   [color=primary][_nghost-%COMP%]     .mat-card{background-color:var(--dark--primary)}.dark   [color=accent][_nghost-%COMP%]     .mat-card{background-color:var(--dark--accent)}.dark   [color=warn][_nghost-%COMP%]     .mat-card{background-color:var(--dark--warn)}"]}),O})(),q=(()=>{class O{constructor(){this.links={"Link #1":"link-url","Link #2":"link-url"}}ngOnInit(){}}return O.\u0275fac=function(b){return new(b||O)},O.\u0275cmp=e.Xpm({type:O,selectors:[["app-examples-card"]],decls:5,vars:4,consts:[[1,"row","gutter"],["color","primary","icon","shopping_cart","label","New Orders","value","123,231",3,"links"],["color","accent","icon","shopping_cart","label","New Orders","value","123,231",3,"links"],["color","warn","icon","shopping_cart","label","New Orders","value","123,231",3,"links"],["icon","shopping_cart","label","New Orders","value","123,231",3,"links"]],template:function(b,A){1&b&&(e.TgZ(0,"div",0),e._UZ(1,"el-icon-card",1)(2,"el-icon-card",2)(3,"el-icon-card",3)(4,"el-icon-card",4),e.qZA()),2&b&&(e.xp6(1),e.Q6J("links",A.links),e.xp6(1),e.Q6J("links",A.links),e.xp6(1),e.Q6J("links",A.links),e.xp6(1),e.Q6J("links",A.links))},dependencies:[B]}),O})(),I=(()=>{class O{toFromGroup(b){const A={};return b.forEach(j=>{A[j.name]=j.required?new t.NI({value:j.value,disabled:!!j.disabled},t.kI.required):new t.NI({value:j.value,disabled:!!j.disabled})}),new t.cw(A)}}return O.\u0275fac=function(b){return new(b||O)},O.\u0275prov=e.Yz7({token:O,factory:O.\u0275fac}),O})();function Q(O,P){1&O&&(e.TgZ(0,"span",7),e._uU(1,"*"),e.qZA())}function X(O,P){if(1&O){const b=e.EpF();e.TgZ(0,"input",9),e.NdJ("change",function(j){e.CHM(b);const Y=e.oxw(2).$implicit,te=e.oxw();return e.KtG(te.changeValue(Y,j))}),e.qZA()}if(2&O){const b=e.oxw(2).$implicit;e.Q6J("id",b.name)("name",b.name)("formControlName",b.name),e.uIk("disabled",b.disabled)("placeholder",b.placeholder)("style",b.style,e.Ckj)}}function se(O,P){if(1&O){const b=e.EpF();e.TgZ(0,"textarea",9),e.NdJ("change",function(j){e.CHM(b);const Y=e.oxw(2).$implicit,te=e.oxw();return e.KtG(te.changeValue(Y,j))}),e._uU(1,"      "),e.qZA()}if(2&O){const b=e.oxw(2).$implicit;e.Q6J("id",b.name)("name",b.name)("formControlName",b.name),e.uIk("disabled",b.disabled)("placeholder",b.placeholder)("style",b.style,e.Ckj)}}function he(O,P){if(1&O&&(e.ynx(0),e.YNc(1,X,1,6,"input",8),e.YNc(2,se,2,6,"textarea",8),e.BQk()),2&O){const b=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",!b.isMultiline),e.xp6(1),e.Q6J("ngIf",b.isMultiline)}}function ue(O,P){if(1&O&&(e.TgZ(0,"option",11),e._uU(1),e.qZA()),2&O){const b=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",b.placeholder," ")}}function K(O,P){if(1&O&&(e.TgZ(0,"option",15),e._uU(1),e.qZA()),2&O){const b=P.$implicit;e.Q6J("value",b.value),e.xp6(1),e.hij(" ",b.label," ")}}function re(O,P){if(1&O&&(e.TgZ(0,"optgroup",13),e.YNc(1,K,2,2,"option",14),e.qZA()),2&O){const b=P.$implicit;e.Q6J("label",b.name),e.xp6(1),e.Q6J("ngForOf",b.options)}}function fe(O,P){if(1&O&&(e.ynx(0),e.YNc(1,re,2,2,"optgroup",12),e.BQk()),2&O){const b=e.oxw().ngIf;e.xp6(1),e.Q6J("ngForOf",b)}}function ge(O,P){if(1&O&&(e.TgZ(0,"option",15),e._uU(1),e.qZA()),2&O){const b=P.$implicit;e.Q6J("value",b.value),e.xp6(1),e.hij(" ",b.label," ")}}function Ae(O,P){if(1&O&&(e.ynx(0),e.YNc(1,ge,2,2,"option",14),e.BQk()),2&O){const b=e.oxw(3).$implicit;e.xp6(1),e.Q6J("ngForOf",b.options)}}function Mt(O,P){if(1&O&&(e.ynx(0),e.YNc(1,fe,2,1,"ng-container",5),e.YNc(2,Ae,2,1,"ng-container",5),e.BQk()),2&O){const b=P.ngIf;e.xp6(1),e.Q6J("ngIf",b.length>1),e.xp6(1),e.Q6J("ngIf",1===b.length)}}function Tt(O,P){if(1&O){const b=e.EpF();e.ynx(0),e.TgZ(1,"select",9),e.NdJ("change",function(j){e.CHM(b);const Y=e.oxw().$implicit,te=e.oxw();return e.KtG(te.changeValue(Y,j))}),e.YNc(2,ue,2,1,"option",10),e.YNc(3,Mt,3,2,"ng-container",5),e.qZA(),e.BQk()}if(2&O){const b=e.oxw().$implicit,A=e.oxw();e.xp6(1),e.Q6J("id",b.name)("name",b.name)("formControlName",b.name),e.uIk("disabled",b.disabled),e.xp6(1),e.Q6J("ngIf",!b.required),e.xp6(1),e.Q6J("ngIf",A.fieldOptionGroups[b.name])}}function At(O,P){if(1&O&&(e.TgZ(0,"div",16),e._uU(1),e.qZA()),2&O){const b=e.oxw().$implicit;e.xp6(1),e.hij(" ",b.requiredMessage," ")}}const Ot=function(O){return{required:O}};function Rt(O,P){if(1&O&&(e.TgZ(0,"div",2),e.ALo(1,"lowercase"),e.TgZ(2,"label")(3,"span",3),e._uU(4),e.qZA(),e.YNc(5,Q,2,0,"span",4),e.qZA(),e.YNc(6,he,3,2,"ng-container",5),e.YNc(7,Tt,4,6,"ng-container",5),e.YNc(8,At,2,1,"div",6),e.qZA()),2&O){const b=P.$implicit,A=e.oxw();e.Gre("field-item ",e.lcZ(1,11,null==A.formGroup.controls[b.name]?null:A.formGroup.controls[b.name].status),""),e.Q6J("ngClass",e.VKq(13,Ot,b.required)),e.xp6(2),e.uIk("for",b.name)("style",b.labelStyle,e.Ckj),e.xp6(2),e.hij(" ",b.label," "),e.xp6(1),e.Q6J("ngIf",b.required),e.xp6(1),e.Q6J("ngIf",!b.options),e.xp6(1),e.Q6J("ngIf",b.options),e.xp6(1),e.Q6J("ngIf",!(null!=A.formGroup.controls[b.name]&&A.formGroup.controls[b.name].valid))}}let Bt=(()=>{class O{constructor(b,A){this.changeDetectorRef=b,this.formControlService=A,this.fieldValueChange=new e.vpe,this.init=new e.vpe,this.fieldOptionGroups={}}ngOnInit(){this.formGroup=this.formControlService.toFromGroup(this.fields),this.fields.forEach(b=>{this.fieldOptionGroups[b.name]||(this.fieldOptionGroups[b.name]=[]),b.options?.forEach(j=>{let Y=this.fieldOptionGroups[b.name].find(te=>te.name===j.group);Y||(Y={name:j.group,options:[]},this.fieldOptionGroups[b.name].push(Y)),Y.options.push(j)})}),console.log(this.fieldOptionGroups),this.init.emit(this.formGroup)}changeValue(b,A){const j=this.formGroup.get(b.name);b.value=j.value,this.fieldValueChange.emit({fieldName:b.name,fieldValue:b.value,formGroup:this.formGroup,event:A})}getOptionGroups(b){const A=[];return b.forEach(j=>{let Y=A.find(te=>te.group===j.group);Y||(Y={name:j.group,items:[]},A.push(Y)),Y.items.push(j)}),A}writeValue(b){console.log(b)}registerOnChange(b){throw new Error("Method not implemented.")}registerOnTouched(b){throw new Error("Method not implemented.")}setDisabledState(b){throw new Error("Method not implemented.")}}return O.\u0275fac=function(b){return new(b||O)(e.Y36(e.sBO),e.Y36(I))},O.\u0275cmp=e.Xpm({type:O,selectors:[["el-form"]],inputs:{fields:"fields",formGroup:"formGroup"},outputs:{fieldValueChange:"fieldValueChange",init:"init"},features:[e._Bn([{provide:t.JU,useExisting:(0,e.Gpc)(()=>O),multi:!0},I])],decls:2,vars:2,consts:[[3,"formGroup"],[3,"class","ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"label"],["class","required",4,"ngIf"],[4,"ngIf"],["class","hint",4,"ngIf"],[1,"required"],[3,"id","name","formControlName","change",4,"ngIf"],[3,"id","name","formControlName","change"],["value","",4,"ngIf"],["value",""],[3,"label",4,"ngFor","ngForOf"],[3,"label"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"hint"]],template:function(b,A){1&b&&(e.TgZ(0,"div",0),e.YNc(1,Rt,9,15,"div",1),e.qZA()),2&b&&(e.Q6J("formGroup",A.formGroup),e.xp6(1),e.Q6J("ngForOf",A.fields))},dependencies:[z.mk,z.sg,z.O5,t.YN,t.Kr,t.Fj,t.EJ,t.JJ,t.JL,t.sg,t.u,z.i8],styles:["[_nghost-%COMP%]{display:block;width:100%}.field-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1rem}.field-item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .field-item[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .field-item[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border:solid #aaa 1px;border-radius:4px;min-height:1.5rem;padding:.25rem .75rem}.field-item[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:3rem}.field-item[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{height:2rem}.field-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.25rem}.field-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:red}.field-item[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{font-style:italic;margin-top:.25rem}.field-item.invalid[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .field-item.invalid[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .field-item.invalid[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-color:red}"],changeDetection:0}),O})();var Ze=J(782);let Dt=(()=>{class O{constructor(){this.fields=[{name:"yourName",label:"Your Name",value:"Bing",required:!0,requiredMessage:"Your name is required.",placeholder:"Your full name",style:"font-size: 1.25rem; height: 2rem",labelStyle:"font-weight: bold;"},{name:"yourCompany",label:"Your Company",value:"BNDY-NET",disabled:!0},{name:"yourCountry",label:"Your Country",options:[{label:"China",value:"cn",group:"ASIA"},{label:"United State",value:"us",group:"EMEA"}]},{name:"yourcountry1",label:"Has Placeholder",placeholder:"select one",options:[{label:"China",value:"cn",group:"ASIA"},{label:"United State",value:"us",group:"EMEA"}]},{name:"des",label:"Your Description",isMultiline:!0}]}show(){console.log(this.fields)}formInit(b){this.formStatus=b.status}formValueChange(b){this.formStatus=b.formGroup.status,console.log(b)}ngOnInit(){}}return O.\u0275fac=function(b){return new(b||O)},O.\u0275cmp=e.Xpm({type:O,selectors:[["app-example-form"]],decls:12,vars:5,consts:[["cols","2","rowHeight","480px"],[2,"width","100%","height","100%","padding-right","100px"],[3,"fields","init","fieldValueChange"],["mat-raised-button","",3,"click"],[2,"width","100%","height","calc(100% - 20px)","margin-top","10px","overflow","auto"]],template:function(b,A){1&b&&(e.TgZ(0,"mat-grid-list",0)(1,"mat-grid-tile")(2,"div",1)(3,"el-form",2),e.NdJ("init",function(Y){return A.formInit(Y)})("fieldValueChange",function(Y){return A.formValueChange(Y)}),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return A.show()}),e._uU(5,"Print to console"),e.qZA(),e._uU(6),e.qZA()(),e.TgZ(7,"mat-grid-tile")(8,"div",4)(9,"pre"),e._uU(10),e.ALo(11,"json"),e.qZA()()()()),2&b&&(e.xp6(3),e.Q6J("fields",A.fields),e.xp6(3),e.hij(" \xa0\xa0 Form Status: ",A.formStatus," "),e.xp6(4),e.Oqu(e.lcZ(11,3,A.fields)))},dependencies:[Bt,i.lW,Ze.Il,Ze.DX,z.Ts],styles:[".mat-grid-tile-content[_ngcontent-%COMP%]{align-items:flex-start!important}"],changeDetection:0}),O})();var de=(()=>{return(O=de||(de={})).Row="row",O.Column="column",O.Free="free",de;var O})();function Pt(O,P){1&O&&e.GkF(0)}const It=function(O,P){return{$implicit:O,index:P}};function Ht(O,P){if(1&O&&(e.TgZ(0,"div",2),e.YNc(1,Pt,1,0,"ng-container",3),e.qZA()),2&O){const b=P.$implicit,A=P.index,j=e.oxw();e.Q6J("ngStyle",j.getItemStyle(b)),e.xp6(1),e.Q6J("ngTemplateOutlet",j.itemTemplate)("ngTemplateOutletContext",e.WLB(3,It,b,A))}}let Ft=(()=>{class O{constructor(){this.mode=de.Row,this.items=[],this.itemSorted=new e.vpe,this.sortDirection="horizontal",this.styleMap={},this.itemGlobalStyleMap={}}ngOnInit(){}ngOnChanges(b){b.mode&&b.mode.currentValue!==b.mode.previousValue&&this.changeLayout(b.mode.currentValue),b.gutter&&(this.halfOfGutter=this.halfOf(this.gutter),this.changeLayout(this.mode))}drop(b){(0,ee.bA)(this.items,b.previousIndex,b.currentIndex),this.itemSorted.emit(this.items)}changeLayout(b){switch(this.sortDirection=b===de.Column?"vertical":"horizontal",this.mode){case de.Row:this.styleMap["margin-top"]="0",this.styleMap["margin-right"]="-"+this.halfOfGutter,this.styleMap["margin-bottom"]="0",this.styleMap["margin-left"]="-"+this.halfOfGutter,this.itemGlobalStyleMap["margin-top"]="0",this.itemGlobalStyleMap["margin-right"]=this.halfOfGutter,this.itemGlobalStyleMap["margin-bottom"]="0",this.itemGlobalStyleMap["margin-left"]=this.halfOfGutter;break;case de.Column:this.styleMap["margin-top"]="-"+this.halfOfGutter,this.styleMap["margin-right"]="0",this.styleMap["margin-bottom"]="-"+this.halfOfGutter,this.styleMap["margin-left"]="0",this.itemGlobalStyleMap["margin-top"]=this.halfOfGutter,this.itemGlobalStyleMap["margin-right"]="0",this.itemGlobalStyleMap["margin-bottom"]=this.halfOfGutter,this.itemGlobalStyleMap["margin-left"]="0"}}getItemStyle(b){const A={};if(this.mode===de.Row){const j=b.__width||b._width||b.width;j&&("number"==typeof j?A.flex=j.toString():A.width=j)}return{...this.itemGlobalStyleMap,...A}}halfOf(b){return b?"number"==typeof b?b/2+"rem":`${parseInt(b.replace(/(px)(pt)(rem)(em)(%)/g,""))/2}${b.replace(/\d+/gi,"")}`:""}}return O.\u0275fac=function(b){return new(b||O)},O.\u0275cmp=e.Xpm({type:O,selectors:[["el-layout"]],hostVars:2,hostBindings:function(b,A){2&b&&e.Tol(A.mode)},inputs:{mode:"mode",items:"items",gutter:"gutter",itemTemplate:"itemTemplate",dragEnabled:"dragEnabled"},outputs:{itemSorted:"itemSorted"},features:[e.TTD],decls:2,vars:7,consts:[["cdkDropList","",1,"el-layout-container",3,"ngStyle","cdkDropListDisabled","cdkDropListOrientation","cdkDropListDropped"],["cdkDrag","","class","el-layout-item",3,"ngStyle",4,"ngFor","ngForOf"],["cdkDrag","",1,"el-layout-item",3,"ngStyle"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(b,A){1&b&&(e.TgZ(0,"div",0),e.NdJ("cdkDropListDropped",function(Y){return A.drop(Y)}),e.YNc(1,Ht,2,6,"div",1),e.qZA()),2&b&&(e.Tol("layout-"+A.mode),e.Q6J("ngStyle",A.styleMap)("cdkDropListDisabled",!A.dragEnabled)("cdkDropListOrientation",A.sortDirection),e.xp6(1),e.Q6J("ngForOf",A.items))},dependencies:[z.sg,z.tP,z.PC,ee.Wj,ee.Zt],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   .el-layout-container.layout-row[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .el-layout-container.layout-column[_ngcontent-%COMP%]{display:flex;flex-direction:column}  .cdk-drag-placeholder{background-color:#dedede;border:dotted 3px #ddd;opacity:0;transition:transform .25s cubic-bezier(0,0,.2,1)}  .cdk-drag-animating{transition:transform .25s cubic-bezier(0,0,.2,1)}  .el-layout-item.cdk-drag-preview>*{border-radius:0;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f;box-sizing:border-box}  .el-layout-item.cdk-drop-list-dragging *:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"]}),O})();function jt(O,P){if(1&O&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&O){const b=e.oxw(),A=b.$implicit,j=b.index;e.xp6(1),e.AsE(" ",A.data.text," #",j," ")}}function ze(O,P){if(1&O){const b=e.EpF();e.TgZ(0,"el-layout",3),e.NdJ("itemSorted",function(j){e.CHM(b);const Y=e.oxw(2);return e.KtG(Y.sort(j))}),e.qZA()}if(2&O){const b=e.oxw().$implicit,A=e.oxw(),j=e.MAs(13);e.Q6J("mode",b.mode)("gutter",b.gutter)("items",b.items)("dragEnabled",A.draggable)("itemTemplate",j)}}function Je(O,P){if(1&O&&(e.YNc(0,jt,2,2,"div",5),e.YNc(1,ze,1,5,"el-layout",6)),2&O){const b=P.$implicit;e.Q6J("ngIf",b.data),e.xp6(1),e.Q6J("ngIf",b.isLayout)}}let Ge=(()=>{class O{constructor(){this.draggable=!0,this.layoutData={mode:de.Row,gutter:"1rem",items:[{id:1,width:1,data:{text:"#1 This defines the default behavior for how flex items..."}},{id:2,width:2,data:{text:"#2 This defines the default behavior for how flex items..."}},{id:3,width:2,data:{text:"#3 This defines the default behavior for how flex items..."}},{id:4,width:"100px",data:{text:"#4  100px This defines the default behavior for how flex items..."}},{id:5,width:2,isLayout:!0,mode:de.Row,items:[{id:51,width:1,data:{text:"#51 Text"}},{id:52,width:2,data:{text:"#52 Text"}},{id:53,width:1,data:{text:"#53 Text"}}]}]}}ngOnInit(){}changeLayout(b){this.layoutData.mode=b,console.log("\u{1f680} ~ file: layout.component.ts ~ line 67 ~ LayoutComponent ~ changeLayout ~ mode",this.layoutData)}sort(b){console.log(b)}}return O.\u0275fac=function(b){return new(b||O)},O.\u0275cmp=e.Xpm({type:O,selectors:[["app-examples-layout"]],decls:14,vars:7,consts:[["mat-raised-button","",3,"click"],["mat-raised-button","",3,"disabled","click"],[1,"layout-container"],[3,"mode","gutter","items","dragEnabled","itemTemplate","itemSorted"],["layoutItemTemplate",""],["class","block block-1",4,"ngIf"],[3,"mode","gutter","items","dragEnabled","itemTemplate","itemSorted",4,"ngIf"],[1,"block","block-1"]],template:function(b,A){if(1&b&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return A.changeLayout("column")}),e._uU(1," Column Layout\n"),e.qZA(),e.TgZ(2,"button",0),e.NdJ("click",function(){return A.changeLayout("row")}),e._uU(3,"Row Layout"),e.qZA(),e.TgZ(4,"button",1),e.NdJ("click",function(){return A.draggable=!0}),e._uU(5," Enable Sorting\n"),e.qZA(),e.TgZ(6,"button",1),e.NdJ("click",function(){return A.draggable=!1}),e._uU(7," Disable Sorting\n"),e.qZA(),e._UZ(8,"br")(9,"br"),e.TgZ(10,"div",2)(11,"el-layout",3),e.NdJ("itemSorted",function(Y){return A.sort(Y)}),e.qZA()(),e.YNc(12,Je,2,2,"ng-template",null,4,e.W1O)),2&b){const j=e.MAs(13);e.xp6(4),e.Q6J("disabled",A.draggable),e.xp6(2),e.Q6J("disabled",!A.draggable),e.xp6(5),e.Q6J("mode",A.layoutData.mode)("gutter",A.layoutData.gutter)("items",A.layoutData.items)("dragEnabled",A.draggable)("itemTemplate",j)}},dependencies:[z.O5,i.lW,Ft],styles:["button[_ngcontent-%COMP%]{margin-right:.5rem}el-layout[_ngcontent-%COMP%]{border:dotted}.block[_ngcontent-%COMP%]{background-color:#efefef;border:solid 1px #ddd;padding:.5rem}"]}),O})();var Be=J(4850);let Ke=(()=>{class O{constructor(b){this.route=b,this.hero={}}ngOnInit(){this.route.paramMap.pipe((0,Be.U)(b=>{this.hero.id=+b.get("id")})).subscribe()}}return O.\u0275fac=function(b){return new(b||O)(e.Y36(h.gz))},O.\u0275cmp=e.Xpm({type:O,selectors:[["app-examples-table-detail"]],decls:3,vars:1,template:function(b,A){1&b&&(e.TgZ(0,"mat-card")(1,"h1"),e._uU(2),e.qZA()()),2&b&&(e.xp6(2),e.hij(" # ",A.hero.id,""))},dependencies:[x.a8],styles:["[_nghost-%COMP%]{display:block}"]}),O})();var Ye=J(943),Ve=J(9798),Qe=J(757),Xe=J(1572);function $e(O,P){if(1&O&&(e.TgZ(0,"h1"),e._uU(1),e.qZA()),2&O){const b=e.oxw(2);e.xp6(1),e.Oqu(b.title)}}function et(O,P){if(1&O&&(e.TgZ(0,"div",5),e._uU(1),e.qZA()),2&O){const b=e.oxw(2);e.xp6(1),e.Oqu(b.description)}}function tt(O,P){if(1&O&&(e.TgZ(0,"div",1),e._UZ(1,"mat-spinner",2),e.YNc(2,$e,2,1,"h1",3),e.YNc(3,et,2,1,"div",4),e.qZA()),2&O){const b=e.oxw();e.xp6(2),e.Q6J("ngIf",b.title),e.xp6(1),e.Q6J("ngIf",b.description)}}let it=(()=>{class O{constructor(){this.title="Loading..."}ngOnInit(){}}return O.\u0275fac=function(b){return new(b||O)},O.\u0275cmp=e.Xpm({type:O,selectors:[["el-page-loading"]],inputs:{show:"show",title:"title",description:"description"},decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],["strokeWidth","5"],[4,"ngIf"],["class","secondary-text",4,"ngIf"],[1,"secondary-text"]],template:function(b,A){1&b&&e.YNc(0,tt,4,2,"div",0),2&b&&e.Q6J("ngIf",A.show)},dependencies:[z.O5,Xe.Ou],styles:[".container[_ngcontent-%COMP%]{display:block;padding:5rem 0;text-align:center}.container[_ngcontent-%COMP%]   .mat-spinner[_ngcontent-%COMP%]{display:inline-block;margin-bottom:1rem}"]}),O})();const rt=["contentSidebar"],nt=function(O){return{active:O}};function ot(O,P){if(1&O){const b=e.EpF();e.TgZ(0,"tr",17)(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"a",18),e._uU(7,"open in current page"),e.qZA()(),e.TgZ(8,"td",19)(9,"button",20),e.NdJ("click",function(){const Y=e.CHM(b).$implicit,te=e.oxw(2);return e.KtG(te.gotoDetail(Y.id))}),e.TgZ(10,"mat-icon"),e._uU(11,"edit"),e.qZA()(),e.TgZ(12,"button",21),e.NdJ("click",function(){const Y=e.CHM(b).$implicit,te=e.oxw(2);return e.KtG(te.remove(Y.id))}),e.TgZ(13,"mat-icon"),e._uU(14,"delete"),e.qZA()()()()}if(2&O){const b=P.$implicit,A=e.oxw(2);e.Q6J("ngClass",e.VKq(4,nt,A.activedHero&&b.id===A.activedHero.id)),e.xp6(2),e.Oqu(b.id),e.xp6(2),e.Oqu(b.name),e.xp6(2),e.Q6J("routerLink",b.id)}}const st=function(){return[5,10,25,100]};function at(O,P){if(1&O){const b=e.EpF();e.TgZ(0,"div",10)(1,"div",11)(2,"table",12)(3,"thead")(4,"tr")(5,"th"),e._uU(6,"ID"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Name"),e.qZA(),e._UZ(9,"th")(10,"th"),e.qZA()(),e.TgZ(11,"tbody"),e.YNc(12,ot,15,6,"tr",13),e.qZA(),e.TgZ(13,"tfoot")(14,"tr")(15,"td",14)(16,"mat-paginator",15),e.NdJ("page",function(j){e.CHM(b);const Y=e.oxw();return e.KtG(Y.getHeroes(j))}),e.qZA()()()()()(),e.TgZ(17,"div",16),e._UZ(18,"router-outlet"),e.qZA()()}if(2&O){const b=e.oxw();e.xp6(1),e.Q6J("vLoading",b.loading),e.xp6(11),e.Q6J("ngForOf",b.heroes),e.xp6(4),e.Q6J("length",100)("pageSize",10)("pageSizeOptions",e.DdM(5,st))}}function ct(O,P){if(1&O){const b=e.EpF();e.TgZ(0,"form",22)(1,"mat-form-field")(2,"input",23),e.NdJ("ngModelChange",function(j){e.CHM(b);const Y=e.oxw();return e.KtG(Y.activedHero.name=j)}),e.qZA()()()}if(2&O){const b=e.oxw();e.xp6(2),e.Q6J("ngModel",b.activedHero.name)}}const lt=function(O){return{loading:O}};let ht=(()=>{class O{constructor(b,A,j){this.http=b,this.app=A,this.notification=j,this.heroes=[],this.saving=!1,this.loading=!1,this.initlizating=!1}ngOnInit(){this.getHeroes(null)}getHeroes(b){b?this.loading=!0:this.initlizating=!0,this.http.get((0,L.hD)(`/assets/heroes.json?p=${b?b.pageIndex:0}`)).pipe((0,Ye.g)(2e3)).subscribe(A=>{this.heroes=A,b?this.loading=!1:this.initlizating=!1})}gotoDetail(b){this.activedHero=Object.assign({},this.heroes.find(A=>A.id===b))}save(){this.saving=!0,(0,L.P6)().subscribe(()=>{this.saving=!1;const b=this.heroes.findIndex(A=>A.id===this.activedHero.id);this.heroes[b]=Object.assign({},this.activedHero),this.activedHero=null,this.notification.success("Save Successfully.")})}remove(b){this.app.dialog.deleteConfirm(()=>{alert("ok")})}onClosedContentSidebar(){this.activedHero=null}}return O.\u0275fac=function(b){return new(b||O)(e.Y36(v.eN),e.Y36(M.z),e.Y36(N.gq))},O.\u0275cmp=e.Xpm({type:O,selectors:[["app-examples-table"]],viewQuery:function(b,A){if(1&b&&e.Gf(rt,5),2&b){let j;e.iGM(j=e.CRH())&&(A.contentSidebarRef=j.first)}},decls:13,vars:10,consts:[[3,"show"],["class","row",4,"ngIf"],["elementsToOpen",".btn-edit",3,"title","progressShown","open","closed"],["contentSidebar",""],[1,"padding"],["style","height: 2000px;",4,"ngIf"],[1,"footer","row"],[1,"fill","text-block"],[1,"right"],["mat-raised-button","","color","primary",3,"ngClass","disabled","click"],[1,"row"],["vLoadingText","Fetching data...",1,"fill",3,"vLoading"],[1,"border-radius"],[3,"ngClass",4,"ngFor","ngForOf"],["colspan","5"],[3,"length","pageSize","pageSizeOptions","page"],[1,"margin-left"],[3,"ngClass"],[3,"routerLink"],[1,"no-padding"],["mat-icon-button","",1,"btn-edit",3,"click"],["mat-icon-button","",1,"btn-delete",3,"click"],[2,"height","2000px"],["matInput","","name","name","placeholder","Name",3,"ngModel","ngModelChange"]],template:function(b,A){1&b&&(e.TgZ(0,"div"),e._UZ(1,"el-page-loading",0),e.YNc(2,at,19,6,"div",1),e.TgZ(3,"el-content-sidebar",2,3),e.NdJ("closed",function(){return A.onClosedContentSidebar()}),e.TgZ(5,"div",4),e.YNc(6,ct,3,1,"form",5),e.qZA(),e.TgZ(7,"div",6)(8,"div",7),e._uU(9," Here to place footer. "),e.qZA(),e.TgZ(10,"div",8)(11,"button",9),e.NdJ("click",function(){return A.save()}),e._uU(12,"Save"),e.qZA()()()()()),2&b&&(e.xp6(1),e.Q6J("show",A.initlizating),e.xp6(1),e.Q6J("ngIf",!A.initlizating),e.xp6(1),e.Q6J("title","#"+(null==A.activedHero?null:A.activedHero.id)+" "+(null==A.activedHero?null:A.activedHero.name))("progressShown",A.saving)("open",A.activedHero),e.xp6(3),e.Q6J("ngIf",A.activedHero),e.xp6(5),e.Q6J("ngClass",e.VKq(8,lt,A.saving))("disabled",A.saving))},dependencies:[z.mk,z.sg,z.O5,h.lC,h.yS,t._Y,t.Fj,t.JJ,t.JL,t.On,t.F,i.lW,c.Hw,E.KE,H.Nt,Ve.NW,s,Qe.s,it]}),O})();function De(O,P,b,A,j,Y,te){try{var _e=O[Y](te),ne=_e.value}catch(be){return void b(be)}_e.done?P(ne):Promise.resolve(ne).then(A,j)}function ie(O){return function(){var P=this,b=arguments;return new Promise(function(A,j){var Y=O.apply(P,b);function te(ne){De(Y,A,j,te,_e,"next",ne)}function _e(ne){De(Y,A,j,te,_e,"throw",ne)}te(void 0)})}}var ut=J(4793),ft=J(9162),dt=J(3771),_t=J(3883),ae=(()=>{return(O=ae||(ae={}))[O.Open=0]="Open",O[O.Close=1]="Close",O[O.Error=2]="Error",O[O.Message=3]="Message",ae;var O})();class Pe{constructor(){this.events={}}on(P,b){"object"!=typeof this.events[P]&&(this.events[P]=[]),this.events[P].push(b)}emit(P,b){if(!this.events.hasOwnProperty(P))return;const A=this.events[P];for(let j=0;j<A.length;j++)A[j].call(this,b)}}class pt extends Pe{constructor(P){super(),this.url=P,this.connected=!1,this.connectServer()}sendCommand(P){return this.connected||this.connectServer(),new Promise(b=>setTimeout(()=>{this.connected&&(this.socket.send(P),b(""))},100))}dispose(){this.socket.close()}connectServer(){this.socket=new WebSocket(this.url),this.socket.onopen=()=>{this.connected=!0,console.log("opened"),this.emit(ae.Open,this.connected)},this.socket.onclose=()=>{console.log("onclose"),console.log(arguments),this.connected=!1,this.emit(ae.Close,!this.connected)},this.socket.onerror=P=>{console.log("onerror"),console.log(P);let b=P;this.connected||(b="Not connected."),this.emit(ae.Error,b)},this.socket.onmessage=P=>{console.log("onmessage"),console.log(P),this.emit(ae.Message,P)}}}class vt extends Pe{constructor(P){super(),this.promiseFn=P,this.connected=!0}sendCommand(P){return this.promiseFn(P).then(b=>(this.emit(ae.Message,b),b),b=>{this.emit(ae.Error,b)})}dispose(){}}var me=(()=>{return(O=me||(me={})).Black="\x1b[30m",O.Red="\x1b[31m",O.Green="\x1b[32m",O.Yellow="\x1b[33m",O.Blue="\x1b[34m",O.Magenta="\x1b[35m",O.Cyan="\x1b[36m",O.White="\x1b[37m",O.Reset="\x1b[0m",me;var O})();function Oe(O,P){return`${P}${O}${me.Reset}`}function Ie(O){return`\x1b[1m${O}\x1b[22m`}const gt={commandPrefix:"$ ",serverDisconnectedMessage:"Server not connected, try later...",welcomeMessage:`Welcome to use this terminal, type ${Ie(Oe("help",me.Yellow))} for more options...`,notConnectedMessage:"Not connected yet, try later",goodbyeMessage:"Bye bye...",cursorBlink:!0,cursorStyle:"block",fontSize:14,lineHeight:1.2,rendererType:"canvas",theme:{background:"black"}};class mt{constructor(P,b,A){this.options=gt,this.typingBlocked=!1,this.currentLine="",this.commandsBuffer={commands:[],pointer:-1},this.options={...this.options,...A},this.connection="string"==typeof b?new pt(b):new vt(b),this.terminal=new ut.Terminal(this.options),window.terminal=this.terminal,this.fitAddon=new ft.FitAddon,this.terminal.loadAddon(this.fitAddon),this.terminal.loadAddon(new _t.WebLinksAddon),this.terminal.loadAddon(new dt.Unicode11Addon),this.terminal.unicode.activeVersion="11",this.terminal.open(P),setTimeout(()=>{this.fitAddon.fit(),window.onresize=()=>this.fitAddon.fit()}),this.initTerminal().then(()=>{this.initListeners()}),this.initPrintableKeyListener(),this.initControlKeyListeners()}dispose(){this.connection.dispose(),this.terminal.dispose()}clear(){var P=this;return ie(function*(){yield P.printLineIntro(),P.terminal.clear()})()}commandReset(){var P=this;return ie(function*(){P.terminal.reset(),P.terminal.focus(),P.typingBlocked=!0,yield P.printFancyText(P.options.welcomeMessage,!1),yield P.printLineIntro()})()}initTerminal(){var P=this;return ie(function*(){yield P.commandReset()})()}initPrintableKeyListener(){var P=this;this.terminal.onData(function(){var b=ie(function*(A){if(P.typingBlocked)return!1;A.length>0&&A.charCodeAt(0)>=32&&A.charCodeAt(0)<127&&(console.log(A.charCodeAt(0)),yield P.write(A),P.currentLine+=A)});return function(A){return b.apply(this,arguments)}}())}initControlKeyListeners(){var P=this;this.terminal.onKey(function(){var b=ie(function*({key:A,domEvent:j}){if(P.typingBlocked)return!1;const Y=j.key,te=A.charCodeAt(0);Y.startsWith("Arrow")?"ArrowUp"===Y?yield P.browseHistory(!0):"ArrowDown"===Y&&(yield P.browseHistory(!1)):j.ctrlKey&&"c"===j.key?yield P.printLineIntro():13===te?yield P.processCurrentLine():127===te&&P.backspace()});return function(A){return b.apply(this,arguments)}}())}initListeners(){var P=this;this.connection.on(ae.Open,function(){var b=ie(function*(A){console.debug("Connection:Open"),A||(yield P.printText(P.options.notConnectedMessage,!0),yield P.printLineIntro())});return function(A){return b.apply(this,arguments)}}()),this.connection.on(ae.Close,function(){var b=ie(function*(A){console.debug("Connection:Close")});return function(A){return b.apply(this,arguments)}}()),this.connection.on(ae.Error,function(){var b=ie(function*(A){console.debug("Connection:Error"),console.debug(A),yield P.printText(Oe("string"!=typeof A?JSON.stringify(A):A,me.Red),!0),yield P.printLineIntro()});return function(A){return b.apply(this,arguments)}}()),this.connection.on(ae.Message,function(){var b=ie(function*(A){let j;console.debug("Connection:Message"),j=A.data?A.data:A.filedata?`Download as ${A.filename}`:"string"!=typeof A?JSON.stringify(A):A,A.error&&(j=A.error),A.fancyTyping?yield P.printFancyText(j,j.split("\n").length>0):yield P.printText(j,!0),yield P.printLineIntro()});return function(A){return b.apply(this,arguments)}}())}browseHistory(P=!0){var b=this;return ie(function*(){if(0===b.commandsBuffer.commands.length)return;-1===b.commandsBuffer.pointer?b.commandsBuffer.pointer=b.commandsBuffer.commands.length-1:P&&b.commandsBuffer.pointer>0?b.commandsBuffer.pointer--:!P&&b.commandsBuffer.pointer<b.commandsBuffer.commands.length-1&&b.commandsBuffer.pointer++;const A=b.commandsBuffer.commands[b.commandsBuffer.pointer];for(;b.currentLine.length>0;)yield b.backspace();b.currentLine=A,yield b.write(A)})()}write(P){var b=this;return ie(function*(){return new Promise((A,j)=>{b.terminal.write(P,()=>A(P))})})()}printLineIntro(){var P=this;return ie(function*(){P.currentLine="";const b=`>>> ${Oe((new Date).toLocaleTimeString(),me.Yellow)} ${Ie(P.options.commandPrefix)}`;yield P.printText(b,!1),P.terminal.focus()})()}printFancyText(P,b){var A=this;return ie(function*(){A.typingBlocked=!0;const j=A;return new Promise(function(){var Y=ie(function*(te){let _e;const ne=P.split("\n");let be=0,Se=0;function Lt(){return Fe.apply(this,arguments)}function Fe(){return(Fe=ie(function*(){const ke=ne[be];if(ke.length>0&&Se<ke.length){const qt=ke[Se];yield j.write(qt),Se++}if(Se===ke.length&&1===ne.length?(b&&(yield j.write("\n\r")),be++):Se===ke.length&&ne.length>1&&be<ne.length&&(Se=0,be++,yield j.write("\n\r")),!(be<ne.length))return cancelAnimationFrame(_e),j.typingBlocked=!1,te(P);_e=requestAnimationFrame(Lt)})).apply(this,arguments)}return yield Lt()});return function(te){return Y.apply(this,arguments)}}())})()}printText(P,b){var A=this;return ie(function*(){A.typingBlocked=!0,yield A.write("\r\n"+(P||"").replace("\n","\r\n")),b&&(yield A.newLine()),A.typingBlocked=!1})()}asyncCommand(P){var b=this;return ie(function*(){return console.log("send cmd"),yield b.connection.sendCommand(P)})()}newLine(){var P=this;return ie(function*(){yield P.write("\r\n")})()}processCurrentLine(){var P=this;return ie(function*(){const b=P.currentLine.trim();if(""!==b&&(P.commandsBuffer.commands.push(b),P.commandsBuffer.pointer=-1),""===b)return P.printLineIntro(),Promise.resolve();"clear"===b?yield P.clear():"reset"===b?yield P.commandReset():"history"===b?yield P.printHistory():yield P.asyncCommand(b)})()}printHistory(){var P=this;return ie(function*(){yield P.newLine();const b=P.commandsBuffer.commands.reduce((A,j,Y,te)=>(A+=Y,A+="\t",A+=j.trim(),Y<te.length-1&&(A+="\r\n"),A),"");yield P.printFancyText(b,1===b.split("\n").length),yield P.printLineIntro()})()}backspace(){this.currentLine.length>0&&(this.terminal.write("\b \b"),this.currentLine=this.currentLine.slice(0,-1))}}class yt{constructor(P,b){this.element=P,this.socketUrlOrAjaxFn=b,this.xterm=new mt(this.element,this.socketUrlOrAjaxFn)}dispose(){this.xterm.dispose()}}var He=J(811);const bt=["terminalBox"],Ct=[{path:"",component:T,children:[{path:"get-started",component:(()=>{class O{constructor(b){this.http=b}ngOnInit(){this.http.get("/assets/README.md",{responseType:"text"}).subscribe(b=>{const A=new showdown.Converter;this.readMe=A.makeHtml(b)})}}return O.\u0275fac=function(b){return new(b||O)(e.Y36(v.eN))},O.\u0275cmp=e.Xpm({type:O,selectors:[["app-get-started"]],decls:1,vars:1,consts:[[3,"innerHTML"]],template:function(b,A){1&b&&e._UZ(0,"div",0),2&b&&e.Q6J("innerHTML",A.readMe,e.oJD)},styles:["[_nghost-%COMP%]     img{max-width:900px}"]}),O})()},{path:"examples/button",component:$},{path:"examples/card",component:q},{path:"examples/dynamic-form",component:Dt},{path:"examples/layout",component:Ge},{path:"examples/table",component:ht,children:[{path:":id",component:Ke}]},{path:"examples/terminal",component:(()=>{class O{constructor(b){this.http=b,this.serverType="web-socket"}ngAfterViewInit(){this.initUI()}ngOnDestroy(){this.terminal.dispose()}changeServer(b){this.serverType=b.value,this.initUI()}initUI(){let b;this.terminal&&this.terminal.dispose(),"web-socket"===this.serverType?b="ws://localhost:10000":"rest-api"===this.serverType&&(b=A=>this.http.get(`http://localhost:3000?cmd=${A}`).pipe((0,Be.U)(j=>j.text)).toPromise()),this.terminal=new yt(this.terminalDiv.nativeElement,b)}}return O.\u0275fac=function(b){return new(b||O)(e.Y36(v.eN))},O.\u0275cmp=e.Xpm({type:O,selectors:[["app-examples-terminal"]],viewQuery:function(b,A){if(1&b&&e.Gf(bt,5),2&b){let j;e.iGM(j=e.CRH())&&(A.terminalDiv=j.first)}},decls:9,vars:1,consts:[["id","terminalConntainer"],["terminalBox",""],[2,"margin-top","2rem"],["name","server",3,"value","change"],["value","web-socket"],["value","rest-api"]],template:function(b,A){1&b&&(e.TgZ(0,"div",0),e._UZ(1,"div",null,1),e.qZA(),e.TgZ(3,"div",2)(4,"mat-button-toggle-group",3),e.NdJ("change",function(Y){return A.changeServer(Y)}),e.TgZ(5,"mat-button-toggle",4),e._uU(6,"Web Socket"),e.qZA(),e.TgZ(7,"mat-button-toggle",5),e._uU(8,"RESTful API"),e.qZA()()()),2&b&&(e.xp6(4),e.Q6J("value",A.serverType))},dependencies:[He.A9,He.Yi],styles:['/**\n * Copyright (c) 2014 The xterm.js authors. All rights reserved.\n * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)\n * https://github.com/chjj/term.js\n * @license MIT\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the "Software"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n *\n * Originally forked from (with the author\'s permission):\n *   Fabrice Bellard\'s javascript vt100 for jslinux:\n *   http://bellard.org/jslinux/\n *   Copyright (c) 2011 Fabrice Bellard\n *   The original design remains. The terminal itself\n *   has been extended to include xterm CSI codes, among\n *   other features.\n */.xterm{position:relative;user-select:none;-ms-user-select:none;-webkit-user-select:none}.xterm.focus,.xterm:focus{outline:none}.xterm .xterm-helpers{position:absolute;top:0;z-index:5}.xterm .xterm-helper-textarea{padding:0;border:0;margin:0;position:absolute;opacity:0;left:-9999em;top:0;width:0;height:0;z-index:-5;white-space:nowrap;overflow:hidden;resize:none}.xterm .composition-view{background:#000;color:#fff;display:none;position:absolute;white-space:nowrap;z-index:1}.xterm .composition-view.active{display:block}.xterm .xterm-viewport{background-color:#000;overflow-y:scroll;cursor:default;position:absolute;right:0;left:0;top:0;bottom:0}.xterm .xterm-screen{position:relative}.xterm .xterm-screen canvas{position:absolute;left:0;top:0}.xterm .xterm-scroll-area{visibility:hidden}.xterm-char-measure-element{display:inline-block;visibility:hidden;position:absolute;top:0;left:-9999em;line-height:normal}.xterm{cursor:text}.xterm.enable-mouse-events{cursor:default}.xterm.xterm-cursor-pointer{cursor:pointer}.xterm.column-select.focus{cursor:crosshair}.xterm .xterm-accessibility,.xterm .xterm-message{position:absolute;left:0;top:0;bottom:0;right:0;z-index:10;color:transparent}.xterm .live-region{position:absolute;left:-9999px;width:1px;height:1px;overflow:hidden}.xterm-dim{opacity:.5}.xterm-underline{text-decoration:underline}.xterm-strikethrough{text-decoration:line-through}#terminalConntainer{margin:-1rem -2rem}\n'],encapsulation:2}),O})()}]}];let St=(()=>{class O{}return O.\u0275fac=function(b){return new(b||O)},O.\u0275mod=e.oAB({type:O}),O.\u0275inj=e.cJS({imports:[h.Bz.forChild(Ct),h.Bz]}),O})(),wt=(()=>{class O{}return O.\u0275fac=function(b){return new(b||O)},O.\u0275mod=e.oAB({type:O}),O.\u0275inj=e.cJS({imports:[z.ez,ee._t,St,a.e,F.r,m.m8]}),O})()},9162:Te=>{self,Te.exports=(()=>{"use strict";var le={775:(ee,z)=>{Object.defineProperty(z,"__esModule",{value:!0}),z.FitAddon=void 0;var F=function(){function a(){}return a.prototype.activate=function(m){this._terminal=m},a.prototype.dispose=function(){},a.prototype.fit=function(){var m=this.proposeDimensions();m&&this._terminal&&(this._terminal.rows===m.rows&&this._terminal.cols===m.cols||(this._terminal._core._renderService.clear(),this._terminal.resize(m.cols,m.rows)))},a.prototype.proposeDimensions=function(){if(this._terminal&&this._terminal.element&&this._terminal.element.parentElement){var m=this._terminal._core;if(0!==m._renderService.dimensions.actualCellWidth&&0!==m._renderService.dimensions.actualCellHeight){var h=window.getComputedStyle(this._terminal.element.parentElement),_=parseInt(h.getPropertyValue("height")),d=Math.max(0,parseInt(h.getPropertyValue("width"))),f=window.getComputedStyle(this._terminal.element),e=_-(parseInt(f.getPropertyValue("padding-top"))+parseInt(f.getPropertyValue("padding-bottom"))),v=d-(parseInt(f.getPropertyValue("padding-right"))+parseInt(f.getPropertyValue("padding-left")))-m.viewport.scrollBarWidth;return{cols:Math.max(2,Math.floor(v/m._renderService.dimensions.actualCellWidth)),rows:Math.max(1,Math.floor(e/m._renderService.dimensions.actualCellHeight))}}}},a}();z.FitAddon=F}},J={};return function ee(z){if(J[z])return J[z].exports;var F=J[z]={exports:{}};return le[z](F,F.exports,ee),F.exports}(775)})()},3771:function(Te){Te.exports=(()=>{"use strict";var le={433:(F,a,m)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeV11=void 0;const h=m(455),_=[[768,879],[1155,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1541],[1552,1562],[1564,1564],[1611,1631],[1648,1648],[1750,1757],[1759,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2045,2045],[2070,2073],[2075,2083],[2085,2087],[2089,2093],[2137,2139],[2259,2306],[2362,2362],[2364,2364],[2369,2376],[2381,2381],[2385,2391],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2558,2558],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2641,2641],[2672,2673],[2677,2677],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2810,2815],[2817,2817],[2876,2876],[2879,2879],[2881,2884],[2893,2893],[2902,2902],[2914,2915],[2946,2946],[3008,3008],[3021,3021],[3072,3072],[3076,3076],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3170,3171],[3201,3201],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3328,3329],[3387,3388],[3393,3396],[3405,3405],[3426,3427],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3981,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4151],[4153,4154],[4157,4158],[4184,4185],[4190,4192],[4209,4212],[4226,4226],[4229,4230],[4237,4237],[4253,4253],[4448,4607],[4957,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6158],[6277,6278],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6683,6683],[6742,6742],[6744,6750],[6752,6752],[6754,6754],[6757,6764],[6771,6780],[6783,6783],[6832,6846],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7040,7041],[7074,7077],[7080,7081],[7083,7085],[7142,7142],[7144,7145],[7149,7149],[7151,7153],[7212,7219],[7222,7223],[7376,7378],[7380,7392],[7394,7400],[7405,7405],[7412,7412],[7416,7417],[7616,7673],[7675,7679],[8203,8207],[8234,8238],[8288,8292],[8294,8303],[8400,8432],[11503,11505],[11647,11647],[11744,11775],[12330,12333],[12441,12442],[42607,42610],[42612,42621],[42654,42655],[42736,42737],[43010,43010],[43014,43014],[43019,43019],[43045,43046],[43204,43205],[43232,43249],[43263,43263],[43302,43309],[43335,43345],[43392,43394],[43443,43443],[43446,43449],[43452,43453],[43493,43493],[43561,43566],[43569,43570],[43573,43574],[43587,43587],[43596,43596],[43644,43644],[43696,43696],[43698,43700],[43703,43704],[43710,43711],[43713,43713],[43756,43757],[43766,43766],[44005,44005],[44008,44008],[44013,44013],[64286,64286],[65024,65039],[65056,65071],[65279,65279],[65529,65531]],d=[[66045,66045],[66272,66272],[66422,66426],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[68325,68326],[68900,68903],[69446,69456],[69633,69633],[69688,69702],[69759,69761],[69811,69814],[69817,69818],[69821,69821],[69837,69837],[69888,69890],[69927,69931],[69933,69940],[70003,70003],[70016,70017],[70070,70078],[70089,70092],[70191,70193],[70196,70196],[70198,70199],[70206,70206],[70367,70367],[70371,70378],[70400,70401],[70459,70460],[70464,70464],[70502,70508],[70512,70516],[70712,70719],[70722,70724],[70726,70726],[70750,70750],[70835,70840],[70842,70842],[70847,70848],[70850,70851],[71090,71093],[71100,71101],[71103,71104],[71132,71133],[71219,71226],[71229,71229],[71231,71232],[71339,71339],[71341,71341],[71344,71349],[71351,71351],[71453,71455],[71458,71461],[71463,71467],[71727,71735],[71737,71738],[72148,72151],[72154,72155],[72160,72160],[72193,72202],[72243,72248],[72251,72254],[72263,72263],[72273,72278],[72281,72283],[72330,72342],[72344,72345],[72752,72758],[72760,72765],[72767,72767],[72850,72871],[72874,72880],[72882,72883],[72885,72886],[73009,73014],[73018,73018],[73020,73021],[73023,73029],[73031,73031],[73104,73105],[73109,73109],[73111,73111],[73459,73460],[78896,78904],[92912,92916],[92976,92982],[94031,94031],[94095,94098],[113821,113822],[113824,113827],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[121344,121398],[121403,121452],[121461,121461],[121476,121476],[121499,121503],[121505,121519],[122880,122886],[122888,122904],[122907,122913],[122915,122916],[122918,122922],[123184,123190],[123628,123631],[125136,125142],[125252,125258],[917505,917505],[917536,917631],[917760,917999]],f=[[4352,4447],[8986,8987],[9001,9002],[9193,9196],[9200,9200],[9203,9203],[9725,9726],[9748,9749],[9800,9811],[9855,9855],[9875,9875],[9889,9889],[9898,9899],[9917,9918],[9924,9925],[9934,9934],[9940,9940],[9962,9962],[9970,9971],[9973,9973],[9978,9978],[9981,9981],[9989,9989],[9994,9995],[10024,10024],[10060,10060],[10062,10062],[10067,10069],[10071,10071],[10133,10135],[10160,10160],[10175,10175],[11035,11036],[11088,11088],[11093,11093],[11904,11929],[11931,12019],[12032,12245],[12272,12283],[12288,12329],[12334,12350],[12353,12438],[12443,12543],[12549,12591],[12593,12686],[12688,12730],[12736,12771],[12784,12830],[12832,12871],[12880,19903],[19968,42124],[42128,42182],[43360,43388],[44032,55203],[63744,64255],[65040,65049],[65072,65106],[65108,65126],[65128,65131],[65281,65376],[65504,65510]],e=[[94176,94179],[94208,100343],[100352,101106],[110592,110878],[110928,110930],[110948,110951],[110960,111355],[126980,126980],[127183,127183],[127374,127374],[127377,127386],[127488,127490],[127504,127547],[127552,127560],[127568,127569],[127584,127589],[127744,127776],[127789,127797],[127799,127868],[127870,127891],[127904,127946],[127951,127955],[127968,127984],[127988,127988],[127992,128062],[128064,128064],[128066,128252],[128255,128317],[128331,128334],[128336,128359],[128378,128378],[128405,128406],[128420,128420],[128507,128591],[128640,128709],[128716,128716],[128720,128722],[128725,128725],[128747,128748],[128756,128762],[128992,129003],[129293,129393],[129395,129398],[129402,129442],[129445,129450],[129454,129482],[129485,129535],[129648,129651],[129656,129658],[129664,129666],[129680,129685],[131072,196605],[196608,262141]];let v;function n(s,u){let o,r=0,t=u.length-1;if(s<u[0][0]||s>u[t][1])return!1;for(;t>=r;)if(o=r+t>>1,s>u[o][1])r=o+1;else{if(!(s<u[o][0]))return!0;t=o-1}return!1}a.UnicodeV11=class{constructor(){if(this.version="11",!v){v=new Uint8Array(65536),h.fill(v,1),v[0]=0,h.fill(v,0,1,32),h.fill(v,0,127,160);for(let s=0;s<_.length;++s)h.fill(v,0,_[s][0],_[s][1]+1);for(let s=0;s<f.length;++s)h.fill(v,2,f[s][0],f[s][1]+1)}}wcwidth(s){return s<32?0:s<127?1:s<65536?v[s]:n(s,d)?0:n(s,e)?2:1}}},455:(F,a)=>{function m(h,_,d,f){if(void 0===d&&(d=0),void 0===f&&(f=h.length),d>=h.length)return h;f=f>=h.length?h.length:(h.length+f)%h.length;for(var e=d=(h.length+d)%h.length;e<f;++e)h[e]=_;return h}Object.defineProperty(a,"__esModule",{value:!0}),a.concat=a.fillFallback=a.fill=void 0,a.fill=function(h,_,d,f){return h.fill?h.fill(_,d,f):m(h,_,d,f)},a.fillFallback=m,a.concat=function(h,_){var d=new h.constructor(h.length+_.length);return d.set(h),d.set(_,h.length),d}}},J={};function ee(F){var a=J[F];if(void 0!==a)return a.exports;var m=J[F]={exports:{}};return le[F](m,m.exports,ee),m.exports}var z={};return(()=>{var F=z;Object.defineProperty(F,"__esModule",{value:!0}),F.Unicode11Addon=void 0;const a=ee(433);F.Unicode11Addon=class{activate(m){m.unicode.register(new a.UnicodeV11)}dispose(){}}})(),z})()},3883:Te=>{window,Te.exports=function(le){var J={};function ee(z){if(J[z])return J[z].exports;var F=J[z]={i:z,l:!1,exports:{}};return le[z].call(F.exports,F,F.exports,ee),F.l=!0,F.exports}return ee.m=le,ee.c=J,ee.d=function(z,F,a){ee.o(z,F)||Object.defineProperty(z,F,{enumerable:!0,get:a})},ee.r=function(z){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(z,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(z,"__esModule",{value:!0})},ee.t=function(z,F){if(1&F&&(z=ee(z)),8&F||4&F&&"object"==typeof z&&z&&z.__esModule)return z;var a=Object.create(null);if(ee.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:z}),2&F&&"string"!=typeof z)for(var m in z)ee.d(a,m,function(h){return z[h]}.bind(null,m));return a},ee.n=function(z){var F=z&&z.__esModule?function(){return z.default}:function(){return z};return ee.d(F,"a",F),F},ee.o=function(z,F){return Object.prototype.hasOwnProperty.call(z,F)},ee.p="",ee(ee.s=0)}([function(le,J,ee){"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.WebLinksAddon=void 0;var z=ee(1),F=new RegExp("(?:^|[^\\da-z\\.-]+)((https?:\\/\\/)((([\\da-z\\.-]+)\\.([a-z\\.]{2,6}))|((\\d{1,3}\\.){3}\\d{1,3})|(localhost))(:\\d{1,5})?((\\/[\\/\\w\\.\\-%~:+@]*)*([^:\"'\\s]))?(\\?[0-9\\w\\[\\]\\(\\)\\/\\?\\!#@$%&'*+,:;~\\=\\.\\-]*)?(#[0-9\\w\\[\\]\\(\\)\\/\\?\\!#@$%&'*+,:;~\\=\\.\\-]*)?)($|[^\\/\\w\\.\\-%]+)");function a(h,_){var d=window.open();d?(d.opener=null,d.location.href=_):console.warn("Opening link blocked as opener could not be cleared")}var m=function(){function h(_,d,f){void 0===_&&(_=a),void 0===d&&(d={}),void 0===f&&(f=!1),this._handler=_,this._options=d,this._useLinkProvider=f,this._options.matchIndex=1}return h.prototype.activate=function(_){this._terminal=_,this._useLinkProvider&&"registerLinkProvider"in this._terminal?this._linkProvider=this._terminal.registerLinkProvider(new z.WebLinkProvider(this._terminal,F,this._handler)):this._linkMatcherId=this._terminal.registerLinkMatcher(F,this._handler,this._options)},h.prototype.dispose=function(){var _;void 0!==this._linkMatcherId&&void 0!==this._terminal&&this._terminal.deregisterLinkMatcher(this._linkMatcherId),null===(_=this._linkProvider)||void 0===_||_.dispose()},h}();J.WebLinksAddon=m},function(le,J,ee){"use strict";Object.defineProperty(J,"__esModule",{value:!0}),J.LinkComputer=J.WebLinkProvider=void 0;var z=function(){function a(m,h,_){this._terminal=m,this._regex=h,this._handler=_}return a.prototype.provideLinks=function(m,h){h(F.computeLink(m,this._regex,this._terminal,this._handler))},a}();J.WebLinkProvider=z;var F=function(){function a(){}return a.computeLink=function(m,h,_,d){for(var f,e=new RegExp(h.source,(h.flags||"")+"g"),v=a._translateBufferLineToStringWithWrap(m-1,!1,_),n=v[0],s=v[1],u=-1,o=[];null!==(f=e.exec(n));){var r=f[1];if(!r){console.log("match found without corresponding matchIndex");break}if(u=n.indexOf(r,u+1),e.lastIndex=u+r.length,u<0)break;for(var t=u+r.length,i=s+1;t>_.cols;)t-=_.cols,i++;o.push({range:{start:{x:u+1,y:s+1},end:{x:t,y:i}},text:r,activate:d})}return o},a._translateBufferLineToStringWithWrap=function(m,h,_){var d,f,e="";do{if(!(n=_.buffer.active.getLine(m)))break;n.isWrapped&&m--,f=n.isWrapped}while(f);var v=m;do{var n,s=_.buffer.active.getLine(m+1);if(d=!!s&&s.isWrapped,!(n=_.buffer.active.getLine(m)))break;e+=n.translateToString(!d&&h).substring(0,_.cols),m++}while(d);return[e,v]},a}();J.LinkComputer=F}])},4793:Te=>{self,Te.exports=(()=>{"use strict";var le={4567:function(F,a,m){var h,_=this&&this.__extends||(h=function(r,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,c){i.__proto__=c}||function(i,c){for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(i[l]=c[l])})(r,t)},function(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=r}h(r,t),r.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(a,"__esModule",{value:!0}),a.AccessibilityManager=void 0;var d=m(9042),f=m(6114),e=m(9924),v=m(3656),n=m(844),s=m(5596),u=m(9631),o=function(r){function t(i,c){var l=r.call(this)||this;l._terminal=i,l._renderService=c,l._liveRegionLineCount=0,l._charsToConsume=[],l._charsToAnnounce="",l._accessibilityTreeRoot=document.createElement("div"),l._accessibilityTreeRoot.classList.add("xterm-accessibility"),l._rowContainer=document.createElement("div"),l._rowContainer.setAttribute("role","list"),l._rowContainer.classList.add("xterm-accessibility-tree"),l._rowElements=[];for(var p=0;p<l._terminal.rows;p++)l._rowElements[p]=l._createAccessibilityTreeNode(),l._rowContainer.appendChild(l._rowElements[p]);if(l._topBoundaryFocusListener=function(g){return l._onBoundaryFocus(g,0)},l._bottomBoundaryFocusListener=function(g){return l._onBoundaryFocus(g,1)},l._rowElements[0].addEventListener("focus",l._topBoundaryFocusListener),l._rowElements[l._rowElements.length-1].addEventListener("focus",l._bottomBoundaryFocusListener),l._refreshRowsDimensions(),l._accessibilityTreeRoot.appendChild(l._rowContainer),l._renderRowsDebouncer=new e.TimeBasedDebouncer(l._renderRows.bind(l)),l._refreshRows(),l._liveRegion=document.createElement("div"),l._liveRegion.classList.add("live-region"),l._liveRegion.setAttribute("aria-live","assertive"),l._accessibilityTreeRoot.appendChild(l._liveRegion),!l._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");return l._terminal.element.insertAdjacentElement("afterbegin",l._accessibilityTreeRoot),l.register(l._renderRowsDebouncer),l.register(l._terminal.onResize(function(g){return l._onResize(g.rows)})),l.register(l._terminal.onRender(function(g){return l._refreshRows(g.start,g.end)})),l.register(l._terminal.onScroll(function(){return l._refreshRows()})),l.register(l._terminal.onA11yChar(function(g){return l._onChar(g)})),l.register(l._terminal.onLineFeed(function(){return l._onChar("\n")})),l.register(l._terminal.onA11yTab(function(g){return l._onTab(g)})),l.register(l._terminal.onKey(function(g){return l._onKey(g.key)})),l.register(l._terminal.onBlur(function(){return l._clearLiveRegion()})),l.register(l._renderService.onDimensionsChange(function(){return l._refreshRowsDimensions()})),l._screenDprMonitor=new s.ScreenDprMonitor,l.register(l._screenDprMonitor),l._screenDprMonitor.setListener(function(){return l._refreshRowsDimensions()}),l.register(v.addDisposableDomListener(window,"resize",function(){return l._refreshRowsDimensions()})),l}return _(t,r),t.prototype.dispose=function(){r.prototype.dispose.call(this),u.removeElementFromParent(this._accessibilityTreeRoot),this._rowElements.length=0},t.prototype._onBoundaryFocus=function(i,c){var l=i.target,p=this._rowElements[0===c?1:this._rowElements.length-2];if(l.getAttribute("aria-posinset")!==(0===c?"1":""+this._terminal.buffer.lines.length)&&i.relatedTarget===p){var g,w;if(0===c?(g=l,w=this._rowElements.pop(),this._rowContainer.removeChild(w)):(g=this._rowElements.shift(),w=l,this._rowContainer.removeChild(g)),g.removeEventListener("focus",this._topBoundaryFocusListener),w.removeEventListener("focus",this._bottomBoundaryFocusListener),0===c){var y=this._createAccessibilityTreeNode();this._rowElements.unshift(y),this._rowContainer.insertAdjacentElement("afterbegin",y)}else y=this._createAccessibilityTreeNode(),this._rowElements.push(y),this._rowContainer.appendChild(y);this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(0===c?-1:1),this._rowElements[0===c?1:this._rowElements.length-2].focus(),i.preventDefault(),i.stopImmediatePropagation()}},t.prototype._onResize=function(i){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var c=this._rowContainer.children.length;c<this._terminal.rows;c++)this._rowElements[c]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[c]);for(;this._rowElements.length>i;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},t.prototype._createAccessibilityTreeNode=function(){var i=document.createElement("div");return i.setAttribute("role","listitem"),i.tabIndex=-1,this._refreshRowDimensions(i),i},t.prototype._onTab=function(i){for(var c=0;c<i;c++)this._onChar(" ")},t.prototype._onChar=function(i){var c=this;this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==i&&(this._charsToAnnounce+=i):this._charsToAnnounce+=i,"\n"===i&&(this._liveRegionLineCount++,21===this._liveRegionLineCount&&(this._liveRegion.textContent+=d.tooMuchOutput)),f.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(function(){c._accessibilityTreeRoot.appendChild(c._liveRegion)},0))},t.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,f.isMac&&u.removeElementFromParent(this._liveRegion)},t.prototype._onKey=function(i){this._clearLiveRegion(),this._charsToConsume.push(i)},t.prototype._refreshRows=function(i,c){this._renderRowsDebouncer.refresh(i,c,this._terminal.rows)},t.prototype._renderRows=function(i,c){for(var l=this._terminal.buffer,p=l.lines.length.toString(),g=i;g<=c;g++){var w=l.translateBufferLineToString(l.ydisp+g,!0),y=(l.ydisp+g+1).toString(),S=this._rowElements[g];S&&(0===w.length?S.innerText="\xa0":S.textContent=w,S.setAttribute("aria-posinset",y),S.setAttribute("aria-setsize",p))}this._announceCharacters()},t.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var i=0;i<this._terminal.rows;i++)this._refreshRowDimensions(this._rowElements[i])}},t.prototype._refreshRowDimensions=function(i){i.style.height=this._renderService.dimensions.actualCellHeight+"px"},t.prototype._announceCharacters=function(){0!==this._charsToAnnounce.length&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},t}(n.Disposable);a.AccessibilityManager=o},3614:(F,a)=>{function m(f){return f.replace(/\r?\n/g,"\r")}function h(f,e){return e?"\x1b[200~"+f+"\x1b[201~":f}function _(f,e,v){f=h(f=m(f),v.decPrivateModes.bracketedPasteMode),v.triggerDataEvent(f,!0),e.value=""}function d(f,e,v){var n=v.getBoundingClientRect(),s=f.clientX-n.left-10,u=f.clientY-n.top-10;e.style.width="20px",e.style.height="20px",e.style.left=s+"px",e.style.top=u+"px",e.style.zIndex="1000",e.focus()}Object.defineProperty(a,"__esModule",{value:!0}),a.rightClickHandler=a.moveTextAreaUnderMouseCursor=a.paste=a.handlePasteEvent=a.copyHandler=a.bracketTextForPaste=a.prepareTextForTerminal=void 0,a.prepareTextForTerminal=m,a.bracketTextForPaste=h,a.copyHandler=function(f,e){f.clipboardData&&f.clipboardData.setData("text/plain",e.selectionText),f.preventDefault()},a.handlePasteEvent=function(f,e,v){f.stopPropagation(),f.clipboardData&&_(f.clipboardData.getData("text/plain"),e,v)},a.paste=_,a.moveTextAreaUnderMouseCursor=d,a.rightClickHandler=function(f,e,v,n,s){d(f,e,v),s&&n.rightClickSelect(f),e.value=n.selectionText,e.select()}},4774:(F,a)=>{var m,h,_,d,v;function f(v){var n=v.toString(16);return n.length<2?"0"+n:n}function e(v,n){return v<n?(n+.05)/(v+.05):(v+.05)/(n+.05)}Object.defineProperty(a,"__esModule",{value:!0}),a.contrastRatio=a.toPaddedHex=a.rgba=a.rgb=a.css=a.color=a.channels=void 0,(v=m=a.channels||(a.channels={})).toCss=function(n,s,u,o){return void 0!==o?"#"+f(n)+f(s)+f(u)+f(o):"#"+f(n)+f(s)+f(u)},v.toRgba=function(n,s,u,o){return void 0===o&&(o=255),(n<<24|s<<16|u<<8|o)>>>0},(h=a.color||(a.color={})).blend=function(v,n){var s=(255&n.rgba)/255;if(1===s)return{css:n.css,rgba:n.rgba};var o=n.rgba>>16&255,r=n.rgba>>8&255,t=v.rgba>>24&255,i=v.rgba>>16&255,c=v.rgba>>8&255,l=t+Math.round(((n.rgba>>24&255)-t)*s),p=i+Math.round((o-i)*s),g=c+Math.round((r-c)*s);return{css:m.toCss(l,p,g),rgba:m.toRgba(l,p,g)}},h.isOpaque=function(v){return 255==(255&v.rgba)},h.ensureContrastRatio=function(v,n,s){var u=d.ensureContrastRatio(v.rgba,n.rgba,s);if(u)return d.toColor(u>>24&255,u>>16&255,u>>8&255)},h.opaque=function(v){var n=(255|v.rgba)>>>0,s=d.toChannels(n);return{css:m.toCss(s[0],s[1],s[2]),rgba:n}},h.opacity=function(v,n){var s=Math.round(255*n),u=d.toChannels(v.rgba),o=u[0],r=u[1],t=u[2];return{css:m.toCss(o,r,t,s),rgba:m.toRgba(o,r,t,s)}},(a.css||(a.css={})).toColor=function(v){switch(v.length){case 7:return{css:v,rgba:(parseInt(v.slice(1),16)<<8|255)>>>0};case 9:return{css:v,rgba:parseInt(v.slice(1),16)>>>0}}throw new Error("css.toColor: Unsupported css format")},function(v){function n(s,u,o){var r=s/255,t=u/255,i=o/255;return.2126*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))}v.relativeLuminance=function(s){return n(s>>16&255,s>>8&255,255&s)},v.relativeLuminance2=n}(_=a.rgb||(a.rgb={})),function(v){function n(u,o,r){for(var t=u>>24&255,i=u>>16&255,c=u>>8&255,l=o>>24&255,p=o>>16&255,g=o>>8&255,w=e(_.relativeLuminance2(l,g,p),_.relativeLuminance2(t,i,c));w<r&&(l>0||p>0||g>0);)l-=Math.max(0,Math.ceil(.1*l)),p-=Math.max(0,Math.ceil(.1*p)),g-=Math.max(0,Math.ceil(.1*g)),w=e(_.relativeLuminance2(l,g,p),_.relativeLuminance2(t,i,c));return(l<<24|p<<16|g<<8|255)>>>0}function s(u,o,r){for(var t=u>>24&255,i=u>>16&255,c=u>>8&255,l=o>>24&255,p=o>>16&255,g=o>>8&255,w=e(_.relativeLuminance2(l,g,p),_.relativeLuminance2(t,i,c));w<r&&(l<255||p<255||g<255);)l=Math.min(255,l+Math.ceil(.1*(255-l))),p=Math.min(255,p+Math.ceil(.1*(255-p))),g=Math.min(255,g+Math.ceil(.1*(255-g))),w=e(_.relativeLuminance2(l,g,p),_.relativeLuminance2(t,i,c));return(l<<24|p<<16|g<<8|255)>>>0}v.ensureContrastRatio=function(u,o,r){var t=_.relativeLuminance(u>>8),i=_.relativeLuminance(o>>8);if(e(t,i)<r)return i<t?n(u,o,r):s(u,o,r)},v.reduceLuminance=n,v.increaseLuminance=s,v.toChannels=function(u){return[u>>24&255,u>>16&255,u>>8&255,255&u]},v.toColor=function(u,o,r){return{css:m.toCss(u,o,r),rgba:m.toRgba(u,o,r)}}}(d=a.rgba||(a.rgba={})),a.toPaddedHex=f,a.contrastRatio=e},7239:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ColorContrastCache=void 0;var m=function(){function h(){this._color={},this._rgba={}}return h.prototype.clear=function(){this._color={},this._rgba={}},h.prototype.setCss=function(_,d,f){this._rgba[_]||(this._rgba[_]={}),this._rgba[_][d]=f},h.prototype.getCss=function(_,d){return this._rgba[_]?this._rgba[_][d]:void 0},h.prototype.setColor=function(_,d,f){this._color[_]||(this._color[_]={}),this._color[_][d]=f},h.prototype.getColor=function(_,d){return this._color[_]?this._color[_][d]:void 0},h}();a.ColorContrastCache=m},5680:(F,a,m)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ColorManager=a.DEFAULT_ANSI_COLORS=void 0;var h=m(4774),_=m(7239),d=h.css.toColor("#ffffff"),f=h.css.toColor("#000000"),e=h.css.toColor("#ffffff"),v=h.css.toColor("#000000"),n={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};a.DEFAULT_ANSI_COLORS=Object.freeze(function(){for(var u=[h.css.toColor("#2e3436"),h.css.toColor("#cc0000"),h.css.toColor("#4e9a06"),h.css.toColor("#c4a000"),h.css.toColor("#3465a4"),h.css.toColor("#75507b"),h.css.toColor("#06989a"),h.css.toColor("#d3d7cf"),h.css.toColor("#555753"),h.css.toColor("#ef2929"),h.css.toColor("#8ae234"),h.css.toColor("#fce94f"),h.css.toColor("#729fcf"),h.css.toColor("#ad7fa8"),h.css.toColor("#34e2e2"),h.css.toColor("#eeeeec")],o=[0,95,135,175,215,255],r=0;r<216;r++){var t=o[r/36%6|0],i=o[r/6%6|0],c=o[r%6];u.push({css:h.channels.toCss(t,i,c),rgba:h.channels.toRgba(t,i,c)})}for(r=0;r<24;r++){var l=8+10*r;u.push({css:h.channels.toCss(l,l,l),rgba:h.channels.toRgba(l,l,l)})}return u}());var s=function(){function u(o,r){this.allowTransparency=r;var t=o.createElement("canvas");t.width=1,t.height=1;var i=t.getContext("2d");if(!i)throw new Error("Could not get rendering context");this._ctx=i,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new _.ColorContrastCache,this.colors={foreground:d,background:f,cursor:e,cursorAccent:v,selectionTransparent:n,selectionOpaque:h.color.blend(f,n),ansi:a.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache}}return u.prototype.onOptionsChange=function(o){"minimumContrastRatio"===o&&this._contrastCache.clear()},u.prototype.setTheme=function(o){void 0===o&&(o={}),this.colors.foreground=this._parseColor(o.foreground,d),this.colors.background=this._parseColor(o.background,f),this.colors.cursor=this._parseColor(o.cursor,e,!0),this.colors.cursorAccent=this._parseColor(o.cursorAccent,v,!0),this.colors.selectionTransparent=this._parseColor(o.selection,n,!0),this.colors.selectionOpaque=h.color.blend(this.colors.background,this.colors.selectionTransparent),h.color.isOpaque(this.colors.selectionTransparent)&&(this.colors.selectionTransparent=h.color.opacity(this.colors.selectionTransparent,.3)),this.colors.ansi[0]=this._parseColor(o.black,a.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(o.red,a.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(o.green,a.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(o.yellow,a.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(o.blue,a.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(o.magenta,a.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(o.cyan,a.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(o.white,a.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(o.brightBlack,a.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(o.brightRed,a.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(o.brightGreen,a.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(o.brightYellow,a.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(o.brightBlue,a.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(o.brightMagenta,a.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(o.brightCyan,a.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(o.brightWhite,a.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear()},u.prototype._parseColor=function(o,r,t){if(void 0===t&&(t=this.allowTransparency),void 0===o)return r;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=o,"string"!=typeof this._ctx.fillStyle)return console.warn("Color: "+o+" is invalid using fallback "+r.css),r;this._ctx.fillRect(0,0,1,1);var i=this._ctx.getImageData(0,0,1,1).data;if(255!==i[3]){if(!t)return console.warn("Color: "+o+" is using transparency, but allowTransparency is false. Using fallback "+r.css+"."),r;var c=this._ctx.fillStyle.substring(5,this._ctx.fillStyle.length-1).split(",").map(function(S){return Number(S)}),l=c[0],p=c[1],g=c[2],y=Math.round(255*c[3]);return{rgba:h.channels.toRgba(l,p,g,y),css:o}}return{css:this._ctx.fillStyle,rgba:h.channels.toRgba(i[0],i[1],i[2],i[3])}},u}();a.ColorManager=s},9631:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.removeElementFromParent=void 0,a.removeElementFromParent=function(){for(var m,h=[],_=0;_<arguments.length;_++)h[_]=arguments[_];for(var d=0,f=h;d<f.length;d++){var e=f[d];null===(m=e?.parentElement)||void 0===m||m.removeChild(e)}}},3656:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.addDisposableDomListener=void 0,a.addDisposableDomListener=function(m,h,_,d){m.addEventListener(h,_,d);var f=!1;return{dispose:function(){f||(f=!0,m.removeEventListener(h,_,d))}}}},3551:function(F,a,m){var h=this&&this.__decorate||function(n,s,u,o){var r,t=arguments.length,i=t<3?s:null===o?o=Object.getOwnPropertyDescriptor(s,u):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(n,s,u,o);else for(var c=n.length-1;c>=0;c--)(r=n[c])&&(i=(t<3?r(i):t>3?r(s,u,i):r(s,u))||i);return t>3&&i&&Object.defineProperty(s,u,i),i},_=this&&this.__param||function(n,s){return function(u,o){s(u,o,n)}};Object.defineProperty(a,"__esModule",{value:!0}),a.MouseZone=a.Linkifier=void 0;var d=m(8460),f=m(2585),e=function(){function n(s,u,o){this._bufferService=s,this._logService=u,this._unicodeService=o,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onShowLinkUnderline=new d.EventEmitter,this._onHideLinkUnderline=new d.EventEmitter,this._onLinkTooltip=new d.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(n.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!1,configurable:!0}),n.prototype.attachToDom=function(s,u){this._element=s,this._mouseZoneManager=u},n.prototype.linkifyRows=function(s,u){var o=this;this._mouseZoneManager&&(void 0===this._rowsToLinkify.start||void 0===this._rowsToLinkify.end?(this._rowsToLinkify.start=s,this._rowsToLinkify.end=u):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,s),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,u)),this._mouseZoneManager.clearAll(s,u),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout(function(){return o._linkifyRows()},n._timeBeforeLatency))},n.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var s=this._bufferService.buffer;if(void 0!==this._rowsToLinkify.start&&void 0!==this._rowsToLinkify.end){var u=s.ydisp+this._rowsToLinkify.start;if(!(u>=s.lines.length)){for(var o=s.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,r=Math.ceil(2e3/this._bufferService.cols),t=this._bufferService.buffer.iterator(!1,u,o,r,r);t.hasNext();)for(var i=t.next(),c=0;c<this._linkMatchers.length;c++)this._doLinkifyRow(i.range.first,i.content,this._linkMatchers[c]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},n.prototype.registerLinkMatcher=function(s,u,o){if(void 0===o&&(o={}),!u)throw new Error("handler must be defined");var r={id:this._nextLinkMatcherId++,regex:s,handler:u,matchIndex:o.matchIndex,validationCallback:o.validationCallback,hoverTooltipCallback:o.tooltipCallback,hoverLeaveCallback:o.leaveCallback,willLinkActivate:o.willLinkActivate,priority:o.priority||0};return this._addLinkMatcherToList(r),r.id},n.prototype._addLinkMatcherToList=function(s){if(0!==this._linkMatchers.length){for(var u=this._linkMatchers.length-1;u>=0;u--)if(s.priority<=this._linkMatchers[u].priority)return void this._linkMatchers.splice(u+1,0,s);this._linkMatchers.splice(0,0,s)}else this._linkMatchers.push(s)},n.prototype.deregisterLinkMatcher=function(s){for(var u=0;u<this._linkMatchers.length;u++)if(this._linkMatchers[u].id===s)return this._linkMatchers.splice(u,1),!0;return!1},n.prototype._doLinkifyRow=function(s,u,o){for(var r,t=this,i=new RegExp(o.regex.source,(o.regex.flags||"")+"g"),c=-1,l=function(){var g=r["number"!=typeof o.matchIndex?0:o.matchIndex];if(!g)return p._logService.debug("match found without corresponding matchIndex",r,o),"break";if(c=u.indexOf(g,c+1),i.lastIndex=c+g.length,c<0)return"break";var w=p._bufferService.buffer.stringIndexToBufferIndex(s,c);if(w[0]<0)return"break";var y=p._bufferService.buffer.lines.get(w[0]);if(!y)return"break";var S=y.getFg(w[1]),C=S?S>>9&511:void 0;o.validationCallback?o.validationCallback(g,function(T){t._rowsTimeoutId||T&&t._addLink(w[1],w[0]-t._bufferService.buffer.ydisp,g,o,C)}):p._addLink(w[1],w[0]-p._bufferService.buffer.ydisp,g,o,C)},p=this;null!==(r=i.exec(u))&&"break"!==l(););},n.prototype._addLink=function(s,u,o,r,t){var i=this;if(this._mouseZoneManager&&this._element){var c=this._unicodeService.getStringCellWidth(o),l=s%this._bufferService.cols,p=u+Math.floor(s/this._bufferService.cols),g=(l+c)%this._bufferService.cols,w=p+Math.floor((l+c)/this._bufferService.cols);0===g&&(g=this._bufferService.cols,w--),this._mouseZoneManager.add(new v(l+1,p+1,g+1,w+1,function(y){if(r.handler)return r.handler(y,o);var S=window.open();S?(S.opener=null,S.location.href=o):console.warn("Opening link blocked as opener could not be cleared")},function(){i._onShowLinkUnderline.fire(i._createLinkHoverEvent(l,p,g,w,t)),i._element.classList.add("xterm-cursor-pointer")},function(y){i._onLinkTooltip.fire(i._createLinkHoverEvent(l,p,g,w,t)),r.hoverTooltipCallback&&r.hoverTooltipCallback(y,o,{start:{x:l,y:p},end:{x:g,y:w}})},function(){i._onHideLinkUnderline.fire(i._createLinkHoverEvent(l,p,g,w,t)),i._element.classList.remove("xterm-cursor-pointer"),r.hoverLeaveCallback&&r.hoverLeaveCallback()},function(y){return!r.willLinkActivate||r.willLinkActivate(y,o)}))}},n.prototype._createLinkHoverEvent=function(s,u,o,r,t){return{x1:s,y1:u,x2:o,y2:r,cols:this._bufferService.cols,fg:t}},n._timeBeforeLatency=200,n=h([_(0,f.IBufferService),_(1,f.ILogService),_(2,f.IUnicodeService)],n)}();a.Linkifier=e;var v=function(n,s,u,o,r,t,i,c,l){this.x1=n,this.y1=s,this.x2=u,this.y2=o,this.clickCallback=r,this.hoverCallback=t,this.tooltipCallback=i,this.leaveCallback=c,this.willLinkActivate=l};a.MouseZone=v},6465:function(F,a,m){var h,_=this&&this.__extends||(h=function(o,r){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(t[c]=i[c])})(o,r)},function(o,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function t(){this.constructor=o}h(o,r),o.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}),d=this&&this.__decorate||function(o,r,t,i){var c,l=arguments.length,p=l<3?r:null===i?i=Object.getOwnPropertyDescriptor(r,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)p=Reflect.decorate(o,r,t,i);else for(var g=o.length-1;g>=0;g--)(c=o[g])&&(p=(l<3?c(p):l>3?c(r,t,p):c(r,t))||p);return l>3&&p&&Object.defineProperty(r,t,p),p},f=this&&this.__param||function(o,r){return function(t,i){r(t,i,o)}};Object.defineProperty(a,"__esModule",{value:!0}),a.Linkifier2=void 0;var e=m(2585),v=m(8460),n=m(844),s=m(3656),u=function(o){function r(t){var i=o.call(this)||this;return i._bufferService=t,i._linkProviders=[],i._linkCacheDisposables=[],i._isMouseOut=!0,i._activeLine=-1,i._onShowLinkUnderline=i.register(new v.EventEmitter),i._onHideLinkUnderline=i.register(new v.EventEmitter),i.register(n.getDisposeArrayDisposable(i._linkCacheDisposables)),i}return _(r,o),Object.defineProperty(r.prototype,"currentLink",{get:function(){return this._currentLink},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),r.prototype.registerLinkProvider=function(t){var i=this;return this._linkProviders.push(t),{dispose:function(){var c=i._linkProviders.indexOf(t);-1!==c&&i._linkProviders.splice(c,1)}}},r.prototype.attachToDom=function(t,i,c){var l=this;this._element=t,this._mouseService=i,this._renderService=c,this.register(s.addDisposableDomListener(this._element,"mouseleave",function(){l._isMouseOut=!0,l._clearCurrentLink()})),this.register(s.addDisposableDomListener(this._element,"mousemove",this._onMouseMove.bind(this))),this.register(s.addDisposableDomListener(this._element,"click",this._onClick.bind(this)))},r.prototype._onMouseMove=function(t){if(this._lastMouseEvent=t,this._element&&this._mouseService){var i=this._positionFromMouseEvent(t,this._element,this._mouseService);if(i){this._isMouseOut=!1;for(var c=t.composedPath(),l=0;l<c.length;l++){var p=c[l];if(p.classList.contains("xterm"))break;if(p.classList.contains("xterm-hover"))return}this._lastBufferCell&&i.x===this._lastBufferCell.x&&i.y===this._lastBufferCell.y||(this._onHover(i),this._lastBufferCell=i)}}},r.prototype._onHover=function(t){if(this._activeLine!==t.y)return this._clearCurrentLink(),void this._askForLink(t,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,t)||(this._clearCurrentLink(),this._askForLink(t,!0))},r.prototype._askForLink=function(t,i){var c,l=this;this._activeProviderReplies&&i||(null===(c=this._activeProviderReplies)||void 0===c||c.forEach(function(g){g?.forEach(function(w){w.link.dispose&&w.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=t.y);var p=!1;this._linkProviders.forEach(function(g,w){var y;i?null!==(y=l._activeProviderReplies)&&void 0!==y&&y.get(w)&&(p=l._checkLinkProviderResult(w,t,p)):g.provideLinks(t.y,function(S){var C,T;if(!l._isMouseOut){var L=S?.map(function(M){return{link:M}});null===(C=l._activeProviderReplies)||void 0===C||C.set(w,L),p=l._checkLinkProviderResult(w,t,p),(null===(T=l._activeProviderReplies)||void 0===T?void 0:T.size)===l._linkProviders.length&&l._removeIntersectingLinks(t.y,l._activeProviderReplies)}})})},r.prototype._removeIntersectingLinks=function(t,i){for(var c=new Set,l=0;l<i.size;l++){var p=i.get(l);if(p)for(var g=0;g<p.length;g++)for(var w=p[g],S=w.link.range.end.y>t?this._bufferService.cols:w.link.range.end.x,C=w.link.range.start.y<t?0:w.link.range.start.x;C<=S;C++){if(c.has(C)){p.splice(g--,1);break}c.add(C)}}},r.prototype._checkLinkProviderResult=function(t,i,c){var l,p=this;if(!this._activeProviderReplies)return c;for(var g=this._activeProviderReplies.get(t),w=!1,y=0;y<t;y++)this._activeProviderReplies.has(y)&&!this._activeProviderReplies.get(y)||(w=!0);if(!w&&g){var S=g.find(function(T){return p._linkAtPosition(T.link,i)});S&&(c=!0,this._handleNewLink(S))}if(this._activeProviderReplies.size===this._linkProviders.length&&!c)for(y=0;y<this._activeProviderReplies.size;y++){var C=null===(l=this._activeProviderReplies.get(y))||void 0===l?void 0:l.find(function(T){return p._linkAtPosition(T.link,i)});if(C){c=!0,this._handleNewLink(C);break}}return c},r.prototype._onClick=function(t){if(this._element&&this._mouseService&&this._currentLink){var i=this._positionFromMouseEvent(t,this._element,this._mouseService);i&&this._linkAtPosition(this._currentLink.link,i)&&this._currentLink.link.activate(t,this._currentLink.link.text)}},r.prototype._clearCurrentLink=function(t,i){this._element&&this._currentLink&&this._lastMouseEvent&&(!t||!i||this._currentLink.link.range.start.y>=t&&this._currentLink.link.range.end.y<=i)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,n.disposeArray(this._linkCacheDisposables))},r.prototype._handleNewLink=function(t){var i=this;if(this._element&&this._lastMouseEvent&&this._mouseService){var c=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);c&&this._linkAtPosition(t.link,c)&&(this._currentLink=t,this._currentLink.state={decorations:{underline:void 0===t.link.decorations||t.link.decorations.underline,pointerCursor:void 0===t.link.decorations||t.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,t.link,this._lastMouseEvent),t.link.decorations={},Object.defineProperties(t.link.decorations,{pointerCursor:{get:function(){var l,p;return null===(p=null===(l=i._currentLink)||void 0===l?void 0:l.state)||void 0===p?void 0:p.decorations.pointerCursor},set:function(l){var p,g;(null===(p=i._currentLink)||void 0===p?void 0:p.state)&&i._currentLink.state.decorations.pointerCursor!==l&&(i._currentLink.state.decorations.pointerCursor=l,i._currentLink.state.isHovered&&(null===(g=i._element)||void 0===g||g.classList.toggle("xterm-cursor-pointer",l)))}},underline:{get:function(){var l,p;return null===(p=null===(l=i._currentLink)||void 0===l?void 0:l.state)||void 0===p?void 0:p.decorations.underline},set:function(l){var p,g,w;(null===(p=i._currentLink)||void 0===p?void 0:p.state)&&(null===(w=null===(g=i._currentLink)||void 0===g?void 0:g.state)||void 0===w?void 0:w.decorations.underline)!==l&&(i._currentLink.state.decorations.underline=l,i._currentLink.state.isHovered&&i._fireUnderlineEvent(t.link,l))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedBufferChange(function(l){i._clearCurrentLink(0===l.start?0:l.start+1+i._bufferService.buffer.ydisp,l.end+1+i._bufferService.buffer.ydisp)})))}},r.prototype._linkHover=function(t,i,c){var l;!(null===(l=this._currentLink)||void 0===l)&&l.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(i,!0),this._currentLink.state.decorations.pointerCursor&&t.classList.add("xterm-cursor-pointer")),i.hover&&i.hover(c,i.text)},r.prototype._fireUnderlineEvent=function(t,i){var c=t.range,l=this._bufferService.buffer.ydisp,p=this._createLinkUnderlineEvent(c.start.x-1,c.start.y-l-1,c.end.x,c.end.y-l-1,void 0);(i?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(p)},r.prototype._linkLeave=function(t,i,c){var l;!(null===(l=this._currentLink)||void 0===l)&&l.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(i,!1),this._currentLink.state.decorations.pointerCursor&&t.classList.remove("xterm-cursor-pointer")),i.leave&&i.leave(c,i.text)},r.prototype._linkAtPosition=function(t,i){var l=t.range.start.y<i.y,p=t.range.end.y>i.y;return(t.range.start.y===t.range.end.y&&t.range.start.x<=i.x&&t.range.end.x>=i.x||l&&t.range.end.x>=i.x||p&&t.range.start.x<=i.x||l&&p)&&t.range.start.y<=i.y&&t.range.end.y>=i.y},r.prototype._positionFromMouseEvent=function(t,i,c){var l=c.getCoords(t,i,this._bufferService.cols,this._bufferService.rows);if(l)return{x:l[0],y:l[1]+this._bufferService.buffer.ydisp}},r.prototype._createLinkUnderlineEvent=function(t,i,c,l,p){return{x1:t,y1:i,x2:c,y2:l,cols:this._bufferService.cols,fg:p}},d([f(0,e.IBufferService)],r)}(n.Disposable);a.Linkifier2=u},9042:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.tooMuchOutput=a.promptLabel=void 0,a.promptLabel="Terminal input",a.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},6954:function(F,a,m){var h,_=this&&this.__extends||(h=function(o,r){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(t[c]=i[c])})(o,r)},function(o,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function t(){this.constructor=o}h(o,r),o.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}),d=this&&this.__decorate||function(o,r,t,i){var c,l=arguments.length,p=l<3?r:null===i?i=Object.getOwnPropertyDescriptor(r,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)p=Reflect.decorate(o,r,t,i);else for(var g=o.length-1;g>=0;g--)(c=o[g])&&(p=(l<3?c(p):l>3?c(r,t,p):c(r,t))||p);return l>3&&p&&Object.defineProperty(r,t,p),p},f=this&&this.__param||function(o,r){return function(t,i){r(t,i,o)}};Object.defineProperty(a,"__esModule",{value:!0}),a.MouseZoneManager=void 0;var e=m(844),v=m(3656),n=m(4725),s=m(2585),u=function(o){function r(t,i,c,l,p,g){var w=o.call(this)||this;return w._element=t,w._screenElement=i,w._bufferService=c,w._mouseService=l,w._selectionService=p,w._optionsService=g,w._zones=[],w._areZonesActive=!1,w._lastHoverCoords=[void 0,void 0],w._initialSelectionLength=0,w.register(v.addDisposableDomListener(w._element,"mousedown",function(y){return w._onMouseDown(y)})),w._mouseMoveListener=function(y){return w._onMouseMove(y)},w._mouseLeaveListener=function(y){return w._onMouseLeave(y)},w._clickListener=function(y){return w._onClick(y)},w}return _(r,o),r.prototype.dispose=function(){o.prototype.dispose.call(this),this._deactivate()},r.prototype.add=function(t){this._zones.push(t),1===this._zones.length&&this._activate()},r.prototype.clearAll=function(t,i){if(0!==this._zones.length){t&&i||(t=0,i=this._bufferService.rows-1);for(var c=0;c<this._zones.length;c++){var l=this._zones[c];(l.y1>t&&l.y1<=i+1||l.y2>t&&l.y2<=i+1||l.y1<t&&l.y2>i+1)&&(this._currentZone&&this._currentZone===l&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(c--,1))}0===this._zones.length&&this._deactivate()}},r.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},r.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},r.prototype._onMouseMove=function(t){this._lastHoverCoords[0]===t.pageX&&this._lastHoverCoords[1]===t.pageY||(this._onHover(t),this._lastHoverCoords=[t.pageX,t.pageY])},r.prototype._onHover=function(t){var i=this,c=this._findZoneEventAt(t);c!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),c&&(this._currentZone=c,c.hoverCallback&&c.hoverCallback(t),this._tooltipTimeout=window.setTimeout(function(){return i._onTooltip(t)},this._optionsService.options.linkTooltipHoverDuration)))},r.prototype._onTooltip=function(t){this._tooltipTimeout=void 0,this._findZoneEventAt(t)?.tooltipCallback(t)},r.prototype._onMouseDown=function(t){this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive&&this._findZoneEventAt(t)?.willLinkActivate(t)&&(t.preventDefault(),t.stopImmediatePropagation())},r.prototype._onMouseLeave=function(t){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},r.prototype._onClick=function(t){var i=this._findZoneEventAt(t),c=this._getSelectionLength();i&&c===this._initialSelectionLength&&(i.clickCallback(t),t.preventDefault(),t.stopImmediatePropagation())},r.prototype._getSelectionLength=function(){var t=this._selectionService.selectionText;return t?t.length:0},r.prototype._findZoneEventAt=function(t){var i=this._mouseService.getCoords(t,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(i)for(var c=i[0],l=i[1],p=0;p<this._zones.length;p++){var g=this._zones[p];if(g.y1===g.y2){if(l===g.y1&&c>=g.x1&&c<g.x2)return g}else if(l===g.y1&&c>=g.x1||l===g.y2&&c<g.x2||l>g.y1&&l<g.y2)return g}},d([f(2,s.IBufferService),f(3,n.IMouseService),f(4,n.ISelectionService),f(5,s.IOptionsService)],r)}(e.Disposable);a.MouseZoneManager=u},6193:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.RenderDebouncer=void 0;var m=function(){function h(_){this._renderCallback=_}return h.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},h.prototype.refresh=function(_,d,f){var e=this;this._rowCount=f,_=void 0!==_?_:0,d=void 0!==d?d:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,_):_,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,d):d,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return e._innerRefresh()}))},h.prototype._innerRefresh=function(){if(void 0!==this._rowStart&&void 0!==this._rowEnd&&void 0!==this._rowCount){var _=Math.max(this._rowStart,0),d=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._animationFrame=void 0,this._renderCallback(_,d)}},h}();a.RenderDebouncer=m},5596:function(F,a,m){var h,_=this&&this.__extends||(h=function(f,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,n){v.__proto__=n}||function(v,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(v[s]=n[s])})(f,e)},function(f,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function v(){this.constructor=f}h(f,e),f.prototype=null===e?Object.create(e):(v.prototype=e.prototype,new v)});Object.defineProperty(a,"__esModule",{value:!0}),a.ScreenDprMonitor=void 0;var d=function(f){function e(){var v=null!==f&&f.apply(this,arguments)||this;return v._currentDevicePixelRatio=window.devicePixelRatio,v}return _(e,f),e.prototype.setListener=function(v){var n=this;this._listener&&this.clearListener(),this._listener=v,this._outerListener=function(){n._listener&&(n._listener(window.devicePixelRatio,n._currentDevicePixelRatio),n._updateDpr())},this._updateDpr()},e.prototype.dispose=function(){f.prototype.dispose.call(this),this.clearListener()},e.prototype._updateDpr=function(){var v;this._outerListener&&(null===(v=this._resolutionMediaMatchList)||void 0===v||v.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},e.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},e}(m(844).Disposable);a.ScreenDprMonitor=d},3236:function(F,a,m){var h,_=this&&this.__extends||(h=function($,x){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,B){R.__proto__=B}||function(R,B){for(var q in B)Object.prototype.hasOwnProperty.call(B,q)&&(R[q]=B[q])})($,x)},function($,x){if("function"!=typeof x&&null!==x)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function R(){this.constructor=$}h($,x),$.prototype=null===x?Object.create(x):(R.prototype=x.prototype,new R)});Object.defineProperty(a,"__esModule",{value:!0}),a.Terminal=void 0;var d=m(2950),f=m(1680),e=m(3614),v=m(2584),n=m(5435),s=m(3525),u=m(3551),o=m(9312),r=m(6114),t=m(3656),i=m(9042),c=m(357),l=m(6954),p=m(4567),g=m(1296),w=m(7399),y=m(8460),S=m(8437),C=m(5680),T=m(3230),L=m(4725),M=m(428),k=m(8934),E=m(6465),H=m(5114),D=m(8969),Z=m(4774),G=m(4269),N=typeof window<"u"?window.document:null,V=function($){function x(R){void 0===R&&(R={});var B=$.call(this,R)||this;return B.browser=r,B._keyDownHandled=!1,B._keyPressHandled=!1,B._unprocessedDeadKey=!1,B._onCursorMove=new y.EventEmitter,B._onKey=new y.EventEmitter,B._onRender=new y.EventEmitter,B._onSelectionChange=new y.EventEmitter,B._onTitleChange=new y.EventEmitter,B._onBell=new y.EventEmitter,B._onFocus=new y.EventEmitter,B._onBlur=new y.EventEmitter,B._onA11yCharEmitter=new y.EventEmitter,B._onA11yTabEmitter=new y.EventEmitter,B._setup(),B.linkifier=B._instantiationService.createInstance(u.Linkifier),B.linkifier2=B.register(B._instantiationService.createInstance(E.Linkifier2)),B.register(B._inputHandler.onRequestBell(function(){return B.bell()})),B.register(B._inputHandler.onRequestRefreshRows(function(q,I){return B.refresh(q,I)})),B.register(B._inputHandler.onRequestReset(function(){return B.reset()})),B.register(B._inputHandler.onRequestWindowsOptionsReport(function(q){return B._reportWindowsOptions(q)})),B.register(B._inputHandler.onAnsiColorChange(function(q){return B._changeAnsiColor(q)})),B.register(y.forwardEvent(B._inputHandler.onCursorMove,B._onCursorMove)),B.register(y.forwardEvent(B._inputHandler.onTitleChange,B._onTitleChange)),B.register(y.forwardEvent(B._inputHandler.onA11yChar,B._onA11yCharEmitter)),B.register(y.forwardEvent(B._inputHandler.onA11yTab,B._onA11yTabEmitter)),B.register(B._bufferService.onResize(function(q){return B._afterResize(q.cols,q.rows)})),B}return _(x,$),Object.defineProperty(x.prototype,"options",{get:function(){return this.optionsService.options},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onBell",{get:function(){return this._onBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onA11yChar",{get:function(){return this._onA11yCharEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onA11yTab",{get:function(){return this._onA11yTabEmitter.event},enumerable:!1,configurable:!0}),x.prototype._changeAnsiColor=function(R){var B,q;if(this._colorManager){for(var I=0,Q=R.colors;I<Q.length;I++){var X=Q[I],se=Z.rgba.toColor(X.red,X.green,X.blue);this._colorManager.colors.ansi[X.colorIndex]=se}null===(B=this._renderService)||void 0===B||B.setColors(this._colorManager.colors),null===(q=this.viewport)||void 0===q||q.onThemeChange(this._colorManager.colors)}},x.prototype.dispose=function(){var R,B,q;this._isDisposed||($.prototype.dispose.call(this),null===(R=this._renderService)||void 0===R||R.dispose(),this._customKeyEventHandler=void 0,this.write=function(){},null===(q=null===(B=this.element)||void 0===B?void 0:B.parentNode)||void 0===q||q.removeChild(this.element))},x.prototype._setup=function(){$.prototype._setup.call(this),this._customKeyEventHandler=void 0},Object.defineProperty(x.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),x.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},x.prototype._updateOptions=function(R){var B,q,I,Q;switch($.prototype._updateOptions.call(this,R),R){case"fontFamily":case"fontSize":null===(B=this._renderService)||void 0===B||B.clear(),null===(q=this._charSizeService)||void 0===q||q.measure();break;case"cursorBlink":case"cursorStyle":this.refresh(this.buffer.y,this.buffer.y);break;case"customGlyphs":case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":this._renderService&&(this._renderService.clear(),this._renderService.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case"rendererType":this._renderService&&(this._renderService.setRenderer(this._createRenderer()),this._renderService.onResize(this.cols,this.rows));break;case"scrollback":null===(I=this.viewport)||void 0===I||I.syncScrollArea();break;case"screenReaderMode":this.optionsService.options.screenReaderMode?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new p.AccessibilityManager(this,this._renderService)):(null===(Q=this._accessibilityManager)||void 0===Q||Q.dispose(),this._accessibilityManager=void 0);break;case"tabStopWidth":this.buffers.setupTabStops();break;case"theme":this._setTheme(this.optionsService.options.theme)}},x.prototype._onTextAreaFocus=function(R){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(v.C0.ESC+"[I"),this.updateCursorStyle(R),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()},x.prototype.blur=function(){var R;return null===(R=this.textarea)||void 0===R?void 0:R.blur()},x.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(v.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},x.prototype._syncTextArea=function(){if(this.textarea&&this.buffer.isCursorInViewport&&!this._compositionHelper.isComposing&&this._renderService){var B=this.buffer.lines.get(this.buffer.ybase+this.buffer.y);if(B){var q=Math.min(this.buffer.x,this.cols-1),I=this._renderService.dimensions.actualCellHeight,Q=B.getWidth(q),X=this._renderService.dimensions.actualCellWidth*Q,se=this.buffer.y*this._renderService.dimensions.actualCellHeight;this.textarea.style.left=q*this._renderService.dimensions.actualCellWidth+"px",this.textarea.style.top=se+"px",this.textarea.style.width=X+"px",this.textarea.style.height=I+"px",this.textarea.style.lineHeight=I+"px",this.textarea.style.zIndex="-5"}}},x.prototype._initGlobal=function(){var R=this;this._bindKeys(),this.register(t.addDisposableDomListener(this.element,"copy",function(q){R.hasSelection()&&e.copyHandler(q,R._selectionService)}));var B=function(q){return e.handlePasteEvent(q,R.textarea,R.coreService)};this.register(t.addDisposableDomListener(this.textarea,"paste",B)),this.register(t.addDisposableDomListener(this.element,"paste",B)),this.register(r.isFirefox?t.addDisposableDomListener(this.element,"mousedown",function(q){2===q.button&&e.rightClickHandler(q,R.textarea,R.screenElement,R._selectionService,R.options.rightClickSelectsWord)}):t.addDisposableDomListener(this.element,"contextmenu",function(q){e.rightClickHandler(q,R.textarea,R.screenElement,R._selectionService,R.options.rightClickSelectsWord)})),r.isLinux&&this.register(t.addDisposableDomListener(this.element,"auxclick",function(q){1===q.button&&e.moveTextAreaUnderMouseCursor(q,R.textarea,R.screenElement)}))},x.prototype._bindKeys=function(){var R=this;this.register(t.addDisposableDomListener(this.textarea,"keyup",function(B){return R._keyUp(B)},!0)),this.register(t.addDisposableDomListener(this.textarea,"keydown",function(B){return R._keyDown(B)},!0)),this.register(t.addDisposableDomListener(this.textarea,"keypress",function(B){return R._keyPress(B)},!0)),this.register(t.addDisposableDomListener(this.textarea,"compositionstart",function(){return R._compositionHelper.compositionstart()})),this.register(t.addDisposableDomListener(this.textarea,"compositionupdate",function(B){return R._compositionHelper.compositionupdate(B)})),this.register(t.addDisposableDomListener(this.textarea,"compositionend",function(){return R._compositionHelper.compositionend()})),this.register(t.addDisposableDomListener(this.textarea,"input",function(B){return R._inputEvent(B)},!0)),this.register(this.onRender(function(){return R._compositionHelper.updateCompositionElements()})),this.register(this.onRender(function(B){return R._queueLinkification(B.start,B.end)}))},x.prototype.open=function(R){var B=this;if(!R)throw new Error("Terminal requires a parent element.");R.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=R.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),R.appendChild(this.element);var q=N.createDocumentFragment();this._viewportElement=N.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),q.appendChild(this._viewportElement),this._viewportScrollArea=N.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=N.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=N.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),q.appendChild(this.screenElement),this.textarea=N.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",i.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register(t.addDisposableDomListener(this.textarea,"focus",function(X){return B._onTextAreaFocus(X)})),this.register(t.addDisposableDomListener(this.textarea,"blur",function(){return B._onTextAreaBlur()})),this._helperContainer.appendChild(this.textarea);var I=this._instantiationService.createInstance(H.CoreBrowserService,this.textarea);this._instantiationService.setService(L.ICoreBrowserService,I),this._charSizeService=this._instantiationService.createInstance(M.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(L.ICharSizeService,this._charSizeService),this._theme=this.options.theme||this._theme,this._colorManager=new C.ColorManager(N,this.options.allowTransparency),this.register(this.optionsService.onOptionChange(function(X){return B._colorManager.onOptionsChange(X)})),this._colorManager.setTheme(this._theme),this._characterJoinerService=this._instantiationService.createInstance(G.CharacterJoinerService),this._instantiationService.setService(L.ICharacterJoinerService,this._characterJoinerService);var Q=this._createRenderer();this._renderService=this.register(this._instantiationService.createInstance(T.RenderService,Q,this.rows,this.screenElement)),this._instantiationService.setService(L.IRenderService,this._renderService),this.register(this._renderService.onRenderedBufferChange(function(X){return B._onRender.fire(X)})),this.onResize(function(X){return B._renderService.resize(X.cols,X.rows)}),this._compositionView=N.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(d.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(q),this._soundService=this._instantiationService.createInstance(c.SoundService),this._instantiationService.setService(L.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(k.MouseService),this._instantiationService.setService(L.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(f.Viewport,function(X){return B.scrollLines(X,!0,1)},this._viewportElement,this._viewportScrollArea),this.viewport.onThemeChange(this._colorManager.colors),this.register(this._inputHandler.onRequestSyncScrollBar(function(){return B.viewport.syncScrollArea()})),this.register(this.viewport),this.register(this.onCursorMove(function(){B._renderService.onCursorMove(),B._syncTextArea()})),this.register(this.onResize(function(){return B._renderService.onResize(B.cols,B.rows)})),this.register(this.onBlur(function(){return B._renderService.onBlur()})),this.register(this.onFocus(function(){return B._renderService.onFocus()})),this.register(this._renderService.onDimensionsChange(function(){return B.viewport.syncScrollArea()})),this._selectionService=this.register(this._instantiationService.createInstance(o.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(L.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(function(X){return B.scrollLines(X.amount,X.suppressScrollEvent)})),this.register(this._selectionService.onSelectionChange(function(){return B._onSelectionChange.fire()})),this.register(this._selectionService.onRequestRedraw(function(X){return B._renderService.onSelectionChanged(X.start,X.end,X.columnSelectMode)})),this.register(this._selectionService.onLinuxMouseSelection(function(X){B.textarea.value=X,B.textarea.focus(),B.textarea.select()})),this.register(this._onScroll.event(function(X){B.viewport.syncScrollArea(),B._selectionService.refresh()})),this.register(t.addDisposableDomListener(this._viewportElement,"scroll",function(){return B._selectionService.refresh()})),this._mouseZoneManager=this._instantiationService.createInstance(l.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll(function(){return B._mouseZoneManager.clearAll()})),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.linkifier2.attachToDom(this.element,this._mouseService,this._renderService),this.register(t.addDisposableDomListener(this.element,"mousedown",function(X){return B._selectionService.onMouseDown(X)})),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new p.AccessibilityManager(this,this._renderService)),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},x.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(s.Renderer,this._colorManager.colors,this.screenElement,this.linkifier,this.linkifier2);case"dom":return this._instantiationService.createInstance(g.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier,this.linkifier2);default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},x.prototype._setTheme=function(R){var B,q,I;this._theme=R,null===(B=this._colorManager)||void 0===B||B.setTheme(R),null===(q=this._renderService)||void 0===q||q.setColors(this._colorManager.colors),null===(I=this.viewport)||void 0===I||I.onThemeChange(this._colorManager.colors)},x.prototype.bindMouse=function(){var R=this,B=this,q=this.element;function I(K){var re,fe,ge=B._mouseService.getRawByteCoords(K,B.screenElement,B.cols,B.rows);if(!ge)return!1;switch(K.overrideType||K.type){case"mousemove":fe=32,void 0===K.buttons?(re=3,void 0!==K.button&&(re=K.button<3?K.button:3)):re=1&K.buttons?0:4&K.buttons?1:2&K.buttons?2:3;break;case"mouseup":fe=0,re=K.button<3?K.button:3;break;case"mousedown":fe=1,re=K.button<3?K.button:3;break;case"wheel":0!==K.deltaY&&(fe=K.deltaY<0?0:1),re=4;break;default:return!1}return!(void 0===fe||void 0===re||re>4)&&B.coreMouseService.triggerMouseEvent({col:ge.x-33,row:ge.y-33,button:re,action:fe,ctrl:K.ctrlKey,alt:K.altKey,shift:K.shiftKey})}var Q={mouseup:null,wheel:null,mousedrag:null,mousemove:null},X=function(K){return I(K),K.buttons||(R._document.removeEventListener("mouseup",Q.mouseup),Q.mousedrag&&R._document.removeEventListener("mousemove",Q.mousedrag)),R.cancel(K)},se=function(K){return I(K),K.preventDefault(),R.cancel(K)},he=function(K){K.buttons&&I(K)},ue=function(K){K.buttons||I(K)};this.register(this.coreMouseService.onProtocolChange(function(K){K?("debug"===R.optionsService.options.logLevel&&R._logService.debug("Binding to mouse events:",R.coreMouseService.explainEvents(K)),R.element.classList.add("enable-mouse-events"),R._selectionService.disable()):(R._logService.debug("Unbinding from mouse events."),R.element.classList.remove("enable-mouse-events"),R._selectionService.enable()),8&K?Q.mousemove||(q.addEventListener("mousemove",ue),Q.mousemove=ue):(q.removeEventListener("mousemove",Q.mousemove),Q.mousemove=null),16&K?Q.wheel||(q.addEventListener("wheel",se,{passive:!1}),Q.wheel=se):(q.removeEventListener("wheel",Q.wheel),Q.wheel=null),2&K?Q.mouseup||(Q.mouseup=X):(R._document.removeEventListener("mouseup",Q.mouseup),Q.mouseup=null),4&K?Q.mousedrag||(Q.mousedrag=he):(R._document.removeEventListener("mousemove",Q.mousedrag),Q.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register(t.addDisposableDomListener(q,"mousedown",function(K){if(K.preventDefault(),R.focus(),R.coreMouseService.areMouseEventsActive&&!R._selectionService.shouldForceSelection(K))return I(K),Q.mouseup&&R._document.addEventListener("mouseup",Q.mouseup),Q.mousedrag&&R._document.addEventListener("mousemove",Q.mousedrag),R.cancel(K)})),this.register(t.addDisposableDomListener(q,"wheel",function(K){if(!Q.wheel&&!R.buffer.hasScrollback){var re=R.viewport.getLinesScrolled(K);if(0===re)return;for(var fe=v.C0.ESC+(R.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(K.deltaY<0?"A":"B"),ge="",Ae=0;Ae<Math.abs(re);Ae++)ge+=fe;R.coreService.triggerDataEvent(ge,!0)}},{passive:!0})),this.register(t.addDisposableDomListener(q,"wheel",function(K){if(!Q.wheel)return R.viewport.onWheel(K)?void 0:R.cancel(K)},{passive:!1})),this.register(t.addDisposableDomListener(q,"touchstart",function(K){if(!R.coreMouseService.areMouseEventsActive)return R.viewport.onTouchStart(K),R.cancel(K)},{passive:!0})),this.register(t.addDisposableDomListener(q,"touchmove",function(K){if(!R.coreMouseService.areMouseEventsActive)return R.viewport.onTouchMove(K)?void 0:R.cancel(K)},{passive:!1}))},x.prototype.refresh=function(R,B){var q;null===(q=this._renderService)||void 0===q||q.refreshRows(R,B)},x.prototype._queueLinkification=function(R,B){var q;null===(q=this.linkifier)||void 0===q||q.linkifyRows(R,B)},x.prototype.updateCursorStyle=function(R){var B;null!==(B=this._selectionService)&&void 0!==B&&B.shouldColumnSelect(R)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},x.prototype._showCursor=function(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},x.prototype.scrollLines=function(R,B,q){void 0===q&&(q=0),$.prototype.scrollLines.call(this,R,B,q),this.refresh(0,this.rows-1)},x.prototype.paste=function(R){e.paste(R,this.textarea,this.coreService)},x.prototype.attachCustomKeyEventHandler=function(R){this._customKeyEventHandler=R},x.prototype.registerLinkMatcher=function(R,B,q){var I=this.linkifier.registerLinkMatcher(R,B,q);return this.refresh(0,this.rows-1),I},x.prototype.deregisterLinkMatcher=function(R){this.linkifier.deregisterLinkMatcher(R)&&this.refresh(0,this.rows-1)},x.prototype.registerLinkProvider=function(R){return this.linkifier2.registerLinkProvider(R)},x.prototype.registerCharacterJoiner=function(R){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");var B=this._characterJoinerService.register(R);return this.refresh(0,this.rows-1),B},x.prototype.deregisterCharacterJoiner=function(R){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(R)&&this.refresh(0,this.rows-1)},Object.defineProperty(x.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!1,configurable:!0}),x.prototype.addMarker=function(R){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+R)},x.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},x.prototype.select=function(R,B,q){this._selectionService.setSelection(R,B,q)},x.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},x.prototype.getSelectionPosition=function(){if(this._selectionService&&this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},x.prototype.clearSelection=function(){var R;null===(R=this._selectionService)||void 0===R||R.clearSelection()},x.prototype.selectAll=function(){var R;null===(R=this._selectionService)||void 0===R||R.selectAll()},x.prototype.selectLines=function(R,B){var q;null===(q=this._selectionService)||void 0===q||q.selectLines(R,B)},x.prototype._keyDown=function(R){if(this._keyDownHandled=!1,this._customKeyEventHandler&&!1===this._customKeyEventHandler(R))return!1;if(!this._compositionHelper.keydown(R))return this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;"Dead"!==R.key&&"AltGraph"!==R.key||(this._unprocessedDeadKey=!0);var B=w.evaluateKeyboardEvent(R,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(R),3===B.type||2===B.type){var q=this.rows-1;return this.scrollLines(2===B.type?-q:q),this.cancel(R,!0)}return 1===B.type&&this.selectAll(),!!this._isThirdLevelShift(this.browser,R)||(B.cancel&&this.cancel(R,!0),!B.key||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(B.key!==v.C0.ETX&&B.key!==v.C0.CR||(this.textarea.value=""),this._onKey.fire({key:B.key,domEvent:R}),this._showCursor(),this.coreService.triggerDataEvent(B.key,!0),this.optionsService.options.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(R,!0))))},x.prototype._isThirdLevelShift=function(R,B){var q=R.isMac&&!this.options.macOptionIsMeta&&B.altKey&&!B.ctrlKey&&!B.metaKey||R.isWindows&&B.altKey&&B.ctrlKey&&!B.metaKey||R.isWindows&&B.getModifierState("AltGraph");return"keypress"===B.type?q:q&&(!B.keyCode||B.keyCode>47)},x.prototype._keyUp=function(R){var B;this._customKeyEventHandler&&!1===this._customKeyEventHandler(R)||(16===(B=R).keyCode||17===B.keyCode||18===B.keyCode||this.focus(),this.updateCursorStyle(R),this._keyPressHandled=!1)},x.prototype._keyPress=function(R){var B;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&!1===this._customKeyEventHandler(R))return!1;if(this.cancel(R),R.charCode)B=R.charCode;else if(null==R.which)B=R.keyCode;else{if(0===R.which||0===R.charCode)return!1;B=R.which}return!(!B||(R.altKey||R.ctrlKey||R.metaKey)&&!this._isThirdLevelShift(this.browser,R)||(B=String.fromCharCode(B),this._onKey.fire({key:B,domEvent:R}),this._showCursor(),this.coreService.triggerDataEvent(B,!0),this._keyPressHandled=!0,0))},x.prototype._inputEvent=function(R){return!(!R.data||"insertText"!==R.inputType||this.optionsService.options.screenReaderMode||this._keyPressHandled||(this.coreService.triggerDataEvent(R.data,!0),this.cancel(R),0))},x.prototype.bell=function(){var R;this._soundBell()&&(null===(R=this._soundService)||void 0===R||R.playBellSound()),this._onBell.fire()},x.prototype.resize=function(R,B){R!==this.cols||B!==this.rows?$.prototype.resize.call(this,R,B):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()},x.prototype._afterResize=function(R,B){var q,I;null===(q=this._charSizeService)||void 0===q||q.measure(),null===(I=this.viewport)||void 0===I||I.syncScrollArea(!0)},x.prototype.clear=function(){if(0!==this.buffer.ybase||0!==this.buffer.y){this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var R=1;R<this.rows;R++)this.buffer.lines.push(this.buffer.getBlankLine(S.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}},x.prototype.reset=function(){var R,B;this.options.rows=this.rows,this.options.cols=this.cols;var q=this._customKeyEventHandler;this._setup(),$.prototype.reset.call(this),null===(R=this._selectionService)||void 0===R||R.reset(),this._customKeyEventHandler=q,this.refresh(0,this.rows-1),null===(B=this.viewport)||void 0===B||B.syncScrollArea()},x.prototype._reportWindowsOptions=function(R){if(this._renderService)switch(R){case n.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:var B=this._renderService.dimensions.scaledCanvasWidth.toFixed(0),q=this._renderService.dimensions.scaledCanvasHeight.toFixed(0);this.coreService.triggerDataEvent(v.C0.ESC+"[4;"+q+";"+B+"t");break;case n.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:var I=this._renderService.dimensions.scaledCellWidth.toFixed(0),Q=this._renderService.dimensions.scaledCellHeight.toFixed(0);this.coreService.triggerDataEvent(v.C0.ESC+"[6;"+Q+";"+I+"t")}},x.prototype.cancel=function(R,B){if(this.options.cancelEvents||B)return R.preventDefault(),R.stopPropagation(),!1},x.prototype._visualBell=function(){return!1},x.prototype._soundBell=function(){return"sound"===this.options.bellStyle},x}(D.CoreTerminal);a.Terminal=V},9924:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TimeBasedDebouncer=void 0;var m=function(){function h(_,d){void 0===d&&(d=1e3),this._renderCallback=_,this._debounceThresholdMS=d,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}return h.prototype.dispose=function(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)},h.prototype.refresh=function(_,d,f){var e=this;this._rowCount=f,_=void 0!==_?_:0,d=void 0!==d?d:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,_):_,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,d):d;var v=Date.now();if(v-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=v,this._innerRefresh();else if(!this._additionalRefreshRequested){var s=this._debounceThresholdMS-(v-this._lastRefreshMs);this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(function(){e._lastRefreshMs=Date.now(),e._innerRefresh(),e._additionalRefreshRequested=!1,e._refreshTimeoutID=void 0},s)}},h.prototype._innerRefresh=function(){if(void 0!==this._rowStart&&void 0!==this._rowEnd&&void 0!==this._rowCount){var _=Math.max(this._rowStart,0),d=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(_,d)}},h}();a.TimeBasedDebouncer=m},1680:function(F,a,m){var h,_=this&&this.__extends||(h=function(o,r){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(t[c]=i[c])})(o,r)},function(o,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function t(){this.constructor=o}h(o,r),o.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}),d=this&&this.__decorate||function(o,r,t,i){var c,l=arguments.length,p=l<3?r:null===i?i=Object.getOwnPropertyDescriptor(r,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)p=Reflect.decorate(o,r,t,i);else for(var g=o.length-1;g>=0;g--)(c=o[g])&&(p=(l<3?c(p):l>3?c(r,t,p):c(r,t))||p);return l>3&&p&&Object.defineProperty(r,t,p),p},f=this&&this.__param||function(o,r){return function(t,i){r(t,i,o)}};Object.defineProperty(a,"__esModule",{value:!0}),a.Viewport=void 0;var e=m(844),v=m(3656),n=m(4725),s=m(2585),u=function(o){function r(t,i,c,l,p,g,w){var y=o.call(this)||this;return y._scrollLines=t,y._viewportElement=i,y._scrollArea=c,y._bufferService=l,y._optionsService=p,y._charSizeService=g,y._renderService=w,y.scrollBarWidth=0,y._currentRowHeight=0,y._currentScaledCellHeight=0,y._lastRecordedBufferLength=0,y._lastRecordedViewportHeight=0,y._lastRecordedBufferHeight=0,y._lastTouchY=0,y._lastScrollTop=0,y._lastHadScrollBar=!1,y._wheelPartialScroll=0,y._refreshAnimationFrame=null,y._ignoreNextScrollEvent=!1,y.scrollBarWidth=y._viewportElement.offsetWidth-y._scrollArea.offsetWidth||15,y._lastHadScrollBar=!0,y.register(v.addDisposableDomListener(y._viewportElement,"scroll",y._onScroll.bind(y))),y._activeBuffer=y._bufferService.buffer,y.register(y._bufferService.buffers.onBufferActivate(function(S){return y._activeBuffer=S.activeBuffer})),y._renderDimensions=y._renderService.dimensions,y.register(y._renderService.onDimensionsChange(function(S){return y._renderDimensions=S})),setTimeout(function(){return y.syncScrollArea()},0),y}return _(r,o),r.prototype.onThemeChange=function(t){this._viewportElement.style.backgroundColor=t.background.css},r.prototype._refresh=function(t){var i=this;if(t)return this._innerRefresh(),void(null!==this._refreshAnimationFrame&&cancelAnimationFrame(this._refreshAnimationFrame));null===this._refreshAnimationFrame&&(this._refreshAnimationFrame=requestAnimationFrame(function(){return i._innerRefresh()}))},r.prototype._innerRefresh=function(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._currentScaledCellHeight=this._renderService.dimensions.scaledCellHeight,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var t=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==t&&(this._lastRecordedBufferHeight=t,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var i=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==i&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=i),this.scrollBarWidth=0===this._optionsService.options.scrollback?0:this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this._lastHadScrollBar=this.scrollBarWidth>0,this._viewportElement.style.width=(this._renderService.dimensions.actualCellWidth*this._bufferService.cols+this.scrollBarWidth).toString()+"px",this._refreshAnimationFrame=null},r.prototype.syncScrollArea=function(t){if(void 0===t&&(t=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(t);this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.scaledCellHeight===this._currentScaledCellHeight?this._lastHadScrollBar!==this._optionsService.options.scrollback>0&&this._refresh(t):this._refresh(t)},r.prototype._onScroll=function(t){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent){if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);var i=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(i)}},r.prototype._bubbleScroll=function(t,i){return!(i<0&&0!==this._viewportElement.scrollTop||i>0&&this._viewportElement.scrollTop+this._lastRecordedViewportHeight<this._lastRecordedBufferHeight)||(t.cancelable&&t.preventDefault(),!1)},r.prototype.onWheel=function(t){var i=this._getPixelsScrolled(t);return 0!==i&&(this._viewportElement.scrollTop+=i,this._bubbleScroll(t,i))},r.prototype._getPixelsScrolled=function(t){if(0===t.deltaY)return 0;var i=this._applyScrollModifier(t.deltaY,t);return t.deltaMode===WheelEvent.DOM_DELTA_LINE?i*=this._currentRowHeight:t.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this._currentRowHeight*this._bufferService.rows),i},r.prototype.getLinesScrolled=function(t){if(0===t.deltaY)return 0;var i=this._applyScrollModifier(t.deltaY,t);return t.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(this._wheelPartialScroll+=i/=this._currentRowHeight+0,i=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):t.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this._bufferService.rows),i},r.prototype._applyScrollModifier=function(t,i){var c=this._optionsService.options.fastScrollModifier;return"alt"===c&&i.altKey||"ctrl"===c&&i.ctrlKey||"shift"===c&&i.shiftKey?t*this._optionsService.options.fastScrollSensitivity*this._optionsService.options.scrollSensitivity:t*this._optionsService.options.scrollSensitivity},r.prototype.onTouchStart=function(t){this._lastTouchY=t.touches[0].pageY},r.prototype.onTouchMove=function(t){var i=this._lastTouchY-t.touches[0].pageY;return this._lastTouchY=t.touches[0].pageY,0!==i&&(this._viewportElement.scrollTop+=i,this._bubbleScroll(t,i))},d([f(3,s.IBufferService),f(4,s.IOptionsService),f(5,n.ICharSizeService),f(6,n.IRenderService)],r)}(e.Disposable);a.Viewport=u},2950:function(F,a,m){var h=this&&this.__decorate||function(v,n,s,u){var o,r=arguments.length,t=r<3?n:null===u?u=Object.getOwnPropertyDescriptor(n,s):u;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)t=Reflect.decorate(v,n,s,u);else for(var i=v.length-1;i>=0;i--)(o=v[i])&&(t=(r<3?o(t):r>3?o(n,s,t):o(n,s))||t);return r>3&&t&&Object.defineProperty(n,s,t),t},_=this&&this.__param||function(v,n){return function(s,u){n(s,u,v)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CompositionHelper=void 0;var d=m(4725),f=m(2585),e=function(){function v(n,s,u,o,r,t){this._textarea=n,this._compositionView=s,this._bufferService=u,this._optionsService=o,this._coreService=r,this._renderService=t,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}return Object.defineProperty(v.prototype,"isComposing",{get:function(){return this._isComposing},enumerable:!1,configurable:!0}),v.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")},v.prototype.compositionupdate=function(n){var s=this;this._compositionView.textContent=n.data,this.updateCompositionElements(),setTimeout(function(){s._compositionPosition.end=s._textarea.value.length},0)},v.prototype.compositionend=function(){this._finalizeComposition(!0)},v.prototype.keydown=function(n){if(this._isComposing||this._isSendingComposition){if(229===n.keyCode||16===n.keyCode||17===n.keyCode||18===n.keyCode)return!1;this._finalizeComposition(!1)}return 229!==n.keyCode||(this._handleAnyTextareaChanges(),!1)},v.prototype._finalizeComposition=function(n){var s=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,n){var u={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(function(){var r;s._isSendingComposition&&(s._isSendingComposition=!1,u.start+=s._dataAlreadySent.length,(r=s._isComposing?s._textarea.value.substring(u.start,u.end):s._textarea.value.substring(u.start)).length>0&&s._coreService.triggerDataEvent(r,!0))},0)}else{this._isSendingComposition=!1;var o=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(o,!0)}},v.prototype._handleAnyTextareaChanges=function(){var n=this,s=this._textarea.value;setTimeout(function(){if(!n._isComposing){var u=n._textarea.value.replace(s,"");u.length>0&&(n._dataAlreadySent=u,n._coreService.triggerDataEvent(u,!0))}},0)},v.prototype.updateCompositionElements=function(n){var s=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var u=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),o=this._renderService.dimensions.actualCellHeight,r=this._bufferService.buffer.y*this._renderService.dimensions.actualCellHeight,t=u*this._renderService.dimensions.actualCellWidth;this._compositionView.style.left=t+"px",this._compositionView.style.top=r+"px",this._compositionView.style.height=o+"px",this._compositionView.style.lineHeight=o+"px",this._compositionView.style.fontFamily=this._optionsService.options.fontFamily,this._compositionView.style.fontSize=this._optionsService.options.fontSize+"px";var i=this._compositionView.getBoundingClientRect();this._textarea.style.left=t+"px",this._textarea.style.top=r+"px",this._textarea.style.width=Math.max(i.width,1)+"px",this._textarea.style.height=Math.max(i.height,1)+"px",this._textarea.style.lineHeight=i.height+"px"}n||setTimeout(function(){return s.updateCompositionElements(!0)},0)}},h([_(2,f.IBufferService),_(3,f.IOptionsService),_(4,f.ICoreService),_(5,d.IRenderService)],v)}();a.CompositionHelper=e},9806:(F,a)=>{function m(h,_){var d=_.getBoundingClientRect();return[h.clientX-d.left,h.clientY-d.top]}Object.defineProperty(a,"__esModule",{value:!0}),a.getRawByteCoords=a.getCoords=a.getCoordsRelativeToElement=void 0,a.getCoordsRelativeToElement=m,a.getCoords=function(h,_,d,f,e,v,n,s){if(e){var u=m(h,_);if(u)return u[0]=Math.ceil((u[0]+(s?v/2:0))/v),u[1]=Math.ceil(u[1]/n),u[0]=Math.min(Math.max(u[0],1),d+(s?1:0)),u[1]=Math.min(Math.max(u[1],1),f),u}},a.getRawByteCoords=function(h){if(h)return{x:h[0]+32,y:h[1]+32}}},9504:(F,a,m)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.moveToCellSequence=void 0;var h=m(2584);function _(s,u,o,r){var t=s-d(o,s),i=u-d(o,u);return n(Math.abs(t-i)-function(c,l,p){for(var g=0,w=c-d(p,c),y=l-d(p,l),S=0;S<Math.abs(w-y);S++){var C="A"===f(c,l)?-1:1,T=p.buffer.lines.get(w+C*S);T&&T.isWrapped&&g++}return g}(s,u,o),v(f(s,u),r))}function d(s,u){for(var o=0,r=s.buffer.lines.get(u),t=r&&r.isWrapped;t&&u>=0&&u<s.rows;)o++,t=(r=s.buffer.lines.get(--u))&&r.isWrapped;return o}function f(s,u){return s>u?"A":"B"}function e(s,u,o,r,t,i){for(var c=s,l=u,p="";c!==o||l!==r;)c+=t?1:-1,t&&c>i.cols-1?(p+=i.buffer.translateBufferLineToString(l,!1,s,c),c=0,s=0,l++):!t&&c<0&&(p+=i.buffer.translateBufferLineToString(l,!1,0,s+1),s=c=i.cols-1,l--);return p+i.buffer.translateBufferLineToString(l,!1,s,c)}function v(s,u){return h.C0.ESC+(u?"O":"[")+s}function n(s,u){s=Math.floor(s);for(var o="",r=0;r<s;r++)o+=u;return o}a.moveToCellSequence=function(s,u,o,r){var t,p,g,S,C,i=o.buffer.x,c=o.buffer.y;if(!o.buffer.hasScrollback)return p=i,(0===_(g=c,u,S=o,C=r).length?"":n(e(p,g,p,g-d(S,g),!1,S).length,v("D",C)))+_(c,u,o,r)+function(p,g,w,y,S,C){var T;T=_(g,y,S,C).length>0?y-d(S,y):g;var k,E,H,D,Z,N,L=y,M=(k=p,E=g,N=_(H=w,D=y,Z=S,C).length>0?D-d(Z,D):E,k<H&&N<=D||k>=H&&N<D?"C":"D");return n(e(p,T,w,L,"C"===M,S).length,v(M,C))}(i,c,s,u,o,r);if(c===u)return t=i>s?"D":"C",n(Math.abs(i-s),v(t,r));t=c>u?"D":"C";var l=Math.abs(c-u);return n(function(p,g){return g.cols-p}(c>u?s:i,o)+(l-1)*o.cols+1+((c>u?i:s)-1),v(t,r))}},1546:(F,a,m)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BaseRenderLayer=void 0;var h=m(643),_=m(8803),d=m(1420),f=m(3734),e=m(1752),v=m(4774),n=m(9631),s=m(8978),u=function(){function o(r,t,i,c,l,p,g,w){this._container=r,this._alpha=c,this._colors=l,this._rendererId=p,this._bufferService=g,this._optionsService=w,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+t+"-layer"),this._canvas.style.zIndex=i.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return o.prototype.dispose=function(){var r;n.removeElementFromParent(this._canvas),null===(r=this._charAtlas)||void 0===r||r.dispose()},o.prototype._initCanvas=function(){this._ctx=e.throwIfFalsy(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},o.prototype.onOptionsChanged=function(){},o.prototype.onBlur=function(){},o.prototype.onFocus=function(){},o.prototype.onCursorMove=function(){},o.prototype.onGridChanged=function(r,t){},o.prototype.onSelectionChanged=function(r,t,i){void 0===i&&(i=!1)},o.prototype.setColors=function(r){this._refreshCharAtlas(r)},o.prototype._setTransparency=function(r){if(r!==this._alpha){var t=this._canvas;this._alpha=r,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,t),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},o.prototype._refreshCharAtlas=function(r){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=d.acquireCharAtlas(this._optionsService.options,this._rendererId,r,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},o.prototype.resize=function(r){this._scaledCellWidth=r.scaledCellWidth,this._scaledCellHeight=r.scaledCellHeight,this._scaledCharWidth=r.scaledCharWidth,this._scaledCharHeight=r.scaledCharHeight,this._scaledCharLeft=r.scaledCharLeft,this._scaledCharTop=r.scaledCharTop,this._canvas.width=r.scaledCanvasWidth,this._canvas.height=r.scaledCanvasHeight,this._canvas.style.width=r.canvasWidth+"px",this._canvas.style.height=r.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},o.prototype._fillCells=function(r,t,i,c){this._ctx.fillRect(r*this._scaledCellWidth,t*this._scaledCellHeight,i*this._scaledCellWidth,c*this._scaledCellHeight)},o.prototype._fillMiddleLineAtCells=function(r,t,i){void 0===i&&(i=1);var c=Math.ceil(.5*this._scaledCellHeight);this._ctx.fillRect(r*this._scaledCellWidth,(t+1)*this._scaledCellHeight-c-window.devicePixelRatio,i*this._scaledCellWidth,window.devicePixelRatio)},o.prototype._fillBottomLineAtCells=function(r,t,i){void 0===i&&(i=1),this._ctx.fillRect(r*this._scaledCellWidth,(t+1)*this._scaledCellHeight-window.devicePixelRatio-1,i*this._scaledCellWidth,window.devicePixelRatio)},o.prototype._fillLeftLineAtCell=function(r,t,i){this._ctx.fillRect(r*this._scaledCellWidth,t*this._scaledCellHeight,window.devicePixelRatio*i,this._scaledCellHeight)},o.prototype._strokeRectAtCell=function(r,t,i,c){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(r*this._scaledCellWidth+window.devicePixelRatio/2,t*this._scaledCellHeight+window.devicePixelRatio/2,i*this._scaledCellWidth-window.devicePixelRatio,c*this._scaledCellHeight-window.devicePixelRatio)},o.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},o.prototype._clearCells=function(r,t,i,c){this._alpha?this._ctx.clearRect(r*this._scaledCellWidth,t*this._scaledCellHeight,i*this._scaledCellWidth,c*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(r*this._scaledCellWidth,t*this._scaledCellHeight,i*this._scaledCellWidth,c*this._scaledCellHeight))},o.prototype._fillCharTrueColor=function(r,t,i){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline="ideographic",this._clipRow(i);var c=!1;!1!==this._optionsService.options.customGlyphs&&(c=s.tryDrawCustomChar(this._ctx,r.getChars(),t*this._scaledCellWidth,i*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),c||this._ctx.fillText(r.getChars(),t*this._scaledCellWidth+this._scaledCharLeft,i*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight)},o.prototype._drawChars=function(r,t,i){var c,l,p=this._getContrastColor(r);p||r.isFgRGB()||r.isBgRGB()?this._drawUncachedChars(r,t,i,p):(r.isInverse()?(c=r.isBgDefault()?_.INVERTED_DEFAULT_COLOR:r.getBgColor(),l=r.isFgDefault()?_.INVERTED_DEFAULT_COLOR:r.getFgColor()):(l=r.isBgDefault()?h.DEFAULT_COLOR:r.getBgColor(),c=r.isFgDefault()?h.DEFAULT_COLOR:r.getFgColor()),c+=this._optionsService.options.drawBoldTextInBrightColors&&r.isBold()&&c<8?8:0,this._currentGlyphIdentifier.chars=r.getChars()||h.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=r.getCode()||h.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=l,this._currentGlyphIdentifier.fg=c,this._currentGlyphIdentifier.bold=!!r.isBold(),this._currentGlyphIdentifier.dim=!!r.isDim(),this._currentGlyphIdentifier.italic=!!r.isItalic(),this._charAtlas&&this._charAtlas.draw(this._ctx,this._currentGlyphIdentifier,t*this._scaledCellWidth+this._scaledCharLeft,i*this._scaledCellHeight+this._scaledCharTop)||this._drawUncachedChars(r,t,i))},o.prototype._drawUncachedChars=function(r,t,i,c){if(this._ctx.save(),this._ctx.font=this._getFont(!!r.isBold(),!!r.isItalic()),this._ctx.textBaseline="ideographic",r.isInverse())if(c)this._ctx.fillStyle=c.css;else if(r.isBgDefault())this._ctx.fillStyle=v.color.opaque(this._colors.background).css;else if(r.isBgRGB())this._ctx.fillStyle="rgb("+f.AttributeData.toColorRGB(r.getBgColor()).join(",")+")";else{var l=r.getBgColor();this._optionsService.options.drawBoldTextInBrightColors&&r.isBold()&&l<8&&(l+=8),this._ctx.fillStyle=this._colors.ansi[l].css}else if(c)this._ctx.fillStyle=c.css;else if(r.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(r.isFgRGB())this._ctx.fillStyle="rgb("+f.AttributeData.toColorRGB(r.getFgColor()).join(",")+")";else{var p=r.getFgColor();this._optionsService.options.drawBoldTextInBrightColors&&r.isBold()&&p<8&&(p+=8),this._ctx.fillStyle=this._colors.ansi[p].css}this._clipRow(i),r.isDim()&&(this._ctx.globalAlpha=_.DIM_OPACITY);var g=!1;!1!==this._optionsService.options.customGlyphs&&(g=s.tryDrawCustomChar(this._ctx,r.getChars(),t*this._scaledCellWidth,i*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),g||this._ctx.fillText(r.getChars(),t*this._scaledCellWidth+this._scaledCharLeft,i*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight),this._ctx.restore()},o.prototype._clipRow=function(r){this._ctx.beginPath(),this._ctx.rect(0,r*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},o.prototype._getFont=function(r,t){return(t?"italic":"")+" "+(r?this._optionsService.options.fontWeightBold:this._optionsService.options.fontWeight)+" "+this._optionsService.options.fontSize*window.devicePixelRatio+"px "+this._optionsService.options.fontFamily},o.prototype._getContrastColor=function(r){if(1!==this._optionsService.options.minimumContrastRatio){var t=this._colors.contrastCache.getColor(r.bg,r.fg);if(void 0!==t)return t||void 0;var i=r.getFgColor(),c=r.getFgColorMode(),l=r.getBgColor(),p=r.getBgColorMode(),g=!!r.isInverse(),w=!!r.isInverse();if(g){var y=i;i=l,l=y;var S=c;c=p,p=S}var C=this._resolveBackgroundRgba(p,l,g),T=this._resolveForegroundRgba(c,i,g,w),L=v.rgba.ensureContrastRatio(C,T,this._optionsService.options.minimumContrastRatio);if(L){var M={css:v.channels.toCss(L>>24&255,L>>16&255,L>>8&255),rgba:L};return this._colors.contrastCache.setColor(r.bg,r.fg,M),M}this._colors.contrastCache.setColor(r.bg,r.fg,null)}},o.prototype._resolveBackgroundRgba=function(r,t,i){switch(r){case 16777216:case 33554432:return this._colors.ansi[t].rgba;case 50331648:return t<<8;default:return i?this._colors.foreground.rgba:this._colors.background.rgba}},o.prototype._resolveForegroundRgba=function(r,t,i,c){switch(r){case 16777216:case 33554432:return this._optionsService.options.drawBoldTextInBrightColors&&c&&t<8&&(t+=8),this._colors.ansi[t].rgba;case 50331648:return t<<8;default:return i?this._colors.background.rgba:this._colors.foreground.rgba}},o}();a.BaseRenderLayer=u},2512:function(F,a,m){var h,_=this&&this.__extends||(h=function(t,i){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(c[p]=l[p])})(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function c(){this.constructor=t}h(t,i),t.prototype=null===i?Object.create(i):(c.prototype=i.prototype,new c)}),d=this&&this.__decorate||function(t,i,c,l){var p,g=arguments.length,w=g<3?i:null===l?l=Object.getOwnPropertyDescriptor(i,c):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)w=Reflect.decorate(t,i,c,l);else for(var y=t.length-1;y>=0;y--)(p=t[y])&&(w=(g<3?p(w):g>3?p(i,c,w):p(i,c))||w);return g>3&&w&&Object.defineProperty(i,c,w),w},f=this&&this.__param||function(t,i){return function(c,l){i(c,l,t)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CursorRenderLayer=void 0;var e=m(1546),v=m(511),n=m(2585),s=m(4725),u=600,o=function(t){function i(c,l,p,g,w,y,S,C,T){var L=t.call(this,c,"cursor",l,!0,p,g,y,S)||this;return L._onRequestRedraw=w,L._coreService=C,L._coreBrowserService=T,L._cell=new v.CellData,L._state={x:0,y:0,isFocused:!1,style:"",width:0},L._cursorRenderers={bar:L._renderBarCursor.bind(L),block:L._renderBlockCursor.bind(L),underline:L._renderUnderlineCursor.bind(L)},L}return _(i,t),i.prototype.dispose=function(){this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0),t.prototype.dispose.call(this)},i.prototype.resize=function(c){t.prototype.resize.call(this,c),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},i.prototype.reset=function(){this._clearCursor(),this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0,this.onOptionsChanged())},i.prototype.onBlur=function(){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},i.prototype.onFocus=function(){this._cursorBlinkStateManager?this._cursorBlinkStateManager.resume():this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},i.prototype.onOptionsChanged=function(){var c,l=this;this._optionsService.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new r(this._coreBrowserService.isFocused,function(){l._render(!0)})):(null===(c=this._cursorBlinkStateManager)||void 0===c||c.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},i.prototype.onCursorMove=function(){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.restartBlinkAnimation()},i.prototype.onGridChanged=function(c,l){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},i.prototype._render=function(c){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var l=this._bufferService.buffer.ybase+this._bufferService.buffer.y,p=l-this._bufferService.buffer.ydisp;if(p<0||p>=this._bufferService.rows)this._clearCursor();else{var g=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(l).loadCell(g,this._cell),void 0!==this._cell.content){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var w=this._optionsService.options.cursorStyle;return w&&"block"!==w?this._cursorRenderers[w](g,p,this._cell):this._renderBlurCursor(g,p,this._cell),this._ctx.restore(),this._state.x=g,this._state.y=p,this._state.isFocused=!1,this._state.style=w,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===g&&this._state.y===p&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.options.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.options.cursorStyle||"block"](g,p,this._cell),this._ctx.restore(),this._state.x=g,this._state.y=p,this._state.isFocused=!1,this._state.style=this._optionsService.options.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()},i.prototype._clearCursor=function(){this._state&&(window.devicePixelRatio<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},i.prototype._renderBarCursor=function(c,l,p){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(c,l,this._optionsService.options.cursorWidth),this._ctx.restore()},i.prototype._renderBlockCursor=function(c,l,p){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(c,l,p.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(p,c,l),this._ctx.restore()},i.prototype._renderUnderlineCursor=function(c,l,p){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(c,l),this._ctx.restore()},i.prototype._renderBlurCursor=function(c,l,p){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(c,l,p.getWidth(),1),this._ctx.restore()},d([f(5,n.IBufferService),f(6,n.IOptionsService),f(7,n.ICoreService),f(8,s.ICoreBrowserService)],i)}(e.BaseRenderLayer);a.CursorRenderLayer=o;var r=function(){function t(i,c){this._renderCallback=c,this.isCursorVisible=!0,i&&this._restartInterval()}return Object.defineProperty(t.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},t.prototype.restartBlinkAnimation=function(){var i=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){i._renderCallback(),i._animationFrame=void 0})))},t.prototype._restartInterval=function(i){var c=this;void 0===i&&(i=u),this._blinkInterval&&window.clearInterval(this._blinkInterval),this._blinkStartTimeout=window.setTimeout(function(){if(c._animationTimeRestarted){var l=u-(Date.now()-c._animationTimeRestarted);if(c._animationTimeRestarted=void 0,l>0)return void c._restartInterval(l)}c.isCursorVisible=!1,c._animationFrame=window.requestAnimationFrame(function(){c._renderCallback(),c._animationFrame=void 0}),c._blinkInterval=window.setInterval(function(){if(c._animationTimeRestarted){var p=u-(Date.now()-c._animationTimeRestarted);return c._animationTimeRestarted=void 0,void c._restartInterval(p)}c.isCursorVisible=!c.isCursorVisible,c._animationFrame=window.requestAnimationFrame(function(){c._renderCallback(),c._animationFrame=void 0})},u)},i)},t.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},t.prototype.resume=function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},t}()},8978:(F,a,m)=>{var h,_,d,f,e,v,n,s,u,o,r,t,i,c,l,p,g,w,y,S,C,T,L,M,k,E,H,D,Z,G,N,V,$,x,R,B,q,I,Q,X,se,he,ue,K,re,fe,ge,Ae,Mt,Tt,At,Ot,Rt,Bt,Ze,Dt,de,Pt,It,Ht,Ft,jt,ze,Je,Ge,Be,Ke,Ye,Ve,Qe,Xe,$e,et,tt,it,rt,nt,ot,st,at,ct,lt,ht,De,ie,ut,ft,dt,_t,ae,Pe,pt,vt,me,Oe,Ie,gt,mt,yt,He,bt,Ut,Wt,Ct,St,wt,O,P,b,A,j,Y,te,_e,ne,be,Se,Lt,Fe,Kt,ke,qt,Vt,Qt,Xt,$t,ei,ti;Object.defineProperty(a,"__esModule",{value:!0}),a.tryDrawCustomChar=a.boxDrawingDefinitions=a.blockElementDefinitions=void 0;var ni=m(1752);a.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258a":[{x:0,y:0,w:6,h:8}],"\u258b":[{x:0,y:0,w:5,h:8}],"\u258c":[{x:0,y:0,w:4,h:8}],"\u258d":[{x:0,y:0,w:3,h:8}],"\u258e":[{x:0,y:0,w:2,h:8}],"\u258f":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:9,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259a":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259b":[{x:0,y:0,w:4,h:8},{x:0,y:0,w:4,h:8}],"\u259c":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259d":[{x:4,y:0,w:4,h:4}],"\u259e":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259f":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1fb70}":[{x:1,y:0,w:1,h:8}],"\u{1fb71}":[{x:2,y:0,w:1,h:8}],"\u{1fb72}":[{x:3,y:0,w:1,h:8}],"\u{1fb73}":[{x:4,y:0,w:1,h:8}],"\u{1fb74}":[{x:5,y:0,w:1,h:8}],"\u{1fb75}":[{x:6,y:0,w:1,h:8}],"\u{1fb76}":[{x:0,y:1,w:8,h:1}],"\u{1fb77}":[{x:0,y:2,w:8,h:1}],"\u{1fb78}":[{x:0,y:3,w:8,h:1}],"\u{1fb79}":[{x:0,y:4,w:8,h:1}],"\u{1fb7a}":[{x:0,y:5,w:8,h:1}],"\u{1fb7b}":[{x:0,y:6,w:8,h:1}],"\u{1fb7c}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1fb7d}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1fb7e}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1fb7f}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1fb80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1fb81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1fb82}":[{x:0,y:0,w:8,h:2}],"\u{1fb83}":[{x:0,y:0,w:8,h:3}],"\u{1fb84}":[{x:0,y:0,w:8,h:5}],"\u{1fb85}":[{x:0,y:0,w:8,h:6}],"\u{1fb86}":[{x:0,y:0,w:8,h:7}],"\u{1fb87}":[{x:6,y:0,w:2,h:8}],"\u{1fb88}":[{x:5,y:0,w:3,h:8}],"\u{1fb89}":[{x:3,y:0,w:5,h:8}],"\u{1fb8a}":[{x:2,y:0,w:6,h:8}],"\u{1fb8b}":[{x:1,y:0,w:7,h:8}],"\u{1fb95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1fb96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1fb97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};var ai={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};a.boxDrawingDefinitions={"\u2500":(h={},h[1]="M0,.5 L1,.5",h),"\u2501":(_={},_[3]="M0,.5 L1,.5",_),"\u2502":(d={},d[1]="M.5,0 L.5,1",d),"\u2503":(f={},f[3]="M.5,0 L.5,1",f),"\u250c":(e={},e[1]="M0.5,1 L.5,.5 L1,.5",e),"\u250f":(v={},v[3]="M0.5,1 L.5,.5 L1,.5",v),"\u2510":(n={},n[1]="M0,.5 L.5,.5 L.5,1",n),"\u2513":(s={},s[3]="M0,.5 L.5,.5 L.5,1",s),"\u2514":(u={},u[1]="M.5,0 L.5,.5 L1,.5",u),"\u2517":(o={},o[3]="M.5,0 L.5,.5 L1,.5",o),"\u2518":(r={},r[1]="M.5,0 L.5,.5 L0,.5",r),"\u251b":(t={},t[3]="M.5,0 L.5,.5 L0,.5",t),"\u251c":(i={},i[1]="M.5,0 L.5,1 M.5,.5 L1,.5",i),"\u2523":(c={},c[3]="M.5,0 L.5,1 M.5,.5 L1,.5",c),"\u2524":(l={},l[1]="M.5,0 L.5,1 M.5,.5 L0,.5",l),"\u252b":(p={},p[3]="M.5,0 L.5,1 M.5,.5 L0,.5",p),"\u252c":(g={},g[1]="M0,.5 L1,.5 M.5,.5 L.5,1",g),"\u2533":(w={},w[3]="M0,.5 L1,.5 M.5,.5 L.5,1",w),"\u2534":(y={},y[1]="M0,.5 L1,.5 M.5,.5 L.5,0",y),"\u253b":(S={},S[3]="M0,.5 L1,.5 M.5,.5 L.5,0",S),"\u253c":(C={},C[1]="M0,.5 L1,.5 M.5,0 L.5,1",C),"\u254b":(T={},T[3]="M0,.5 L1,.5 M.5,0 L.5,1",T),"\u2574":(L={},L[1]="M.5,.5 L0,.5",L),"\u2578":(M={},M[3]="M.5,.5 L0,.5",M),"\u2575":(k={},k[1]="M.5,.5 L.5,0",k),"\u2579":(E={},E[3]="M.5,.5 L.5,0",E),"\u2576":(H={},H[1]="M.5,.5 L1,.5",H),"\u257a":(D={},D[3]="M.5,.5 L1,.5",D),"\u2577":(Z={},Z[1]="M.5,.5 L.5,1",Z),"\u257b":(G={},G[3]="M.5,.5 L.5,1",G),"\u2550":(N={},N[1]=function(W,U){return"M0,"+(.5-U)+" L1,"+(.5-U)+" M0,"+(.5+U)+" L1,"+(.5+U)},N),"\u2551":(V={},V[1]=function(W,U){return"M"+(.5-W)+",0 L"+(.5-W)+",1 M"+(.5+W)+",0 L"+(.5+W)+",1"},V),"\u2552":($={},$[1]=function(W,U){return"M.5,1 L.5,"+(.5-U)+" L1,"+(.5-U)+" M.5,"+(.5+U)+" L1,"+(.5+U)},$),"\u2553":(x={},x[1]=function(W,U){return"M"+(.5-W)+",1 L"+(.5-W)+",.5 L1,.5 M"+(.5+W)+",.5 L"+(.5+W)+",1"},x),"\u2554":(R={},R[1]=function(W,U){return"M1,"+(.5-U)+" L"+(.5-W)+","+(.5-U)+" L"+(.5-W)+",1 M1,"+(.5+U)+" L"+(.5+W)+","+(.5+U)+" L"+(.5+W)+",1"},R),"\u2555":(B={},B[1]=function(W,U){return"M0,"+(.5-U)+" L.5,"+(.5-U)+" L.5,1 M0,"+(.5+U)+" L.5,"+(.5+U)},B),"\u2556":(q={},q[1]=function(W,U){return"M"+(.5+W)+",1 L"+(.5+W)+",.5 L0,.5 M"+(.5-W)+",.5 L"+(.5-W)+",1"},q),"\u2557":(I={},I[1]=function(W,U){return"M0,"+(.5+U)+" L"+(.5-W)+","+(.5+U)+" L"+(.5-W)+",1 M0,"+(.5-U)+" L"+(.5+W)+","+(.5-U)+" L"+(.5+W)+",1"},I),"\u2558":(Q={},Q[1]=function(W,U){return"M.5,0 L.5,"+(.5+U)+" L1,"+(.5+U)+" M.5,"+(.5-U)+" L1,"+(.5-U)},Q),"\u2559":(X={},X[1]=function(W,U){return"M1,.5 L"+(.5-W)+",.5 L"+(.5-W)+",0 M"+(.5+W)+",.5 L"+(.5+W)+",0"},X),"\u255a":(se={},se[1]=function(W,U){return"M1,"+(.5-U)+" L"+(.5+W)+","+(.5-U)+" L"+(.5+W)+",0 M1,"+(.5+U)+" L"+(.5-W)+","+(.5+U)+" L"+(.5-W)+",0"},se),"\u255b":(he={},he[1]=function(W,U){return"M0,"+(.5+U)+" L.5,"+(.5+U)+" L.5,0 M0,"+(.5-U)+" L.5,"+(.5-U)},he),"\u255c":(ue={},ue[1]=function(W,U){return"M0,.5 L"+(.5+W)+",.5 L"+(.5+W)+",0 M"+(.5-W)+",.5 L"+(.5-W)+",0"},ue),"\u255d":(K={},K[1]=function(W,U){return"M0,"+(.5-U)+" L"+(.5-W)+","+(.5-U)+" L"+(.5-W)+",0 M0,"+(.5+U)+" L"+(.5+W)+","+(.5+U)+" L"+(.5+W)+",0"},K),"\u255e":(re={},re[1]=function(W,U){return"M.5,0 L.5,1 M.5,"+(.5-U)+" L1,"+(.5-U)+" M.5,"+(.5+U)+" L1,"+(.5+U)},re),"\u255f":(fe={},fe[1]=function(W,U){return"M"+(.5-W)+",0 L"+(.5-W)+",1 M"+(.5+W)+",0 L"+(.5+W)+",1 M"+(.5+W)+",.5 L1,.5"},fe),"\u2560":(ge={},ge[1]=function(W,U){return"M"+(.5-W)+",0 L"+(.5-W)+",1 M1,"+(.5+U)+" L"+(.5+W)+","+(.5+U)+" L"+(.5+W)+",1 M1,"+(.5-U)+" L"+(.5+W)+","+(.5-U)+" L"+(.5+W)+",0"},ge),"\u2561":(Ae={},Ae[1]=function(W,U){return"M.5,0 L.5,1 M0,"+(.5-U)+" L.5,"+(.5-U)+" M0,"+(.5+U)+" L.5,"+(.5+U)},Ae),"\u2562":(Mt={},Mt[1]=function(W,U){return"M0,.5 L"+(.5-W)+",.5 M"+(.5-W)+",0 L"+(.5-W)+",1 M"+(.5+W)+",0 L"+(.5+W)+",1"},Mt),"\u2563":(Tt={},Tt[1]=function(W,U){return"M"+(.5+W)+",0 L"+(.5+W)+",1 M0,"+(.5+U)+" L"+(.5-W)+","+(.5+U)+" L"+(.5-W)+",1 M0,"+(.5-U)+" L"+(.5-W)+","+(.5-U)+" L"+(.5-W)+",0"},Tt),"\u2564":(At={},At[1]=function(W,U){return"M0,"+(.5-U)+" L1,"+(.5-U)+" M0,"+(.5+U)+" L1,"+(.5+U)+" M.5,"+(.5+U)+" L.5,1"},At),"\u2565":(Ot={},Ot[1]=function(W,U){return"M0,.5 L1,.5 M"+(.5-W)+",.5 L"+(.5-W)+",1 M"+(.5+W)+",.5 L"+(.5+W)+",1"},Ot),"\u2566":(Rt={},Rt[1]=function(W,U){return"M0,"+(.5-U)+" L1,"+(.5-U)+" M0,"+(.5+U)+" L"+(.5-W)+","+(.5+U)+" L"+(.5-W)+",1 M1,"+(.5+U)+" L"+(.5+W)+","+(.5+U)+" L"+(.5+W)+",1"},Rt),"\u2567":(Bt={},Bt[1]=function(W,U){return"M.5,0 L.5,"+(.5-U)+" M0,"+(.5-U)+" L1,"+(.5-U)+" M0,"+(.5+U)+" L1,"+(.5+U)},Bt),"\u2568":(Ze={},Ze[1]=function(W,U){return"M0,.5 L1,.5 M"+(.5-W)+",.5 L"+(.5-W)+",0 M"+(.5+W)+",.5 L"+(.5+W)+",0"},Ze),"\u2569":(Dt={},Dt[1]=function(W,U){return"M0,"+(.5+U)+" L1,"+(.5+U)+" M0,"+(.5-U)+" L"+(.5-W)+","+(.5-U)+" L"+(.5-W)+",0 M1,"+(.5-U)+" L"+(.5+W)+","+(.5-U)+" L"+(.5+W)+",0"},Dt),"\u256a":(de={},de[1]=function(W,U){return"M.5,0 L.5,1 M0,"+(.5-U)+" L1,"+(.5-U)+" M0,"+(.5+U)+" L1,"+(.5+U)},de),"\u256b":(Pt={},Pt[1]=function(W,U){return"M0,.5 L1,.5 M"+(.5-W)+",0 L"+(.5-W)+",1 M"+(.5+W)+",0 L"+(.5+W)+",1"},Pt),"\u256c":(It={},It[1]=function(W,U){return"M0,"+(.5+U)+" L"+(.5-W)+","+(.5+U)+" L"+(.5-W)+",1 M1,"+(.5+U)+" L"+(.5+W)+","+(.5+U)+" L"+(.5+W)+",1 M0,"+(.5-U)+" L"+(.5-W)+","+(.5-U)+" L"+(.5-W)+",0 M1,"+(.5-U)+" L"+(.5+W)+","+(.5-U)+" L"+(.5+W)+",0"},It),"\u2571":(Ht={},Ht[1]="M1,0 L0,1",Ht),"\u2572":(Ft={},Ft[1]="M0,0 L1,1",Ft),"\u2573":(jt={},jt[1]="M1,0 L0,1 M0,0 L1,1",jt),"\u257c":(ze={},ze[1]="M.5,.5 L0,.5",ze[3]="M.5,.5 L1,.5",ze),"\u257d":(Je={},Je[1]="M.5,.5 L.5,0",Je[3]="M.5,.5 L.5,1",Je),"\u257e":(Ge={},Ge[1]="M.5,.5 L1,.5",Ge[3]="M.5,.5 L0,.5",Ge),"\u257f":(Be={},Be[1]="M.5,.5 L.5,1",Be[3]="M.5,.5 L.5,0",Be),"\u250d":(Ke={},Ke[1]="M.5,.5 L.5,1",Ke[3]="M.5,.5 L1,.5",Ke),"\u250e":(Ye={},Ye[1]="M.5,.5 L1,.5",Ye[3]="M.5,.5 L.5,1",Ye),"\u2511":(Ve={},Ve[1]="M.5,.5 L.5,1",Ve[3]="M.5,.5 L0,.5",Ve),"\u2512":(Qe={},Qe[1]="M.5,.5 L0,.5",Qe[3]="M.5,.5 L.5,1",Qe),"\u2515":(Xe={},Xe[1]="M.5,.5 L.5,0",Xe[3]="M.5,.5 L1,.5",Xe),"\u2516":($e={},$e[1]="M.5,.5 L1,.5",$e[3]="M.5,.5 L.5,0",$e),"\u2519":(et={},et[1]="M.5,.5 L.5,0",et[3]="M.5,.5 L0,.5",et),"\u251a":(tt={},tt[1]="M.5,.5 L0,.5",tt[3]="M.5,.5 L.5,0",tt),"\u251d":(it={},it[1]="M.5,0 L.5,1",it[3]="M.5,.5 L1,.5",it),"\u251e":(rt={},rt[1]="M0.5,1 L.5,.5 L1,.5",rt[3]="M.5,.5 L.5,0",rt),"\u251f":(nt={},nt[1]="M.5,0 L.5,.5 L1,.5",nt[3]="M.5,.5 L.5,1",nt),"\u2520":(ot={},ot[1]="M.5,.5 L1,.5",ot[3]="M.5,0 L.5,1",ot),"\u2521":(st={},st[1]="M.5,.5 L.5,1",st[3]="M.5,0 L.5,.5 L1,.5",st),"\u2522":(at={},at[1]="M.5,.5 L.5,0",at[3]="M0.5,1 L.5,.5 L1,.5",at),"\u2525":(ct={},ct[1]="M.5,0 L.5,1",ct[3]="M.5,.5 L0,.5",ct),"\u2526":(lt={},lt[1]="M0,.5 L.5,.5 L.5,1",lt[3]="M.5,.5 L.5,0",lt),"\u2527":(ht={},ht[1]="M.5,0 L.5,.5 L0,.5",ht[3]="M.5,.5 L.5,1",ht),"\u2528":(De={},De[1]="M.5,.5 L0,.5",De[3]="M.5,0 L.5,1",De),"\u2529":(ie={},ie[1]="M.5,.5 L.5,1",ie[3]="M.5,0 L.5,.5 L0,.5",ie),"\u252a":(ut={},ut[1]="M.5,.5 L.5,0",ut[3]="M0,.5 L.5,.5 L.5,1",ut),"\u252d":(ft={},ft[1]="M0.5,1 L.5,.5 L1,.5",ft[3]="M.5,.5 L0,.5",ft),"\u252e":(dt={},dt[1]="M0,.5 L.5,.5 L.5,1",dt[3]="M.5,.5 L1,.5",dt),"\u252f":(_t={},_t[1]="M.5,.5 L.5,1",_t[3]="M0,.5 L1,.5",_t),"\u2530":(ae={},ae[1]="M0,.5 L1,.5",ae[3]="M.5,.5 L.5,1",ae),"\u2531":(Pe={},Pe[1]="M.5,.5 L1,.5",Pe[3]="M0,.5 L.5,.5 L.5,1",Pe),"\u2532":(pt={},pt[1]="M.5,.5 L0,.5",pt[3]="M0.5,1 L.5,.5 L1,.5",pt),"\u2535":(vt={},vt[1]="M.5,0 L.5,.5 L1,.5",vt[3]="M.5,.5 L0,.5",vt),"\u2536":(me={},me[1]="M.5,0 L.5,.5 L0,.5",me[3]="M.5,.5 L1,.5",me),"\u2537":(Oe={},Oe[1]="M.5,.5 L.5,0",Oe[3]="M0,.5 L1,.5",Oe),"\u2538":(Ie={},Ie[1]="M0,.5 L1,.5",Ie[3]="M.5,.5 L.5,0",Ie),"\u2539":(gt={},gt[1]="M.5,.5 L1,.5",gt[3]="M.5,0 L.5,.5 L0,.5",gt),"\u253a":(mt={},mt[1]="M.5,.5 L0,.5",mt[3]="M.5,0 L.5,.5 L1,.5",mt),"\u253d":(yt={},yt[1]="M.5,0 L.5,1 M.5,.5 L1,.5",yt[3]="M.5,.5 L0,.5",yt),"\u253e":(He={},He[1]="M.5,0 L.5,1 M.5,.5 L0,.5",He[3]="M.5,.5 L1,.5",He),"\u253f":(bt={},bt[1]="M.5,0 L.5,1",bt[3]="M0,.5 L1,.5",bt),"\u2540":(Ut={},Ut[1]="M0,.5 L1,.5 M.5,.5 L.5,1",Ut[3]="M.5,.5 L.5,0",Ut),"\u2541":(Wt={},Wt[1]="M.5,.5 L.5,0 M0,.5 L1,.5",Wt[3]="M.5,.5 L.5,1",Wt),"\u2542":(Ct={},Ct[1]="M0,.5 L1,.5",Ct[3]="M.5,0 L.5,1",Ct),"\u2543":(St={},St[1]="M0.5,1 L.5,.5 L1,.5",St[3]="M.5,0 L.5,.5 L0,.5",St),"\u2544":(wt={},wt[1]="M0,.5 L.5,.5 L.5,1",wt[3]="M.5,0 L.5,.5 L1,.5",wt),"\u2545":(O={},O[1]="M.5,0 L.5,.5 L1,.5",O[3]="M0,.5 L.5,.5 L.5,1",O),"\u2546":(P={},P[1]="M.5,0 L.5,.5 L0,.5",P[3]="M0.5,1 L.5,.5 L1,.5",P),"\u2547":(b={},b[1]="M.5,.5 L.5,1",b[3]="M.5,.5 L.5,0 M0,.5 L1,.5",b),"\u2548":(A={},A[1]="M.5,.5 L.5,0",A[3]="M0,.5 L1,.5 M.5,.5 L.5,1",A),"\u2549":(j={},j[1]="M.5,.5 L1,.5",j[3]="M.5,0 L.5,1 M.5,.5 L0,.5",j),"\u254a":(Y={},Y[1]="M.5,.5 L0,.5",Y[3]="M.5,0 L.5,1 M.5,.5 L1,.5",Y),"\u254c":(te={},te[1]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",te),"\u254d":(_e={},_e[3]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",_e),"\u2504":(ne={},ne[1]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",ne),"\u2505":(be={},be[3]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",be),"\u2508":(Se={},Se[1]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",Se),"\u2509":(Lt={},Lt[3]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",Lt),"\u254e":(Fe={},Fe[1]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",Fe),"\u254f":(Kt={},Kt[3]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",Kt),"\u2506":(ke={},ke[1]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",ke),"\u2507":(qt={},qt[3]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",qt),"\u250a":(Vt={},Vt[1]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",Vt),"\u250b":(Qt={},Qt[3]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",Qt),"\u256d":(Xt={},Xt[1]="C.5,1,.5,.5,1,.5",Xt),"\u256e":($t={},$t[1]="C.5,1,.5,.5,0,.5",$t),"\u256f":(ei={},ei[1]="C.5,0,.5,.5,0,.5",ei),"\u2570":(ti={},ti[1]="C.5,0,.5,.5,1,.5",ti)},a.tryDrawCustomChar=function(W,U,we,Nt,Zt,ce){var Le=a.blockElementDefinitions[U];if(Le)return function(pe,Ee,Jt,Gt,xt,Et){for(var ye=0;ye<Ee.length;ye++){var ve=Ee[ye],oe=xt/8,Me=Et/8;pe.fillRect(Jt+ve.x*oe,Gt+ve.y*Me,ve.w*oe,ve.h*Me)}}(W,Le,we,Nt,Zt,ce),!0;var xe=ai[U];if(xe)return function(pe,Ee,Jt,Gt,xt,Et){var ye,ve=oi.get(Ee);ve||oi.set(Ee,ve=new Map);var oe=pe.fillStyle;if("string"!=typeof oe)throw new Error('Unexpected fillStyle type "'+oe+'"');var Me=ve.get(oe);if(!Me){var Ce=Ee[0].length,je=Ee.length,Ue=document.createElement("canvas");Ue.width=Ce,Ue.height=je;var Yt=ni.throwIfFalsy(Ue.getContext("2d")),Re=new ImageData(Ce,je),kt=void 0,We=void 0,ii=void 0,ri=void 0;if(oe.startsWith("#"))kt=parseInt(oe.substr(1,2),16),We=parseInt(oe.substr(3,2),16),ii=parseInt(oe.substr(5,2),16),ri=oe.length>7&&parseInt(oe.substr(7,2),16)||1;else{if(!oe.startsWith("rgba"))throw new Error('Unexpected fillStyle color format "'+oe+'" when drawing pattern glyph');kt=(ye=oe.substring(5,oe.length-1).split(",").map(function(hi){return parseFloat(hi)}))[0],We=ye[1],ii=ye[2],ri=ye[3]}for(var qe=0;qe<je;qe++)for(var Ne=0;Ne<Ce;Ne++)Re.data[4*(qe*Ce+Ne)]=kt,Re.data[4*(qe*Ce+Ne)+1]=We,Re.data[4*(qe*Ce+Ne)+2]=ii,Re.data[4*(qe*Ce+Ne)+3]=Ee[qe][Ne]*(255*ri);Yt.putImageData(Re,0,0),Me=ni.throwIfFalsy(pe.createPattern(Ue,null)),ve.set(oe,Me)}pe.fillStyle=Me,pe.fillRect(Jt,Gt,xt,Et)}(W,xe,we,Nt,Zt,ce),!0;var zt=a.boxDrawingDefinitions[U];return!!zt&&(function(pe,Ee,Jt,Gt,xt,Et){pe.strokeStyle=pe.fillStyle;for(var ye=0,ve=Object.entries(Ee);ye<ve.length;ye++){var oe=ve[ye],Me=oe[0],Ce=oe[1];pe.beginPath(),pe.lineWidth=window.devicePixelRatio*Number.parseInt(Me);for(var je=0,Ue=("function"==typeof Ce?Ce(.15,.15/Et*xt):Ce).split(" ");je<Ue.length;je++){var Yt=Ue[je],Re=Yt[0],kt=ci[Re];if(kt){var We=Yt.substring(1).split(",");We[0]&&We[1]&&kt(pe,li(We,xt,Et,Jt,Gt))}else console.error('Could not find drawing instructions for "'+Re+'"')}pe.stroke(),pe.closePath()}}(W,zt,we,Nt,Zt,ce),!0)};var oi=new Map;function si(W,U,we){return void 0===we&&(we=0),Math.max(Math.min(W,U),we)}var ci={C:function(W,U){return W.bezierCurveTo(U[0],U[1],U[2],U[3],U[4],U[5])},L:function(W,U){return W.lineTo(U[0],U[1])},M:function(W,U){return W.moveTo(U[0],U[1])}};function li(W,U,we,Nt,Zt){var ce=W.map(function(zt){return parseFloat(zt)||parseInt(zt)});if(ce.length<2)throw new Error("Too few arguments for instruction");for(var Le=0;Le<ce.length;Le+=2)ce[Le]*=U,0!==ce[Le]&&(ce[Le]=si(Math.round(ce[Le]+.5)-.5,U,0)),ce[Le]+=Nt;for(var xe=1;xe<ce.length;xe+=2)ce[xe]*=we,0!==ce[xe]&&(ce[xe]=si(Math.round(ce[xe]+.5)-.5,we,0)),ce[xe]+=Zt;return ce}},3700:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.GridCache=void 0;var m=function(){function h(){this.cache=[]}return h.prototype.resize=function(_,d){for(var f=0;f<_;f++){this.cache.length<=f&&this.cache.push([]);for(var e=this.cache[f].length;e<d;e++)this.cache[f].push(void 0);this.cache[f].length=d}this.cache.length=_},h.prototype.clear=function(){for(var _=0;_<this.cache.length;_++)for(var d=0;d<this.cache[_].length;d++)this.cache[_][d]=void 0},h}();a.GridCache=m},5098:function(F,a,m){var h,_=this&&this.__extends||(h=function(o,r){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(t[c]=i[c])})(o,r)},function(o,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function t(){this.constructor=o}h(o,r),o.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}),d=this&&this.__decorate||function(o,r,t,i){var c,l=arguments.length,p=l<3?r:null===i?i=Object.getOwnPropertyDescriptor(r,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)p=Reflect.decorate(o,r,t,i);else for(var g=o.length-1;g>=0;g--)(c=o[g])&&(p=(l<3?c(p):l>3?c(r,t,p):c(r,t))||p);return l>3&&p&&Object.defineProperty(r,t,p),p},f=this&&this.__param||function(o,r){return function(t,i){r(t,i,o)}};Object.defineProperty(a,"__esModule",{value:!0}),a.LinkRenderLayer=void 0;var e=m(1546),v=m(8803),n=m(2040),s=m(2585),u=function(o){function r(t,i,c,l,p,g,w,y){var S=o.call(this,t,"link",i,!0,c,l,w,y)||this;return p.onShowLinkUnderline(function(C){return S._onShowLinkUnderline(C)}),p.onHideLinkUnderline(function(C){return S._onHideLinkUnderline(C)}),g.onShowLinkUnderline(function(C){return S._onShowLinkUnderline(C)}),g.onHideLinkUnderline(function(C){return S._onHideLinkUnderline(C)}),S}return _(r,o),r.prototype.resize=function(t){o.prototype.resize.call(this,t),this._state=void 0},r.prototype.reset=function(){this._clearCurrentLink()},r.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var t=this._state.y2-this._state.y1-1;t>0&&this._clearCells(0,this._state.y1+1,this._state.cols,t),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},r.prototype._onShowLinkUnderline=function(t){if(this._ctx.fillStyle=t.fg===v.INVERTED_DEFAULT_COLOR?this._colors.background.css:t.fg&&n.is256Color(t.fg)?this._colors.ansi[t.fg].css:this._colors.foreground.css,t.y1===t.y2)this._fillBottomLineAtCells(t.x1,t.y1,t.x2-t.x1);else{this._fillBottomLineAtCells(t.x1,t.y1,t.cols-t.x1);for(var i=t.y1+1;i<t.y2;i++)this._fillBottomLineAtCells(0,i,t.cols);this._fillBottomLineAtCells(0,t.y2,t.x2)}this._state=t},r.prototype._onHideLinkUnderline=function(t){this._clearCurrentLink()},d([f(6,s.IBufferService),f(7,s.IOptionsService)],r)}(e.BaseRenderLayer);a.LinkRenderLayer=u},3525:function(F,a,m){var h,_=this&&this.__extends||(h=function(p,g){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,y){w.__proto__=y}||function(w,y){for(var S in y)Object.prototype.hasOwnProperty.call(y,S)&&(w[S]=y[S])})(p,g)},function(p,g){if("function"!=typeof g&&null!==g)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function w(){this.constructor=p}h(p,g),p.prototype=null===g?Object.create(g):(w.prototype=g.prototype,new w)}),d=this&&this.__decorate||function(p,g,w,y){var S,C=arguments.length,T=C<3?g:null===y?y=Object.getOwnPropertyDescriptor(g,w):y;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)T=Reflect.decorate(p,g,w,y);else for(var L=p.length-1;L>=0;L--)(S=p[L])&&(T=(C<3?S(T):C>3?S(g,w,T):S(g,w))||T);return C>3&&T&&Object.defineProperty(g,w,T),T},f=this&&this.__param||function(p,g){return function(w,y){g(w,y,p)}};Object.defineProperty(a,"__esModule",{value:!0}),a.Renderer=void 0;var e=m(9596),v=m(4149),n=m(2512),s=m(5098),u=m(844),o=m(4725),r=m(2585),t=m(1420),i=m(8460),c=1,l=function(p){function g(w,y,S,C,T,L,M,k){var E=p.call(this)||this;return E._colors=w,E._screenElement=y,E._bufferService=L,E._charSizeService=M,E._optionsService=k,E._id=c++,E._onRequestRedraw=new i.EventEmitter,E._renderLayers=[T.createInstance(e.TextRenderLayer,E._screenElement,0,E._colors,E._optionsService.options.allowTransparency,E._id),T.createInstance(v.SelectionRenderLayer,E._screenElement,1,E._colors,E._id),T.createInstance(s.LinkRenderLayer,E._screenElement,2,E._colors,E._id,S,C),T.createInstance(n.CursorRenderLayer,E._screenElement,3,E._colors,E._id,E._onRequestRedraw)],E.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},E._devicePixelRatio=window.devicePixelRatio,E._updateDimensions(),E.onOptionsChanged(),E}return _(g,p),Object.defineProperty(g.prototype,"onRequestRedraw",{get:function(){return this._onRequestRedraw.event},enumerable:!1,configurable:!0}),g.prototype.dispose=function(){for(var w=0,y=this._renderLayers;w<y.length;w++)y[w].dispose();p.prototype.dispose.call(this),t.removeTerminalFromCache(this._id)},g.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},g.prototype.setColors=function(w){this._colors=w;for(var y=0,S=this._renderLayers;y<S.length;y++){var C=S[y];C.setColors(this._colors),C.reset()}},g.prototype.onResize=function(w,y){this._updateDimensions();for(var S=0,C=this._renderLayers;S<C.length;S++)C[S].resize(this.dimensions);this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},g.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},g.prototype.onBlur=function(){this._runOperation(function(w){return w.onBlur()})},g.prototype.onFocus=function(){this._runOperation(function(w){return w.onFocus()})},g.prototype.onSelectionChanged=function(w,y,S){void 0===S&&(S=!1),this._runOperation(function(C){return C.onSelectionChanged(w,y,S)})},g.prototype.onCursorMove=function(){this._runOperation(function(w){return w.onCursorMove()})},g.prototype.onOptionsChanged=function(){this._runOperation(function(w){return w.onOptionsChanged()})},g.prototype.clear=function(){this._runOperation(function(w){return w.reset()})},g.prototype._runOperation=function(w){for(var y=0,S=this._renderLayers;y<S.length;y++)w(S[y])},g.prototype.renderRows=function(w,y){for(var S=0,C=this._renderLayers;S<C.length;S++)C[S].onGridChanged(w,y)},g.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharTop=1===this._optionsService.options.lineHeight?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.options.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},d([f(4,r.IInstantiationService),f(5,r.IBufferService),f(6,o.ICharSizeService),f(7,r.IOptionsService)],g)}(u.Disposable);a.Renderer=l},1752:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.throwIfFalsy=void 0,a.throwIfFalsy=function(m){if(!m)throw new Error("value must not be falsy");return m}},4149:function(F,a,m){var h,_=this&&this.__extends||(h=function(s,u){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(o[t]=r[t])})(s,u)},function(s,u){if("function"!=typeof u&&null!==u)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function o(){this.constructor=s}h(s,u),s.prototype=null===u?Object.create(u):(o.prototype=u.prototype,new o)}),d=this&&this.__decorate||function(s,u,o,r){var t,i=arguments.length,c=i<3?u:null===r?r=Object.getOwnPropertyDescriptor(u,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(s,u,o,r);else for(var l=s.length-1;l>=0;l--)(t=s[l])&&(c=(i<3?t(c):i>3?t(u,o,c):t(u,o))||c);return i>3&&c&&Object.defineProperty(u,o,c),c},f=this&&this.__param||function(s,u){return function(o,r){u(o,r,s)}};Object.defineProperty(a,"__esModule",{value:!0}),a.SelectionRenderLayer=void 0;var e=m(1546),v=m(2585),n=function(s){function u(o,r,t,i,c,l){var p=s.call(this,o,"selection",r,!0,t,i,c,l)||this;return p._clearState(),p}return _(u,s),u.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},u.prototype.resize=function(o){s.prototype.resize.call(this,o),this._clearState()},u.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},u.prototype.onSelectionChanged=function(o,r,t){if(this._didStateChange(o,r,t,this._bufferService.buffer.ydisp))if(this._clearAll(),o&&r){var i=o[1]-this._bufferService.buffer.ydisp,c=r[1]-this._bufferService.buffer.ydisp,l=Math.max(i,0),p=Math.min(c,this._bufferService.rows-1);if(l>=this._bufferService.rows||p<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=this._colors.selectionTransparent.css,t){var g=o[0];this._fillCells(g,l,r[0]-g,p-l+1)}else{this._fillCells(g=i===l?o[0]:0,l,(l===c?r[0]:this._bufferService.cols)-g,1);var C=Math.max(p-l-1,0);this._fillCells(0,l+1,this._bufferService.cols,C),l!==p&&this._fillCells(0,p,c===p?r[0]:this._bufferService.cols,1)}this._state.start=[o[0],o[1]],this._state.end=[r[0],r[1]],this._state.columnSelectMode=t,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()},u.prototype._didStateChange=function(o,r,t,i){return!this._areCoordinatesEqual(o,this._state.start)||!this._areCoordinatesEqual(r,this._state.end)||t!==this._state.columnSelectMode||i!==this._state.ydisp},u.prototype._areCoordinatesEqual=function(o,r){return!(!o||!r)&&o[0]===r[0]&&o[1]===r[1]},d([f(4,v.IBufferService),f(5,v.IOptionsService)],u)}(e.BaseRenderLayer);a.SelectionRenderLayer=n},9596:function(F,a,m){var h,_=this&&this.__extends||(h=function(c,l){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var w in g)Object.prototype.hasOwnProperty.call(g,w)&&(p[w]=g[w])})(c,l)},function(c,l){if("function"!=typeof l&&null!==l)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function p(){this.constructor=c}h(c,l),c.prototype=null===l?Object.create(l):(p.prototype=l.prototype,new p)}),d=this&&this.__decorate||function(c,l,p,g){var w,y=arguments.length,S=y<3?l:null===g?g=Object.getOwnPropertyDescriptor(l,p):g;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)S=Reflect.decorate(c,l,p,g);else for(var C=c.length-1;C>=0;C--)(w=c[C])&&(S=(y<3?w(S):y>3?w(l,p,S):w(l,p))||S);return y>3&&S&&Object.defineProperty(l,p,S),S},f=this&&this.__param||function(c,l){return function(p,g){l(p,g,c)}};Object.defineProperty(a,"__esModule",{value:!0}),a.TextRenderLayer=void 0;var e=m(3700),v=m(1546),n=m(3734),s=m(643),u=m(511),o=m(2585),r=m(4725),t=m(4269),i=function(c){function l(p,g,w,y,S,C,T,L){var M=c.call(this,p,"text",g,y,w,S,C,T)||this;return M._characterJoinerService=L,M._characterWidth=0,M._characterFont="",M._characterOverlapCache={},M._workCell=new u.CellData,M._state=new e.GridCache,M}return _(l,c),l.prototype.resize=function(p){c.prototype.resize.call(this,p);var g=this._getFont(!1,!1);this._characterWidth===p.scaledCharWidth&&this._characterFont===g||(this._characterWidth=p.scaledCharWidth,this._characterFont=g,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},l.prototype.reset=function(){this._state.clear(),this._clearAll()},l.prototype._forEachCell=function(p,g,w){for(var y=p;y<=g;y++)for(var S=y+this._bufferService.buffer.ydisp,C=this._bufferService.buffer.lines.get(S),T=this._characterJoinerService.getJoinedCharacters(S),L=0;L<this._bufferService.cols;L++){C.loadCell(L,this._workCell);var M=this._workCell,k=!1,E=L;if(0!==M.getWidth()){if(T.length>0&&L===T[0][0]){k=!0;var H=T.shift();M=new t.JoinedCellData(this._workCell,C.translateToString(!0,H[0],H[1]),H[1]-H[0]),E=H[1]-1}!k&&this._isOverlapping(M)&&E<C.length-1&&C.getCodePoint(E+1)===s.NULL_CELL_CODE&&(M.content&=-12582913,M.content|=2<<22),w(M,L,y),L=E}}},l.prototype._drawBackground=function(p,g){var w=this,y=this._ctx,S=this._bufferService.cols,C=0,T=0,L=null;y.save(),this._forEachCell(p,g,function(M,k,E){var H=null;M.isInverse()?H=M.isFgDefault()?w._colors.foreground.css:M.isFgRGB()?"rgb("+n.AttributeData.toColorRGB(M.getFgColor()).join(",")+")":w._colors.ansi[M.getFgColor()].css:M.isBgRGB()?H="rgb("+n.AttributeData.toColorRGB(M.getBgColor()).join(",")+")":M.isBgPalette()&&(H=w._colors.ansi[M.getBgColor()].css),null===L&&(C=k,T=E),E!==T?(y.fillStyle=L||"",w._fillCells(C,T,S-C,1),C=k,T=E):L!==H&&(y.fillStyle=L||"",w._fillCells(C,T,k-C,1),C=k,T=E),L=H}),null!==L&&(y.fillStyle=L,this._fillCells(C,T,S-C,1)),y.restore()},l.prototype._drawForeground=function(p,g){var w=this;this._forEachCell(p,g,function(y,S,C){if(!y.isInvisible()&&(w._drawChars(y,S,C),y.isUnderline()||y.isStrikethrough())){if(w._ctx.save(),y.isInverse())if(y.isBgDefault())w._ctx.fillStyle=w._colors.background.css;else if(y.isBgRGB())w._ctx.fillStyle="rgb("+n.AttributeData.toColorRGB(y.getBgColor()).join(",")+")";else{var T=y.getBgColor();w._optionsService.options.drawBoldTextInBrightColors&&y.isBold()&&T<8&&(T+=8),w._ctx.fillStyle=w._colors.ansi[T].css}else if(y.isFgDefault())w._ctx.fillStyle=w._colors.foreground.css;else if(y.isFgRGB())w._ctx.fillStyle="rgb("+n.AttributeData.toColorRGB(y.getFgColor()).join(",")+")";else{var L=y.getFgColor();w._optionsService.options.drawBoldTextInBrightColors&&y.isBold()&&L<8&&(L+=8),w._ctx.fillStyle=w._colors.ansi[L].css}y.isStrikethrough()&&w._fillMiddleLineAtCells(S,C,y.getWidth()),y.isUnderline()&&w._fillBottomLineAtCells(S,C,y.getWidth()),w._ctx.restore()}})},l.prototype.onGridChanged=function(p,g){0!==this._state.cache.length&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,p,this._bufferService.cols,g-p+1),this._drawBackground(p,g),this._drawForeground(p,g))},l.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.options.allowTransparency)},l.prototype._isOverlapping=function(p){if(1!==p.getWidth()||p.getCode()<256)return!1;var g=p.getChars();if(this._characterOverlapCache.hasOwnProperty(g))return this._characterOverlapCache[g];this._ctx.save(),this._ctx.font=this._characterFont;var w=Math.floor(this._ctx.measureText(g).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[g]=w,w},d([f(5,o.IBufferService),f(6,o.IOptionsService),f(7,r.ICharacterJoinerService)],l)}(v.BaseRenderLayer);a.TextRenderLayer=i},9616:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BaseCharAtlas=void 0;var m=function(){function h(){this._didWarmUp=!1}return h.prototype.dispose=function(){},h.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},h.prototype._doWarmUp=function(){},h.prototype.beginFrame=function(){},h}();a.BaseCharAtlas=m},1420:(F,a,m)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.removeTerminalFromCache=a.acquireCharAtlas=void 0;var h=m(2040),_=m(1906),d=[];a.acquireCharAtlas=function(f,e,v,n,s){for(var u=h.generateConfig(n,s,f,v),o=0;o<d.length;o++){var r=(t=d[o]).ownedBy.indexOf(e);if(r>=0){if(h.configEquals(t.config,u))return t.atlas;1===t.ownedBy.length?(t.atlas.dispose(),d.splice(o,1)):t.ownedBy.splice(r,1);break}}for(o=0;o<d.length;o++){var t=d[o];if(h.configEquals(t.config,u))return t.ownedBy.push(e),t.atlas}var i={atlas:new _.DynamicCharAtlas(document,u),config:u,ownedBy:[e]};return d.push(i),i.atlas},a.removeTerminalFromCache=function(f){for(var e=0;e<d.length;e++){var v=d[e].ownedBy.indexOf(f);if(-1!==v){1===d[e].ownedBy.length?(d[e].atlas.dispose(),d.splice(e,1)):d[e].ownedBy.splice(v,1);break}}}},2040:(F,a,m)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.is256Color=a.configEquals=a.generateConfig=void 0;var h=m(643);a.generateConfig=function(_,d,f,e){return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:_,scaledCharHeight:d,fontFamily:f.fontFamily,fontSize:f.fontSize,fontWeight:f.fontWeight,fontWeightBold:f.fontWeightBold,allowTransparency:f.allowTransparency,colors:{foreground:e.foreground,background:e.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:e.ansi}}},a.configEquals=function(_,d){for(var f=0;f<_.colors.ansi.length;f++)if(_.colors.ansi[f].rgba!==d.colors.ansi[f].rgba)return!1;return _.devicePixelRatio===d.devicePixelRatio&&_.fontFamily===d.fontFamily&&_.fontSize===d.fontSize&&_.fontWeight===d.fontWeight&&_.fontWeightBold===d.fontWeightBold&&_.allowTransparency===d.allowTransparency&&_.scaledCharWidth===d.scaledCharWidth&&_.scaledCharHeight===d.scaledCharHeight&&_.colors.foreground===d.colors.foreground&&_.colors.background===d.colors.background},a.is256Color=function(_){return _<h.DEFAULT_COLOR}},8803:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CHAR_ATLAS_CELL_SPACING=a.DIM_OPACITY=a.INVERTED_DEFAULT_COLOR=void 0,a.INVERTED_DEFAULT_COLOR=257,a.DIM_OPACITY=.5,a.CHAR_ATLAS_CELL_SPACING=1},1906:function(F,a,m){var h,_=this&&this.__extends||(h=function(l,p){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,w){g.__proto__=w}||function(g,w){for(var y in w)Object.prototype.hasOwnProperty.call(w,y)&&(g[y]=w[y])})(l,p)},function(l,p){if("function"!=typeof p&&null!==p)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function g(){this.constructor=l}h(l,p),l.prototype=null===p?Object.create(p):(g.prototype=p.prototype,new g)});Object.defineProperty(a,"__esModule",{value:!0}),a.NoneCharAtlas=a.DynamicCharAtlas=a.getGlyphCacheKey=void 0;var d=m(8803),f=m(9616),e=m(5680),v=m(7001),n=m(6114),s=m(1752),u=m(4774),o={css:"rgba(0, 0, 0, 0)",rgba:0};function r(l){return l.code<<21|l.bg<<12|l.fg<<3|(l.bold?0:4)+(l.dim?0:2)+(l.italic?0:1)}a.getGlyphCacheKey=r;var t=function(l){function p(g,w){var y=l.call(this)||this;y._config=w,y._drawToCacheCount=0,y._glyphsWaitingOnBitmap=[],y._bitmapCommitTimeout=null,y._bitmap=null,y._cacheCanvas=g.createElement("canvas"),y._cacheCanvas.width=1024,y._cacheCanvas.height=1024,y._cacheCtx=s.throwIfFalsy(y._cacheCanvas.getContext("2d",{alpha:!0}));var S=g.createElement("canvas");S.width=y._config.scaledCharWidth,S.height=y._config.scaledCharHeight,y._tmpCtx=s.throwIfFalsy(S.getContext("2d",{alpha:y._config.allowTransparency})),y._width=Math.floor(1024/y._config.scaledCharWidth),y._height=Math.floor(1024/y._config.scaledCharHeight);var C=y._width*y._height;return y._cacheMap=new v.LRUMap(C),y._cacheMap.prealloc(C),y}return _(p,l),p.prototype.dispose=function(){null!==this._bitmapCommitTimeout&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},p.prototype.beginFrame=function(){this._drawToCacheCount=0},p.prototype.draw=function(g,w,y,S){if(32===w.code)return!0;if(!this._canCache(w))return!1;var C=r(w),T=this._cacheMap.get(C);if(null!=T)return this._drawFromCache(g,T,y,S),!0;if(this._drawToCacheCount<100){var L;L=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index;var M=this._drawToCache(w,L);return this._cacheMap.set(C,M),this._drawFromCache(g,M,y,S),!0}return!1},p.prototype._canCache=function(g){return g.code<256},p.prototype._toCoordinateX=function(g){return g%this._width*this._config.scaledCharWidth},p.prototype._toCoordinateY=function(g){return Math.floor(g/this._width)*this._config.scaledCharHeight},p.prototype._drawFromCache=function(g,w,y,S){if(!w.isEmpty){var C=this._toCoordinateX(w.index),T=this._toCoordinateY(w.index);g.drawImage(w.inBitmap?this._bitmap:this._cacheCanvas,C,T,this._config.scaledCharWidth,this._config.scaledCharHeight,y,S,this._config.scaledCharWidth,this._config.scaledCharHeight)}},p.prototype._getColorFromAnsiIndex=function(g){return g<this._config.colors.ansi.length?this._config.colors.ansi[g]:e.DEFAULT_ANSI_COLORS[g]},p.prototype._getBackgroundColor=function(g){return this._config.allowTransparency?o:g.bg===d.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:g.bg<256?this._getColorFromAnsiIndex(g.bg):this._config.colors.background},p.prototype._getForegroundColor=function(g){return g.fg===d.INVERTED_DEFAULT_COLOR?u.color.opaque(this._config.colors.background):g.fg<256?this._getColorFromAnsiIndex(g.fg):this._config.colors.foreground},p.prototype._drawToCache=function(g,w){this._drawToCacheCount++,this._tmpCtx.save();var y=this._getBackgroundColor(g);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=y.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over",this._tmpCtx.font=(g.italic?"italic":"")+" "+(g.bold?this._config.fontWeightBold:this._config.fontWeight)+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline="ideographic",this._tmpCtx.fillStyle=this._getForegroundColor(g).css,g.dim&&(this._tmpCtx.globalAlpha=d.DIM_OPACITY),this._tmpCtx.fillText(g.chars,0,this._config.scaledCharHeight);var T=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),L=!1;if(this._config.allowTransparency||(L=c(T,y)),L&&"_"===g.chars&&!this._config.allowTransparency)for(var M=1;M<=5&&(this._tmpCtx.fillText(g.chars,0,this._config.scaledCharHeight-M),L=c(T=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),y));M++);this._tmpCtx.restore();var k=this._toCoordinateX(w),E=this._toCoordinateY(w);this._cacheCtx.putImageData(T,k,E);var H={index:w,isEmpty:L,inBitmap:!1};return this._addGlyphToBitmap(H),H},p.prototype._addGlyphToBitmap=function(g){var w=this;!("createImageBitmap"in window)||n.isFirefox||n.isSafari||(this._glyphsWaitingOnBitmap.push(g),null===this._bitmapCommitTimeout&&(this._bitmapCommitTimeout=window.setTimeout(function(){return w._generateBitmap()},100)))},p.prototype._generateBitmap=function(){var g=this,w=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then(function(y){g._bitmap=y;for(var S=0;S<w.length;S++)w[S].inBitmap=!0}),this._bitmapCommitTimeout=null},p}(f.BaseCharAtlas);a.DynamicCharAtlas=t;var i=function(l){function p(g,w){return l.call(this)||this}return _(p,l),p.prototype.draw=function(g,w,y,S){return!1},p}(f.BaseCharAtlas);function c(l,p){for(var g=!0,w=p.rgba>>>24,y=p.rgba>>>16&255,S=p.rgba>>>8&255,C=0;C<l.data.length;C+=4)l.data[C]===w&&l.data[C+1]===y&&l.data[C+2]===S?l.data[C+3]=0:g=!1;return g}a.NoneCharAtlas=i},7001:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.LRUMap=void 0;var m=function(){function h(_){this.capacity=_,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return h.prototype._unlinkNode=function(_){var d=_.prev,f=_.next;_===this._head&&(this._head=f),_===this._tail&&(this._tail=d),null!==d&&(d.next=f),null!==f&&(f.prev=d)},h.prototype._appendNode=function(_){var d=this._tail;null!==d&&(d.next=_),_.prev=d,_.next=null,this._tail=_,null===this._head&&(this._head=_)},h.prototype.prealloc=function(_){for(var d=this._nodePool,f=0;f<_;f++)d.push({prev:null,next:null,key:null,value:null})},h.prototype.get=function(_){var d=this._map[_];return void 0!==d?(this._unlinkNode(d),this._appendNode(d),d.value):null},h.prototype.peekValue=function(_){var d=this._map[_];return void 0!==d?d.value:null},h.prototype.peek=function(){var _=this._head;return null===_?null:_.value},h.prototype.set=function(_,d){var f=this._map[_];if(void 0!==f)this._unlinkNode(f=this._map[_]),f.value=d;else if(this.size>=this.capacity)this._unlinkNode(f=this._head),delete this._map[f.key],f.key=_,f.value=d,this._map[_]=f;else{var e=this._nodePool;e.length>0?((f=e.pop()).key=_,f.value=d):f={prev:null,next:null,key:_,value:d},this._map[_]=f,this.size++}this._appendNode(f)},h}();a.LRUMap=m},1296:function(F,a,m){var h,_=this&&this.__extends||(h=function(y,S){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,T){C.__proto__=T}||function(C,T){for(var L in T)Object.prototype.hasOwnProperty.call(T,L)&&(C[L]=T[L])})(y,S)},function(y,S){if("function"!=typeof S&&null!==S)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function C(){this.constructor=y}h(y,S),y.prototype=null===S?Object.create(S):(C.prototype=S.prototype,new C)}),d=this&&this.__decorate||function(y,S,C,T){var L,M=arguments.length,k=M<3?S:null===T?T=Object.getOwnPropertyDescriptor(S,C):T;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)k=Reflect.decorate(y,S,C,T);else for(var E=y.length-1;E>=0;E--)(L=y[E])&&(k=(M<3?L(k):M>3?L(S,C,k):L(S,C))||k);return M>3&&k&&Object.defineProperty(S,C,k),k},f=this&&this.__param||function(y,S){return function(C,T){S(C,T,y)}};Object.defineProperty(a,"__esModule",{value:!0}),a.DomRenderer=void 0;var e=m(3787),v=m(8803),n=m(844),s=m(4725),u=m(2585),o=m(8460),r=m(4774),t=m(9631),i="xterm-dom-renderer-owner-",c="xterm-fg-",l="xterm-bg-",p="xterm-focus",g=1,w=function(y){function S(C,T,L,M,k,E,H,D,Z,G){var N=y.call(this)||this;return N._colors=C,N._element=T,N._screenElement=L,N._viewportElement=M,N._linkifier=k,N._linkifier2=E,N._charSizeService=D,N._optionsService=Z,N._bufferService=G,N._terminalClass=g++,N._rowElements=[],N._rowContainer=document.createElement("div"),N._rowContainer.classList.add("xterm-rows"),N._rowContainer.style.lineHeight="normal",N._rowContainer.setAttribute("aria-hidden","true"),N._refreshRowElements(N._bufferService.cols,N._bufferService.rows),N._selectionContainer=document.createElement("div"),N._selectionContainer.classList.add("xterm-selection"),N._selectionContainer.setAttribute("aria-hidden","true"),N.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},N._updateDimensions(),N._injectCss(),N._rowFactory=H.createInstance(e.DomRendererRowFactory,document,N._colors),N._element.classList.add(i+N._terminalClass),N._screenElement.appendChild(N._rowContainer),N._screenElement.appendChild(N._selectionContainer),N._linkifier.onShowLinkUnderline(function(V){return N._onLinkHover(V)}),N._linkifier.onHideLinkUnderline(function(V){return N._onLinkLeave(V)}),N._linkifier2.onShowLinkUnderline(function(V){return N._onLinkHover(V)}),N._linkifier2.onHideLinkUnderline(function(V){return N._onLinkLeave(V)}),N}return _(S,y),Object.defineProperty(S.prototype,"onRequestRedraw",{get:function(){return(new o.EventEmitter).event},enumerable:!1,configurable:!0}),S.prototype.dispose=function(){this._element.classList.remove(i+this._terminalClass),t.removeElementFromParent(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement),y.prototype.dispose.call(this)},S.prototype._updateDimensions=function(){this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows;for(var C=0,T=this._rowElements;C<T.length;C++){var L=T[C];L.style.width=this.dimensions.canvasWidth+"px",L.style.height=this.dimensions.actualCellHeight+"px",L.style.lineHeight=this.dimensions.actualCellHeight+"px",L.style.overflow="hidden"}this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement)),this._dimensionsStyleElement.textContent=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}",this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},S.prototype.setColors=function(C){this._colors=C,this._injectCss()},S.prototype._injectCss=function(){var C=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var T=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; font-family: "+this._optionsService.options.fontFamily+"; font-size: "+this._optionsService.options.fontSize+"px;}";T+=this._terminalSelector+" span:not(."+e.BOLD_CLASS+") { font-weight: "+this._optionsService.options.fontWeight+";}"+this._terminalSelector+" span."+e.BOLD_CLASS+" { font-weight: "+this._optionsService.options.fontWeightBold+";}"+this._terminalSelector+" span."+e.ITALIC_CLASS+" { font-style: italic;}",T+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",T+="@keyframes blink_block_"+this._terminalClass+" { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}",T+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+e.CURSOR_CLASS+"."+e.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+e.CURSOR_CLASS+"."+e.CURSOR_BLINK_CLASS+":not(."+e.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+e.CURSOR_CLASS+"."+e.CURSOR_BLINK_CLASS+"."+e.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+e.CURSOR_CLASS+"."+e.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+e.CURSOR_CLASS+"."+e.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this._optionsService.options.cursorWidth+"px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+e.CURSOR_CLASS+"."+e.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}",T+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: "+this._colors.selectionTransparent.css+";}",this._colors.ansi.forEach(function(L,M){T+=C._terminalSelector+" ."+c+M+" { color: "+L.css+"; }"+C._terminalSelector+" ."+l+M+" { background-color: "+L.css+"; }"}),T+=this._terminalSelector+" ."+c+v.INVERTED_DEFAULT_COLOR+" { color: "+r.color.opaque(this._colors.background).css+"; }"+this._terminalSelector+" ."+l+v.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.textContent=T},S.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},S.prototype._refreshRowElements=function(C,T){for(var L=this._rowElements.length;L<=T;L++){var M=document.createElement("div");this._rowContainer.appendChild(M),this._rowElements.push(M)}for(;this._rowElements.length>T;)this._rowContainer.removeChild(this._rowElements.pop())},S.prototype.onResize=function(C,T){this._refreshRowElements(C,T),this._updateDimensions()},S.prototype.onCharSizeChanged=function(){this._updateDimensions()},S.prototype.onBlur=function(){this._rowContainer.classList.remove(p)},S.prototype.onFocus=function(){this._rowContainer.classList.add(p)},S.prototype.onSelectionChanged=function(C,T,L){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(C&&T){var M=C[1]-this._bufferService.buffer.ydisp,k=T[1]-this._bufferService.buffer.ydisp,E=Math.max(M,0),H=Math.min(k,this._bufferService.rows-1);if(!(E>=this._bufferService.rows||H<0)){var D=document.createDocumentFragment();L?D.appendChild(this._createSelectionElement(E,C[0],T[0],H-E+1)):(D.appendChild(this._createSelectionElement(E,M===E?C[0]:0,E===k?T[0]:this._bufferService.cols)),D.appendChild(this._createSelectionElement(E+1,0,this._bufferService.cols,H-E-1)),E!==H&&D.appendChild(this._createSelectionElement(H,0,k===H?T[0]:this._bufferService.cols))),this._selectionContainer.appendChild(D)}}},S.prototype._createSelectionElement=function(C,T,L,M){void 0===M&&(M=1);var k=document.createElement("div");return k.style.height=M*this.dimensions.actualCellHeight+"px",k.style.top=C*this.dimensions.actualCellHeight+"px",k.style.left=T*this.dimensions.actualCellWidth+"px",k.style.width=this.dimensions.actualCellWidth*(L-T)+"px",k},S.prototype.onCursorMove=function(){},S.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},S.prototype.clear=function(){for(var C=0,T=this._rowElements;C<T.length;C++)T[C].innerText=""},S.prototype.renderRows=function(C,T){for(var L=this._bufferService.buffer.ybase+this._bufferService.buffer.y,M=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),k=this._optionsService.options.cursorBlink,E=C;E<=T;E++){var H=this._rowElements[E];H.innerText="";var D=E+this._bufferService.buffer.ydisp,Z=this._bufferService.buffer.lines.get(D);H.appendChild(this._rowFactory.createRow(Z,D,D===L,this._optionsService.options.cursorStyle,M,k,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(S.prototype,"_terminalSelector",{get:function(){return"."+i+this._terminalClass},enumerable:!1,configurable:!0}),S.prototype._onLinkHover=function(C){this._setCellUnderline(C.x1,C.x2,C.y1,C.y2,C.cols,!0)},S.prototype._onLinkLeave=function(C){this._setCellUnderline(C.x1,C.x2,C.y1,C.y2,C.cols,!1)},S.prototype._setCellUnderline=function(C,T,L,M,k,E){for(;C!==T||L!==M;){var H=this._rowElements[L];if(!H)return;var D=H.children[C];D&&(D.style.textDecoration=E?"underline":"none"),++C>=k&&(C=0,L++)}},d([f(6,u.IInstantiationService),f(7,s.ICharSizeService),f(8,u.IOptionsService),f(9,u.IBufferService)],S)}(n.Disposable);a.DomRenderer=w},3787:function(F,a,m){var h=this&&this.__decorate||function(t,i,c,l){var p,g=arguments.length,w=g<3?i:null===l?l=Object.getOwnPropertyDescriptor(i,c):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)w=Reflect.decorate(t,i,c,l);else for(var y=t.length-1;y>=0;y--)(p=t[y])&&(w=(g<3?p(w):g>3?p(i,c,w):p(i,c))||w);return g>3&&w&&Object.defineProperty(i,c,w),w},_=this&&this.__param||function(t,i){return function(c,l){i(c,l,t)}};Object.defineProperty(a,"__esModule",{value:!0}),a.DomRendererRowFactory=a.CURSOR_STYLE_UNDERLINE_CLASS=a.CURSOR_STYLE_BAR_CLASS=a.CURSOR_STYLE_BLOCK_CLASS=a.CURSOR_BLINK_CLASS=a.CURSOR_CLASS=a.STRIKETHROUGH_CLASS=a.UNDERLINE_CLASS=a.ITALIC_CLASS=a.DIM_CLASS=a.BOLD_CLASS=void 0;var d=m(8803),f=m(643),e=m(511),v=m(2585),n=m(4774),s=m(4725),u=m(4269);a.BOLD_CLASS="xterm-bold",a.DIM_CLASS="xterm-dim",a.ITALIC_CLASS="xterm-italic",a.UNDERLINE_CLASS="xterm-underline",a.STRIKETHROUGH_CLASS="xterm-strikethrough",a.CURSOR_CLASS="xterm-cursor",a.CURSOR_BLINK_CLASS="xterm-cursor-blink",a.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",a.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",a.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var o=function(){function t(i,c,l,p){this._document=i,this._colors=c,this._characterJoinerService=l,this._optionsService=p,this._workCell=new e.CellData}return t.prototype.setColors=function(i){this._colors=i},t.prototype.createRow=function(i,c,l,p,g,w,y,S){for(var C=this._document.createDocumentFragment(),T=this._characterJoinerService.getJoinedCharacters(c),L=0,M=Math.min(i.length,S)-1;M>=0;M--)if(i.loadCell(M,this._workCell).getCode()!==f.NULL_CELL_CODE||l&&M===g){L=M+1;break}for(M=0;M<L;M++){i.loadCell(M,this._workCell);var k=this._workCell.getWidth();if(0!==k){var E=!1,H=M,D=this._workCell;if(T.length>0&&M===T[0][0]){E=!0;var Z=T.shift();D=new u.JoinedCellData(this._workCell,i.translateToString(!0,Z[0],Z[1]),Z[1]-Z[0]),H=Z[1]-1,k=D.getWidth()}var G=this._document.createElement("span");if(k>1&&(G.style.width=y*k+"px"),E&&(G.style.display="inline",g>=M&&g<=H&&(g=M)),l&&M===g)switch(G.classList.add(a.CURSOR_CLASS),w&&G.classList.add(a.CURSOR_BLINK_CLASS),p){case"bar":G.classList.add(a.CURSOR_STYLE_BAR_CLASS);break;case"underline":G.classList.add(a.CURSOR_STYLE_UNDERLINE_CLASS);break;default:G.classList.add(a.CURSOR_STYLE_BLOCK_CLASS)}D.isBold()&&G.classList.add(a.BOLD_CLASS),D.isItalic()&&G.classList.add(a.ITALIC_CLASS),D.isDim()&&G.classList.add(a.DIM_CLASS),D.isUnderline()&&G.classList.add(a.UNDERLINE_CLASS),G.textContent=D.isInvisible()?f.WHITESPACE_CELL_CHAR:D.getChars()||f.WHITESPACE_CELL_CHAR,D.isStrikethrough()&&G.classList.add(a.STRIKETHROUGH_CLASS);var N=D.getFgColor(),V=D.getFgColorMode(),$=D.getBgColor(),x=D.getBgColorMode(),R=!!D.isInverse();if(R){var B=N;N=$,$=B;var q=V;V=x,x=q}switch(V){case 16777216:case 33554432:D.isBold()&&N<8&&this._optionsService.options.drawBoldTextInBrightColors&&(N+=8),this._applyMinimumContrast(G,this._colors.background,this._colors.ansi[N])||G.classList.add("xterm-fg-"+N);break;case 50331648:var I=n.rgba.toColor(N>>16&255,N>>8&255,255&N);this._applyMinimumContrast(G,this._colors.background,I)||this._addStyle(G,"color:#"+r(N.toString(16),"0",6));break;default:this._applyMinimumContrast(G,this._colors.background,this._colors.foreground)||R&&G.classList.add("xterm-fg-"+d.INVERTED_DEFAULT_COLOR)}switch(x){case 16777216:case 33554432:G.classList.add("xterm-bg-"+$);break;case 50331648:this._addStyle(G,"background-color:#"+r($.toString(16),"0",6));break;default:R&&G.classList.add("xterm-bg-"+d.INVERTED_DEFAULT_COLOR)}C.appendChild(G),M=H}}return C},t.prototype._applyMinimumContrast=function(i,c,l){if(1===this._optionsService.options.minimumContrastRatio)return!1;var p=this._colors.contrastCache.getColor(this._workCell.bg,this._workCell.fg);return void 0===p&&(p=n.color.ensureContrastRatio(c,l,this._optionsService.options.minimumContrastRatio),this._colors.contrastCache.setColor(this._workCell.bg,this._workCell.fg,p??null)),!!p&&(this._addStyle(i,"color:"+p.css),!0)},t.prototype._addStyle=function(i,c){i.setAttribute("style",""+(i.getAttribute("style")||"")+c+";")},h([_(2,s.ICharacterJoinerService),_(3,v.IOptionsService)],t)}();function r(t,i,c){for(;t.length<c;)t=i+t;return t}a.DomRendererRowFactory=o},456:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SelectionModel=void 0;var m=function(){function h(_){this._bufferService=_,this.isSelectAllActive=!1,this.selectionStartLength=0}return h.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(h.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"finalSelectionEnd",{get:function(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){var _=this.selectionStart[0]+this.selectionStartLength;return _>this._bufferService.cols?[_%this._bufferService.cols,this.selectionStart[1]+Math.floor(_/this._bufferService.cols)]:[_,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd}},enumerable:!1,configurable:!0}),h.prototype.areSelectionValuesReversed=function(){var _=this.selectionStart,d=this.selectionEnd;return!(!_||!d)&&(_[1]>d[1]||_[1]===d[1]&&_[0]>d[0])},h.prototype.onTrim=function(_){return this.selectionStart&&(this.selectionStart[1]-=_),this.selectionEnd&&(this.selectionEnd[1]-=_),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},h}();a.SelectionModel=m},428:function(F,a,m){var h=this&&this.__decorate||function(n,s,u,o){var r,t=arguments.length,i=t<3?s:null===o?o=Object.getOwnPropertyDescriptor(s,u):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(n,s,u,o);else for(var c=n.length-1;c>=0;c--)(r=n[c])&&(i=(t<3?r(i):t>3?r(s,u,i):r(s,u))||i);return t>3&&i&&Object.defineProperty(s,u,i),i},_=this&&this.__param||function(n,s){return function(u,o){s(u,o,n)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CharSizeService=void 0;var d=m(2585),f=m(8460),e=function(){function n(s,u,o){this._optionsService=o,this.width=0,this.height=0,this._onCharSizeChange=new f.EventEmitter,this._measureStrategy=new v(s,u,this._optionsService)}return Object.defineProperty(n.prototype,"hasValidSize",{get:function(){return this.width>0&&this.height>0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!1,configurable:!0}),n.prototype.measure=function(){var s=this._measureStrategy.measure();s.width===this.width&&s.height===this.height||(this.width=s.width,this.height=s.height,this._onCharSizeChange.fire())},h([_(2,d.IOptionsService)],n)}();a.CharSizeService=e;var v=function(){function n(s,u,o){this._document=s,this._parentElement=u,this._optionsService=o,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return n.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.options.fontFamily,this._measureElement.style.fontSize=this._optionsService.options.fontSize+"px";var s=this._measureElement.getBoundingClientRect();return 0!==s.width&&0!==s.height&&(this._result.width=s.width,this._result.height=Math.ceil(s.height)),this._result},n}()},4269:function(F,a,m){var h,_=this&&this.__extends||(h=function(r,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,c){i.__proto__=c}||function(i,c){for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(i[l]=c[l])})(r,t)},function(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=r}h(r,t),r.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),d=this&&this.__decorate||function(r,t,i,c){var l,p=arguments.length,g=p<3?t:null===c?c=Object.getOwnPropertyDescriptor(t,i):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(r,t,i,c);else for(var w=r.length-1;w>=0;w--)(l=r[w])&&(g=(p<3?l(g):p>3?l(t,i,g):l(t,i))||g);return p>3&&g&&Object.defineProperty(t,i,g),g},f=this&&this.__param||function(r,t){return function(i,c){t(i,c,r)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CharacterJoinerService=a.JoinedCellData=void 0;var e=m(3734),v=m(643),n=m(511),s=m(2585),u=function(r){function t(i,c,l){var p=r.call(this)||this;return p.content=0,p.combinedData="",p.fg=i.fg,p.bg=i.bg,p.combinedData=c,p._width=l,p}return _(t,r),t.prototype.isCombined=function(){return 2097152},t.prototype.getWidth=function(){return this._width},t.prototype.getChars=function(){return this.combinedData},t.prototype.getCode=function(){return 2097151},t.prototype.setFromCharData=function(i){throw new Error("not implemented")},t.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},t}(e.AttributeData);a.JoinedCellData=u;var o=function(){function r(t){this._bufferService=t,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new n.CellData}return r.prototype.register=function(t){var i={id:this._nextCharacterJoinerId++,handler:t};return this._characterJoiners.push(i),i.id},r.prototype.deregister=function(t){for(var i=0;i<this._characterJoiners.length;i++)if(this._characterJoiners[i].id===t)return this._characterJoiners.splice(i,1),!0;return!1},r.prototype.getJoinedCharacters=function(t){if(0===this._characterJoiners.length)return[];var i=this._bufferService.buffer.lines.get(t);if(!i||0===i.length)return[];for(var c=[],l=i.translateToString(!0),p=0,g=0,w=0,y=i.getFg(0),S=i.getBg(0),C=0;C<i.getTrimmedLength();C++)if(i.loadCell(C,this._workCell),0!==this._workCell.getWidth()){if(this._workCell.fg!==y||this._workCell.bg!==S){if(C-p>1)for(var T=this._getJoinedRanges(l,w,g,i,p),L=0;L<T.length;L++)c.push(T[L]);p=C,w=g,y=this._workCell.fg,S=this._workCell.bg}g+=this._workCell.getChars().length||v.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-p>1)for(T=this._getJoinedRanges(l,w,g,i,p),L=0;L<T.length;L++)c.push(T[L]);return c},r.prototype._getJoinedRanges=function(t,i,c,l,p){for(var g=t.substring(i,c),w=this._characterJoiners[0].handler(g),y=1;y<this._characterJoiners.length;y++)for(var S=this._characterJoiners[y].handler(g),C=0;C<S.length;C++)r._mergeRanges(w,S[C]);return this._stringRangesToCellRanges(w,l,p),w},r.prototype._stringRangesToCellRanges=function(t,i,c){var l=0,p=!1,g=0,w=t[l];if(w){for(var y=c;y<this._bufferService.cols;y++){var S=i.getWidth(y),C=i.getString(y).length||v.WHITESPACE_CELL_CHAR.length;if(0!==S){if(!p&&w[0]<=g&&(w[0]=y,p=!0),w[1]<=g){if(w[1]=y,!(w=t[++l]))break;w[0]<=g?(w[0]=y,p=!0):p=!1}g+=C}}w&&(w[1]=this._bufferService.cols)}},r._mergeRanges=function(t,i){for(var c=!1,l=0;l<t.length;l++){var p=t[l];if(c){if(i[1]<=p[0])return t[l-1][1]=i[1],t;if(i[1]<=p[1])return t[l-1][1]=Math.max(i[1],p[1]),t.splice(l,1),t;t.splice(l,1),l--}else{if(i[1]<=p[0])return t.splice(l,0,i),t;if(i[1]<=p[1])return p[0]=Math.min(i[0],p[0]),t;i[0]<p[1]&&(p[0]=Math.min(i[0],p[0]),c=!0)}}return c?t[t.length-1][1]=i[1]:t.push(i),t},r=d([f(0,s.IBufferService)],r)}();a.CharacterJoinerService=o},5114:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CoreBrowserService=void 0;var m=function(){function h(_){this._textarea=_}return Object.defineProperty(h.prototype,"isFocused",{get:function(){return(this._textarea.getRootNode?this._textarea.getRootNode():document).activeElement===this._textarea&&document.hasFocus()},enumerable:!1,configurable:!0}),h}();a.CoreBrowserService=m},8934:function(F,a,m){var h=this&&this.__decorate||function(v,n,s,u){var o,r=arguments.length,t=r<3?n:null===u?u=Object.getOwnPropertyDescriptor(n,s):u;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)t=Reflect.decorate(v,n,s,u);else for(var i=v.length-1;i>=0;i--)(o=v[i])&&(t=(r<3?o(t):r>3?o(n,s,t):o(n,s))||t);return r>3&&t&&Object.defineProperty(n,s,t),t},_=this&&this.__param||function(v,n){return function(s,u){n(s,u,v)}};Object.defineProperty(a,"__esModule",{value:!0}),a.MouseService=void 0;var d=m(4725),f=m(9806),e=function(){function v(n,s){this._renderService=n,this._charSizeService=s}return v.prototype.getCoords=function(n,s,u,o,r){return f.getCoords(n,s,u,o,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,r)},v.prototype.getRawByteCoords=function(n,s,u,o){var r=this.getCoords(n,s,u,o);return f.getRawByteCoords(r)},h([_(0,d.IRenderService),_(1,d.ICharSizeService)],v)}();a.MouseService=e},3230:function(F,a,m){var h,_=this&&this.__extends||(h=function(i,c){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,p){l.__proto__=p}||function(l,p){for(var g in p)Object.prototype.hasOwnProperty.call(p,g)&&(l[g]=p[g])})(i,c)},function(i,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function l(){this.constructor=i}h(i,c),i.prototype=null===c?Object.create(c):(l.prototype=c.prototype,new l)}),d=this&&this.__decorate||function(i,c,l,p){var g,w=arguments.length,y=w<3?c:null===p?p=Object.getOwnPropertyDescriptor(c,l):p;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)y=Reflect.decorate(i,c,l,p);else for(var S=i.length-1;S>=0;S--)(g=i[S])&&(y=(w<3?g(y):w>3?g(c,l,y):g(c,l))||y);return w>3&&y&&Object.defineProperty(c,l,y),y},f=this&&this.__param||function(i,c){return function(l,p){c(l,p,i)}};Object.defineProperty(a,"__esModule",{value:!0}),a.RenderService=void 0;var e=m(6193),v=m(8460),n=m(844),s=m(5596),u=m(3656),o=m(2585),r=m(4725),t=function(i){function c(l,p,g,w,y,S){var C=i.call(this)||this;if(C._renderer=l,C._rowCount=p,C._charSizeService=y,C._isPaused=!1,C._needsFullRefresh=!1,C._isNextRenderRedrawOnly=!0,C._needsSelectionRefresh=!1,C._canvasWidth=0,C._canvasHeight=0,C._selectionState={start:void 0,end:void 0,columnSelectMode:!1},C._onDimensionsChange=new v.EventEmitter,C._onRender=new v.EventEmitter,C._onRefreshRequest=new v.EventEmitter,C.register({dispose:function(){return C._renderer.dispose()}}),C._renderDebouncer=new e.RenderDebouncer(function(L,M){return C._renderRows(L,M)}),C.register(C._renderDebouncer),C._screenDprMonitor=new s.ScreenDprMonitor,C._screenDprMonitor.setListener(function(){return C.onDevicePixelRatioChange()}),C.register(C._screenDprMonitor),C.register(S.onResize(function(L){return C._fullRefresh()})),C.register(w.onOptionChange(function(){return C._renderer.onOptionsChanged()})),C.register(C._charSizeService.onCharSizeChange(function(){return C.onCharSizeChanged()})),C._renderer.onRequestRedraw(function(L){return C.refreshRows(L.start,L.end,!0)}),C.register(u.addDisposableDomListener(window,"resize",function(){return C.onDevicePixelRatioChange()})),"IntersectionObserver"in window){var T=new IntersectionObserver(function(L){return C._onIntersectionChange(L[L.length-1])},{threshold:0});T.observe(g),C.register({dispose:function(){return T.disconnect()}})}return C}return _(c,i),Object.defineProperty(c.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"onRenderedBufferChange",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!1,configurable:!0}),c.prototype._onIntersectionChange=function(l){this._isPaused=void 0===l.isIntersecting?0===l.intersectionRatio:!l.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},c.prototype.refreshRows=function(l,p,g){void 0===g&&(g=!1),this._isPaused?this._needsFullRefresh=!0:(g||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(l,p,this._rowCount))},c.prototype._renderRows=function(l,p){this._renderer.renderRows(l,p),this._needsSelectionRefresh&&(this._renderer.onSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRender.fire({start:l,end:p}),this._isNextRenderRedrawOnly=!0},c.prototype.resize=function(l,p){this._rowCount=p,this._fireOnCanvasResize()},c.prototype.changeOptions=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},c.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},c.prototype.dispose=function(){i.prototype.dispose.call(this)},c.prototype.setRenderer=function(l){var p=this;this._renderer.dispose(),this._renderer=l,this._renderer.onRequestRedraw(function(g){return p.refreshRows(g.start,g.end,!0)}),this._needsSelectionRefresh=!0,this._fullRefresh()},c.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},c.prototype.setColors=function(l){this._renderer.setColors(l),this._fullRefresh()},c.prototype.onDevicePixelRatioChange=function(){this._charSizeService.measure(),this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},c.prototype.onResize=function(l,p){this._renderer.onResize(l,p),this._fullRefresh()},c.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},c.prototype.onBlur=function(){this._renderer.onBlur()},c.prototype.onFocus=function(){this._renderer.onFocus()},c.prototype.onSelectionChanged=function(l,p,g){this._selectionState.start=l,this._selectionState.end=p,this._selectionState.columnSelectMode=g,this._renderer.onSelectionChanged(l,p,g)},c.prototype.onCursorMove=function(){this._renderer.onCursorMove()},c.prototype.clear=function(){this._renderer.clear()},d([f(3,o.IOptionsService),f(4,r.ICharSizeService),f(5,o.IBufferService)],c)}(n.Disposable);a.RenderService=t},9312:function(F,a,m){var h,_=this&&this.__extends||(h=function(w,y){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,C){S.__proto__=C}||function(S,C){for(var T in C)Object.prototype.hasOwnProperty.call(C,T)&&(S[T]=C[T])})(w,y)},function(w,y){if("function"!=typeof y&&null!==y)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function S(){this.constructor=w}h(w,y),w.prototype=null===y?Object.create(y):(S.prototype=y.prototype,new S)}),d=this&&this.__decorate||function(w,y,S,C){var T,L=arguments.length,M=L<3?y:null===C?C=Object.getOwnPropertyDescriptor(y,S):C;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)M=Reflect.decorate(w,y,S,C);else for(var k=w.length-1;k>=0;k--)(T=w[k])&&(M=(L<3?T(M):L>3?T(y,S,M):T(y,S))||M);return L>3&&M&&Object.defineProperty(y,S,M),M},f=this&&this.__param||function(w,y){return function(S,C){y(S,C,w)}};Object.defineProperty(a,"__esModule",{value:!0}),a.SelectionService=void 0;var e=m(6114),v=m(456),n=m(511),s=m(8460),u=m(4725),o=m(2585),r=m(9806),t=m(9504),i=m(844),c=m(4841),l=String.fromCharCode(160),p=new RegExp(l,"g"),g=function(w){function y(S,C,T,L,M,k,E,H){var D=w.call(this)||this;return D._element=S,D._screenElement=C,D._linkifier=T,D._bufferService=L,D._coreService=M,D._mouseService=k,D._optionsService=E,D._renderService=H,D._dragScrollAmount=0,D._enabled=!0,D._workCell=new n.CellData,D._mouseDownTimeStamp=0,D._oldHasSelection=!1,D._oldSelectionStart=void 0,D._oldSelectionEnd=void 0,D._onLinuxMouseSelection=D.register(new s.EventEmitter),D._onRedrawRequest=D.register(new s.EventEmitter),D._onSelectionChange=D.register(new s.EventEmitter),D._onRequestScrollLines=D.register(new s.EventEmitter),D._mouseMoveListener=function(Z){return D._onMouseMove(Z)},D._mouseUpListener=function(Z){return D._onMouseUp(Z)},D._coreService.onUserInput(function(){D.hasSelection&&D.clearSelection()}),D._trimListener=D._bufferService.buffer.lines.onTrim(function(Z){return D._onTrim(Z)}),D.register(D._bufferService.buffers.onBufferActivate(function(Z){return D._onBufferActivate(Z)})),D.enable(),D._model=new v.SelectionModel(D._bufferService),D._activeSelectionMode=0,D}return _(y,w),Object.defineProperty(y.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"onRequestRedraw",{get:function(){return this._onRedrawRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"onRequestScrollLines",{get:function(){return this._onRequestScrollLines.event},enumerable:!1,configurable:!0}),y.prototype.dispose=function(){this._removeMouseDownListeners()},y.prototype.reset=function(){this.clearSelection()},y.prototype.disable=function(){this.clearSelection(),this._enabled=!1},y.prototype.enable=function(){this._enabled=!0},Object.defineProperty(y.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"hasSelection",{get:function(){var S=this._model.finalSelectionStart,C=this._model.finalSelectionEnd;return!(!S||!C||S[0]===C[0]&&S[1]===C[1])},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"selectionText",{get:function(){var S=this._model.finalSelectionStart,C=this._model.finalSelectionEnd;if(!S||!C)return"";var T=this._bufferService.buffer,L=[];if(3===this._activeSelectionMode){if(S[0]===C[0])return"";for(var M=S[1];M<=C[1];M++){var k=T.translateBufferLineToString(M,!0,S[0],C[0]);L.push(k)}}else{for(L.push(T.translateBufferLineToString(S[1],!0,S[0],S[1]===C[1]?C[0]:void 0)),M=S[1]+1;M<=C[1]-1;M++){var H=T.lines.get(M);k=T.translateBufferLineToString(M,!0),H&&H.isWrapped?L[L.length-1]+=k:L.push(k)}S[1]!==C[1]&&(H=T.lines.get(C[1]),k=T.translateBufferLineToString(C[1],!0,0,C[0]),H&&H.isWrapped?L[L.length-1]+=k:L.push(k))}return L.map(function(D){return D.replace(p," ")}).join(e.isWindows?"\r\n":"\n")},enumerable:!1,configurable:!0}),y.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},y.prototype.refresh=function(S){var C=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return C._refresh()})),e.isLinux&&S&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},y.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:3===this._activeSelectionMode})},y.prototype._isClickInSelection=function(S){var C=this._getMouseBufferCoords(S),T=this._model.finalSelectionStart,L=this._model.finalSelectionEnd;return!!(T&&L&&C)&&this._areCoordsInSelection(C,T,L)},y.prototype._areCoordsInSelection=function(S,C,T){return S[1]>C[1]&&S[1]<T[1]||C[1]===T[1]&&S[1]===C[1]&&S[0]>=C[0]&&S[0]<T[0]||C[1]<T[1]&&S[1]===T[1]&&S[0]<T[0]||C[1]<T[1]&&S[1]===C[1]&&S[0]>=C[0]},y.prototype._selectWordAtCursor=function(S,C){var T,L,M=null===(L=null===(T=this._linkifier.currentLink)||void 0===T?void 0:T.link)||void 0===L?void 0:L.range;if(M)return this._model.selectionStart=[M.start.x-1,M.start.y-1],this._model.selectionStartLength=c.getRangeLength(M,this._bufferService.cols),this._model.selectionEnd=void 0,!0;var k=this._getMouseBufferCoords(S);return!!k&&(this._selectWordAt(k,C),this._model.selectionEnd=void 0,!0)},y.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},y.prototype.selectLines=function(S,C){this._model.clearSelection(),S=Math.max(S,0),C=Math.min(C,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,S],this._model.selectionEnd=[this._bufferService.cols,C],this.refresh(),this._onSelectionChange.fire()},y.prototype._onTrim=function(S){this._model.onTrim(S)&&this.refresh()},y.prototype._getMouseBufferCoords=function(S){var C=this._mouseService.getCoords(S,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(C)return C[0]--,C[1]--,C[1]+=this._bufferService.buffer.ydisp,C},y.prototype._getMouseEventScrollAmount=function(S){var C=r.getCoordsRelativeToElement(S,this._screenElement)[1],T=this._renderService.dimensions.canvasHeight;return C>=0&&C<=T?0:(C>T&&(C-=T),C=Math.min(Math.max(C,-50),50),(C/=50)/Math.abs(C)+Math.round(14*C))},y.prototype.shouldForceSelection=function(S){return e.isMac?S.altKey&&this._optionsService.options.macOptionClickForcesSelection:S.shiftKey},y.prototype.onMouseDown=function(S){if(this._mouseDownTimeStamp=S.timeStamp,(2!==S.button||!this.hasSelection)&&0===S.button){if(!this._enabled){if(!this.shouldForceSelection(S))return;S.stopPropagation()}S.preventDefault(),this._dragScrollAmount=0,this._enabled&&S.shiftKey?this._onIncrementalClick(S):1===S.detail?this._onSingleClick(S):2===S.detail?this._onDoubleClick(S):3===S.detail&&this._onTripleClick(S),this._addMouseDownListeners(),this.refresh(!0)}},y.prototype._addMouseDownListeners=function(){var S=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval(function(){return S._dragScroll()},50)},y.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},y.prototype._onIncrementalClick=function(S){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(S))},y.prototype._onSingleClick=function(S){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(S)?3:0,this._model.selectionStart=this._getMouseBufferCoords(S),this._model.selectionStart){this._model.selectionEnd=void 0;var C=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);C&&C.length!==this._model.selectionStart[0]&&0===C.hasWidth(this._model.selectionStart[0])&&this._model.selectionStart[0]++}},y.prototype._onDoubleClick=function(S){this._selectWordAtCursor(S,!0)&&(this._activeSelectionMode=1)},y.prototype._onTripleClick=function(S){var C=this._getMouseBufferCoords(S);C&&(this._activeSelectionMode=2,this._selectLineAt(C[1]))},y.prototype.shouldColumnSelect=function(S){return S.altKey&&!(e.isMac&&this._optionsService.options.macOptionClickForcesSelection)},y.prototype._onMouseMove=function(S){if(S.stopImmediatePropagation(),this._model.selectionStart){var C=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(S),this._model.selectionEnd){2===this._activeSelectionMode?this._model.selectionEnd[0]=this._model.selectionEnd[1]<this._model.selectionStart[1]?0:this._bufferService.cols:1===this._activeSelectionMode&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(S),3!==this._activeSelectionMode&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));var T=this._bufferService.buffer;if(this._model.selectionEnd[1]<T.lines.length){var L=T.lines.get(this._model.selectionEnd[1]);L&&0===L.hasWidth(this._model.selectionEnd[0])&&this._model.selectionEnd[0]++}C&&C[0]===this._model.selectionEnd[0]&&C[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},y.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});var S=this._bufferService.buffer;this._dragScrollAmount>0?(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(S.ydisp+this._bufferService.rows,S.lines.length-1)):(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=S.ydisp),this.refresh()}},y.prototype._onMouseUp=function(S){var C=S.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&C<500&&S.altKey&&this._optionsService.getOption("altClickMovesCursor")){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){var T=this._mouseService.getCoords(S,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(T&&void 0!==T[0]&&void 0!==T[1]){var L=t.moveToCellSequence(T[0]-1,T[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(L,!0)}}}else this._fireEventIfSelectionChanged()},y.prototype._fireEventIfSelectionChanged=function(){var S=this._model.finalSelectionStart,C=this._model.finalSelectionEnd,T=!(!S||!C||S[0]===C[0]&&S[1]===C[1]);T?S&&C&&(this._oldSelectionStart&&this._oldSelectionEnd&&S[0]===this._oldSelectionStart[0]&&S[1]===this._oldSelectionStart[1]&&C[0]===this._oldSelectionEnd[0]&&C[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(S,C,T)):this._oldHasSelection&&this._fireOnSelectionChange(S,C,T)},y.prototype._fireOnSelectionChange=function(S,C,T){this._oldSelectionStart=S,this._oldSelectionEnd=C,this._oldHasSelection=T,this._onSelectionChange.fire()},y.prototype._onBufferActivate=function(S){var C=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=S.activeBuffer.lines.onTrim(function(T){return C._onTrim(T)})},y.prototype._convertViewportColToCharacterIndex=function(S,C){for(var T=C[0],L=0;C[0]>=L;L++){var M=S.loadCell(L,this._workCell).getChars().length;0===this._workCell.getWidth()?T--:M>1&&C[0]!==L&&(T+=M-1)}return T},y.prototype.setSelection=function(S,C,T){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[S,C],this._model.selectionStartLength=T,this.refresh()},y.prototype.rightClickSelect=function(S){this._isClickInSelection(S)||(this._selectWordAtCursor(S,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())},y.prototype._getWordAt=function(S,C,T,L){if(void 0===T&&(T=!0),void 0===L&&(L=!0),!(S[0]>=this._bufferService.cols)){var M=this._bufferService.buffer,k=M.lines.get(S[1]);if(k){var E=M.translateBufferLineToString(S[1],!1),H=this._convertViewportColToCharacterIndex(k,S),D=H,Z=S[0]-H,G=0,N=0,V=0,$=0;if(" "===E.charAt(H)){for(;H>0&&" "===E.charAt(H-1);)H--;for(;D<E.length&&" "===E.charAt(D+1);)D++}else{var x=S[0],R=S[0];0===k.getWidth(x)&&(G++,x--),2===k.getWidth(R)&&(N++,R++);var B=k.getString(R).length;for(B>1&&($+=B-1,D+=B-1);x>0&&H>0&&!this._isCharWordSeparator(k.loadCell(x-1,this._workCell));){k.loadCell(x-1,this._workCell);var q=this._workCell.getChars().length;0===this._workCell.getWidth()?(G++,x--):q>1&&(V+=q-1,H-=q-1),H--,x--}for(;R<k.length&&D+1<E.length&&!this._isCharWordSeparator(k.loadCell(R+1,this._workCell));){k.loadCell(R+1,this._workCell);var I=this._workCell.getChars().length;2===this._workCell.getWidth()?(N++,R++):I>1&&($+=I-1,D+=I-1),D++,R++}}D++;var Q=H+Z-G+V,X=Math.min(this._bufferService.cols,D-H+G+N-V-$);if(C||""!==E.slice(H,D).trim()){if(T&&0===Q&&32!==k.getCodePoint(0)){var se=M.lines.get(S[1]-1);if(se&&k.isWrapped&&32!==se.getCodePoint(this._bufferService.cols-1)){var he=this._getWordAt([this._bufferService.cols-1,S[1]-1],!1,!0,!1);if(he){var ue=this._bufferService.cols-he.start;Q-=ue,X+=ue}}}if(L&&Q+X===this._bufferService.cols&&32!==k.getCodePoint(this._bufferService.cols-1)){var K=M.lines.get(S[1]+1);if(K&&K.isWrapped&&32!==K.getCodePoint(0)){var re=this._getWordAt([0,S[1]+1],!1,!1,!0);re&&(X+=re.length)}}return{start:Q,length:X}}}}},y.prototype._selectWordAt=function(S,C){var T=this._getWordAt(S,C);if(T){for(;T.start<0;)T.start+=this._bufferService.cols,S[1]--;this._model.selectionStart=[T.start,S[1]],this._model.selectionStartLength=T.length}},y.prototype._selectToWordAt=function(S){var C=this._getWordAt(S,!0);if(C){for(var T=S[1];C.start<0;)C.start+=this._bufferService.cols,T--;if(!this._model.areSelectionValuesReversed())for(;C.start+C.length>this._bufferService.cols;)C.length-=this._bufferService.cols,T++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?C.start:C.start+C.length,T]}},y.prototype._isCharWordSeparator=function(S){return 0!==S.getWidth()&&this._optionsService.options.wordSeparator.indexOf(S.getChars())>=0},y.prototype._selectLineAt=function(S){var C=this._bufferService.buffer.getWrappedRangeForLine(S);this._model.selectionStart=[0,C.first],this._model.selectionEnd=[this._bufferService.cols,C.last],this._model.selectionStartLength=0},d([f(3,o.IBufferService),f(4,o.ICoreService),f(5,u.IMouseService),f(6,o.IOptionsService),f(7,u.IRenderService)],y)}(i.Disposable);a.SelectionService=g},4725:(F,a,m)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ICharacterJoinerService=a.ISoundService=a.ISelectionService=a.IRenderService=a.IMouseService=a.ICoreBrowserService=a.ICharSizeService=void 0;var h=m(8343);a.ICharSizeService=h.createDecorator("CharSizeService"),a.ICoreBrowserService=h.createDecorator("CoreBrowserService"),a.IMouseService=h.createDecorator("MouseService"),a.IRenderService=h.createDecorator("RenderService"),a.ISelectionService=h.createDecorator("SelectionService"),a.ISoundService=h.createDecorator("SoundService"),a.ICharacterJoinerService=h.createDecorator("CharacterJoinerService")},357:function(F,a,m){var h=this&&this.__decorate||function(e,v,n,s){var u,o=arguments.length,r=o<3?v:null===s?s=Object.getOwnPropertyDescriptor(v,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,v,n,s);else for(var t=e.length-1;t>=0;t--)(u=e[t])&&(r=(o<3?u(r):o>3?u(v,n,r):u(v,n))||r);return o>3&&r&&Object.defineProperty(v,n,r),r},_=this&&this.__param||function(e,v){return function(n,s){v(n,s,e)}};Object.defineProperty(a,"__esModule",{value:!0}),a.SoundService=void 0;var d=m(2585),f=function(){function e(v){this._optionsService=v}return Object.defineProperty(e,"audioContext",{get:function(){if(!e._audioContext){var v=window.AudioContext||window.webkitAudioContext;if(!v)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;e._audioContext=new v}return e._audioContext},enumerable:!1,configurable:!0}),e.prototype.playBellSound=function(){var v=e.audioContext;if(v){var n=v.createBufferSource();v.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.options.bellSound)),function(s){n.buffer=s,n.connect(v.destination),n.start(0)})}},e.prototype._base64ToArrayBuffer=function(v){for(var n=window.atob(v),s=n.length,u=new Uint8Array(s),o=0;o<s;o++)u[o]=n.charCodeAt(o);return u.buffer},e.prototype._removeMimeType=function(v){return v.split(",")[1]},e=h([_(0,d.IOptionsService)],e)}();a.SoundService=f},6349:(F,a,m)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CircularList=void 0;var h=m(8460),_=function(){function d(f){this._maxLength=f,this.onDeleteEmitter=new h.EventEmitter,this.onInsertEmitter=new h.EventEmitter,this.onTrimEmitter=new h.EventEmitter,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(d.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"maxLength",{get:function(){return this._maxLength},set:function(f){if(this._maxLength!==f){for(var e=new Array(f),v=0;v<Math.min(f,this.length);v++)e[v]=this._array[this._getCyclicIndex(v)];this._array=e,this._maxLength=f,this._startIndex=0}},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"length",{get:function(){return this._length},set:function(f){if(f>this._length)for(var e=this._length;e<f;e++)this._array[e]=void 0;this._length=f},enumerable:!1,configurable:!0}),d.prototype.get=function(f){return this._array[this._getCyclicIndex(f)]},d.prototype.set=function(f,e){this._array[this._getCyclicIndex(f)]=e},d.prototype.push=function(f){this._array[this._getCyclicIndex(this._length)]=f,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},d.prototype.recycle=function(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(d.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!1,configurable:!0}),d.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},d.prototype.splice=function(f,e){for(var v=[],n=2;n<arguments.length;n++)v[n-2]=arguments[n];if(e){for(var s=f;s<this._length-e;s++)this._array[this._getCyclicIndex(s)]=this._array[this._getCyclicIndex(s+e)];this._length-=e,this.onDeleteEmitter.fire({index:f,amount:e})}for(s=this._length-1;s>=f;s--)this._array[this._getCyclicIndex(s+v.length)]=this._array[this._getCyclicIndex(s)];for(s=0;s<v.length;s++)this._array[this._getCyclicIndex(f+s)]=v[s];if(v.length&&this.onInsertEmitter.fire({index:f,amount:v.length}),this._length+v.length>this._maxLength){var u=this._length+v.length-this._maxLength;this._startIndex+=u,this._length=this._maxLength,this.onTrimEmitter.fire(u)}else this._length+=v.length},d.prototype.trimStart=function(f){f>this._length&&(f=this._length),this._startIndex+=f,this._length-=f,this.onTrimEmitter.fire(f)},d.prototype.shiftElements=function(f,e,v){if(!(e<=0)){if(f<0||f>=this._length)throw new Error("start argument out of range");if(f+v<0)throw new Error("Cannot shift elements in list beyond index 0");if(v>0){for(var n=e-1;n>=0;n--)this.set(f+n+v,this.get(f+n));var s=f+e+v-this._length;if(s>0)for(this._length+=s;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(n=0;n<e;n++)this.set(f+n+v,this.get(f+n))}},d.prototype._getCyclicIndex=function(f){return(this._startIndex+f)%this._maxLength},d}();a.CircularList=_},1439:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.clone=void 0,a.clone=function m(h,_){if(void 0===_&&(_=5),"object"!=typeof h)return h;var d=Array.isArray(h)?[]:{};for(var f in h)d[f]=_<=1?h[f]:h[f]&&m(h[f],_-1);return d}},8969:function(F,a,m){var h,_=this&&this.__extends||(h=function(S,C){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,L){T.__proto__=L}||function(T,L){for(var M in L)Object.prototype.hasOwnProperty.call(L,M)&&(T[M]=L[M])})(S,C)},function(S,C){if("function"!=typeof C&&null!==C)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function T(){this.constructor=S}h(S,C),S.prototype=null===C?Object.create(C):(T.prototype=C.prototype,new T)});Object.defineProperty(a,"__esModule",{value:!0}),a.CoreTerminal=void 0;var d=m(844),f=m(2585),e=m(4348),v=m(7866),n=m(744),s=m(7302),u=m(6975),o=m(8460),r=m(1753),t=m(3730),i=m(1480),c=m(7994),l=m(9282),p=m(5435),g=m(5981),w=!1,y=function(S){function C(T){var L=S.call(this)||this;return L._onBinary=new o.EventEmitter,L._onData=new o.EventEmitter,L._onLineFeed=new o.EventEmitter,L._onResize=new o.EventEmitter,L._onScroll=new o.EventEmitter,L._instantiationService=new e.InstantiationService,L.optionsService=new s.OptionsService(T),L._instantiationService.setService(f.IOptionsService,L.optionsService),L._bufferService=L.register(L._instantiationService.createInstance(n.BufferService)),L._instantiationService.setService(f.IBufferService,L._bufferService),L._logService=L._instantiationService.createInstance(v.LogService),L._instantiationService.setService(f.ILogService,L._logService),L.coreService=L.register(L._instantiationService.createInstance(u.CoreService,function(){return L.scrollToBottom()})),L._instantiationService.setService(f.ICoreService,L.coreService),L.coreMouseService=L._instantiationService.createInstance(r.CoreMouseService),L._instantiationService.setService(f.ICoreMouseService,L.coreMouseService),L._dirtyRowService=L._instantiationService.createInstance(t.DirtyRowService),L._instantiationService.setService(f.IDirtyRowService,L._dirtyRowService),L.unicodeService=L._instantiationService.createInstance(i.UnicodeService),L._instantiationService.setService(f.IUnicodeService,L.unicodeService),L._charsetService=L._instantiationService.createInstance(c.CharsetService),L._instantiationService.setService(f.ICharsetService,L._charsetService),L._inputHandler=new p.InputHandler(L._bufferService,L._charsetService,L.coreService,L._dirtyRowService,L._logService,L.optionsService,L.coreMouseService,L.unicodeService),L.register(o.forwardEvent(L._inputHandler.onLineFeed,L._onLineFeed)),L.register(L._inputHandler),L.register(o.forwardEvent(L._bufferService.onResize,L._onResize)),L.register(o.forwardEvent(L.coreService.onData,L._onData)),L.register(o.forwardEvent(L.coreService.onBinary,L._onBinary)),L.register(L.optionsService.onOptionChange(function(M){return L._updateOptions(M)})),L.register(L._bufferService.onScroll(function(M){L._onScroll.fire({position:L._bufferService.buffer.ydisp,source:0}),L._dirtyRowService.markRangeDirty(L._bufferService.buffer.scrollTop,L._bufferService.buffer.scrollBottom)})),L.register(L._inputHandler.onScroll(function(M){L._onScroll.fire({position:L._bufferService.buffer.ydisp,source:0}),L._dirtyRowService.markRangeDirty(L._bufferService.buffer.scrollTop,L._bufferService.buffer.scrollBottom)})),L._writeBuffer=new g.WriteBuffer(function(M,k){return L._inputHandler.parse(M,k)}),L}return _(C,S),Object.defineProperty(C.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"onScroll",{get:function(){var T=this;return this._onScrollApi||(this._onScrollApi=new o.EventEmitter,this.register(this._onScroll.event(function(L){var M;null===(M=T._onScrollApi)||void 0===M||M.fire(L.position)}))),this._onScrollApi.event},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!1,configurable:!0}),C.prototype.dispose=function(){var T;this._isDisposed||(S.prototype.dispose.call(this),null===(T=this._windowsMode)||void 0===T||T.dispose(),this._windowsMode=void 0)},C.prototype.write=function(T,L){this._writeBuffer.write(T,L)},C.prototype.writeSync=function(T,L){this._logService.logLevel<=f.LogLevelEnum.WARN&&!w&&(this._logService.warn("writeSync is unreliable and will be removed soon."),w=!0),this._writeBuffer.writeSync(T,L)},C.prototype.resize=function(T,L){isNaN(T)||isNaN(L)||(T=Math.max(T,n.MINIMUM_COLS),L=Math.max(L,n.MINIMUM_ROWS),this._bufferService.resize(T,L))},C.prototype.scroll=function(T,L){void 0===L&&(L=!1),this._bufferService.scroll(T,L)},C.prototype.scrollLines=function(T,L,M){this._bufferService.scrollLines(T,L,M)},C.prototype.scrollPages=function(T){this._bufferService.scrollPages(T)},C.prototype.scrollToTop=function(){this._bufferService.scrollToTop()},C.prototype.scrollToBottom=function(){this._bufferService.scrollToBottom()},C.prototype.scrollToLine=function(T){this._bufferService.scrollToLine(T)},C.prototype.registerEscHandler=function(T,L){return this._inputHandler.registerEscHandler(T,L)},C.prototype.registerDcsHandler=function(T,L){return this._inputHandler.registerDcsHandler(T,L)},C.prototype.registerCsiHandler=function(T,L){return this._inputHandler.registerCsiHandler(T,L)},C.prototype.registerOscHandler=function(T,L){return this._inputHandler.registerOscHandler(T,L)},C.prototype._setup=function(){this.optionsService.options.windowsMode&&this._enableWindowsMode()},C.prototype.reset=function(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()},C.prototype._updateOptions=function(T){var L;switch(T){case"scrollback":this.buffers.resize(this.cols,this.rows);break;case"windowsMode":this.optionsService.options.windowsMode?this._enableWindowsMode():(null===(L=this._windowsMode)||void 0===L||L.dispose(),this._windowsMode=void 0)}},C.prototype._enableWindowsMode=function(){var T=this;if(!this._windowsMode){var L=[];L.push(this.onLineFeed(l.updateWindowsModeWrappedState.bind(null,this._bufferService))),L.push(this.registerCsiHandler({final:"H"},function(){return l.updateWindowsModeWrappedState(T._bufferService),!1})),this._windowsMode={dispose:function(){for(var M=0,k=L;M<k.length;M++)k[M].dispose()}}}},C}(d.Disposable);a.CoreTerminal=y},8460:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.forwardEvent=a.EventEmitter=void 0;var m=function(){function h(){this._listeners=[],this._disposed=!1}return Object.defineProperty(h.prototype,"event",{get:function(){var _=this;return this._event||(this._event=function(d){return _._listeners.push(d),{dispose:function(){if(!_._disposed)for(var f=0;f<_._listeners.length;f++)if(_._listeners[f]===d)return void _._listeners.splice(f,1)}}}),this._event},enumerable:!1,configurable:!0}),h.prototype.fire=function(_,d){for(var f=[],e=0;e<this._listeners.length;e++)f.push(this._listeners[e]);for(e=0;e<f.length;e++)f[e].call(void 0,_,d)},h.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},h}();a.EventEmitter=m,a.forwardEvent=function(h,_){return h(function(d){return _.fire(d)})}},5435:function(F,a,m){var h,_=this&&this.__extends||(h=function(L,M){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,E){k.__proto__=E}||function(k,E){for(var H in E)Object.prototype.hasOwnProperty.call(E,H)&&(k[H]=E[H])})(L,M)},function(L,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function k(){this.constructor=L}h(L,M),L.prototype=null===M?Object.create(M):(k.prototype=M.prototype,new k)});Object.defineProperty(a,"__esModule",{value:!0}),a.InputHandler=a.WindowsOptionsReportType=void 0;var d,L,f=m(2584),e=m(7116),v=m(2015),n=m(844),s=m(8273),u=m(482),o=m(8437),r=m(8460),t=m(643),i=m(511),c=m(3734),l=m(2585),p=m(6242),g=m(6351),w={"(":0,")":1,"*":2,"+":3,"-":1,".":2},y=131072;function S(L,M){if(L>24)return M.setWinLines||!1;switch(L){case 1:return!!M.restoreWin;case 2:return!!M.minimizeWin;case 3:return!!M.setWinPosition;case 4:return!!M.setWinSizePixels;case 5:return!!M.raiseWin;case 6:return!!M.lowerWin;case 7:return!!M.refreshWin;case 8:return!!M.setWinSizeChars;case 9:return!!M.maximizeWin;case 10:return!!M.fullscreenWin;case 11:return!!M.getWinState;case 13:return!!M.getWinPosition;case 14:return!!M.getWinSizePixels;case 15:return!!M.getScreenSizePixels;case 16:return!!M.getCellSizePixels;case 18:return!!M.getWinSizeChars;case 19:return!!M.getScreenSizeChars;case 20:return!!M.getIconTitle;case 21:return!!M.getWinTitle;case 22:return!!M.pushTitle;case 23:return!!M.popTitle;case 24:return!!M.setWinLines}return!1}(L=d=a.WindowsOptionsReportType||(a.WindowsOptionsReportType={}))[L.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",L[L.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS";var C=function(){function L(M,k,E,H){this._bufferService=M,this._coreService=k,this._logService=E,this._optionsService=H,this._data=new Uint32Array(0)}return L.prototype.hook=function(M){this._data=new Uint32Array(0)},L.prototype.put=function(M,k,E){this._data=s.concat(this._data,M.subarray(k,E))},L.prototype.unhook=function(M){if(!M)return this._data=new Uint32Array(0),!0;var k=u.utf32ToString(this._data);switch(this._data=new Uint32Array(0),k){case'"q':this._coreService.triggerDataEvent(f.C0.ESC+'P1$r0"q'+f.C0.ESC+"\\");break;case'"p':this._coreService.triggerDataEvent(f.C0.ESC+'P1$r61;1"p'+f.C0.ESC+"\\");break;case"r":this._coreService.triggerDataEvent(f.C0.ESC+"P1$r"+(this._bufferService.buffer.scrollTop+1)+";"+(this._bufferService.buffer.scrollBottom+1)+"r"+f.C0.ESC+"\\");break;case"m":this._coreService.triggerDataEvent(f.C0.ESC+"P1$r0m"+f.C0.ESC+"\\");break;case" q":var H={block:2,underline:4,bar:6}[this._optionsService.options.cursorStyle];this._coreService.triggerDataEvent(f.C0.ESC+"P1$r"+(H-=this._optionsService.options.cursorBlink?1:0)+" q"+f.C0.ESC+"\\");break;default:this._logService.debug("Unknown DCS $q %s",k),this._coreService.triggerDataEvent(f.C0.ESC+"P0$r"+f.C0.ESC+"\\")}return!0},L}(),T=function(L){function M(k,E,H,D,Z,G,N,V,$){void 0===$&&($=new v.EscapeSequenceParser);var x=L.call(this)||this;x._bufferService=k,x._charsetService=E,x._coreService=H,x._dirtyRowService=D,x._logService=Z,x._optionsService=G,x._coreMouseService=N,x._unicodeService=V,x._parser=$,x._parseBuffer=new Uint32Array(4096),x._stringDecoder=new u.StringToUtf32,x._utf8Decoder=new u.Utf8ToUtf32,x._workCell=new i.CellData,x._windowTitle="",x._iconName="",x._windowTitleStack=[],x._iconNameStack=[],x._curAttrData=o.DEFAULT_ATTR_DATA.clone(),x._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone(),x._onRequestBell=new r.EventEmitter,x._onRequestRefreshRows=new r.EventEmitter,x._onRequestReset=new r.EventEmitter,x._onRequestSyncScrollBar=new r.EventEmitter,x._onRequestWindowsOptionsReport=new r.EventEmitter,x._onA11yChar=new r.EventEmitter,x._onA11yTab=new r.EventEmitter,x._onCursorMove=new r.EventEmitter,x._onLineFeed=new r.EventEmitter,x._onScroll=new r.EventEmitter,x._onTitleChange=new r.EventEmitter,x._onAnsiColorChange=new r.EventEmitter,x._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},x.register(x._parser),x._activeBuffer=x._bufferService.buffer,x.register(x._bufferService.buffers.onBufferActivate(function(I){return x._activeBuffer=I.activeBuffer})),x._parser.setCsiHandlerFallback(function(I,Q){x._logService.debug("Unknown CSI code: ",{identifier:x._parser.identToString(I),params:Q.toArray()})}),x._parser.setEscHandlerFallback(function(I){x._logService.debug("Unknown ESC code: ",{identifier:x._parser.identToString(I)})}),x._parser.setExecuteHandlerFallback(function(I){x._logService.debug("Unknown EXECUTE code: ",{code:I})}),x._parser.setOscHandlerFallback(function(I,Q,X){x._logService.debug("Unknown OSC code: ",{identifier:I,action:Q,data:X})}),x._parser.setDcsHandlerFallback(function(I,Q,X){"HOOK"===Q&&(X=X.toArray()),x._logService.debug("Unknown DCS code: ",{identifier:x._parser.identToString(I),action:Q,payload:X})}),x._parser.setPrintHandler(function(I,Q,X){return x.print(I,Q,X)}),x._parser.registerCsiHandler({final:"@"},function(I){return x.insertChars(I)}),x._parser.registerCsiHandler({intermediates:" ",final:"@"},function(I){return x.scrollLeft(I)}),x._parser.registerCsiHandler({final:"A"},function(I){return x.cursorUp(I)}),x._parser.registerCsiHandler({intermediates:" ",final:"A"},function(I){return x.scrollRight(I)}),x._parser.registerCsiHandler({final:"B"},function(I){return x.cursorDown(I)}),x._parser.registerCsiHandler({final:"C"},function(I){return x.cursorForward(I)}),x._parser.registerCsiHandler({final:"D"},function(I){return x.cursorBackward(I)}),x._parser.registerCsiHandler({final:"E"},function(I){return x.cursorNextLine(I)}),x._parser.registerCsiHandler({final:"F"},function(I){return x.cursorPrecedingLine(I)}),x._parser.registerCsiHandler({final:"G"},function(I){return x.cursorCharAbsolute(I)}),x._parser.registerCsiHandler({final:"H"},function(I){return x.cursorPosition(I)}),x._parser.registerCsiHandler({final:"I"},function(I){return x.cursorForwardTab(I)}),x._parser.registerCsiHandler({final:"J"},function(I){return x.eraseInDisplay(I)}),x._parser.registerCsiHandler({prefix:"?",final:"J"},function(I){return x.eraseInDisplay(I)}),x._parser.registerCsiHandler({final:"K"},function(I){return x.eraseInLine(I)}),x._parser.registerCsiHandler({prefix:"?",final:"K"},function(I){return x.eraseInLine(I)}),x._parser.registerCsiHandler({final:"L"},function(I){return x.insertLines(I)}),x._parser.registerCsiHandler({final:"M"},function(I){return x.deleteLines(I)}),x._parser.registerCsiHandler({final:"P"},function(I){return x.deleteChars(I)}),x._parser.registerCsiHandler({final:"S"},function(I){return x.scrollUp(I)}),x._parser.registerCsiHandler({final:"T"},function(I){return x.scrollDown(I)}),x._parser.registerCsiHandler({final:"X"},function(I){return x.eraseChars(I)}),x._parser.registerCsiHandler({final:"Z"},function(I){return x.cursorBackwardTab(I)}),x._parser.registerCsiHandler({final:"`"},function(I){return x.charPosAbsolute(I)}),x._parser.registerCsiHandler({final:"a"},function(I){return x.hPositionRelative(I)}),x._parser.registerCsiHandler({final:"b"},function(I){return x.repeatPrecedingCharacter(I)}),x._parser.registerCsiHandler({final:"c"},function(I){return x.sendDeviceAttributesPrimary(I)}),x._parser.registerCsiHandler({prefix:">",final:"c"},function(I){return x.sendDeviceAttributesSecondary(I)}),x._parser.registerCsiHandler({final:"d"},function(I){return x.linePosAbsolute(I)}),x._parser.registerCsiHandler({final:"e"},function(I){return x.vPositionRelative(I)}),x._parser.registerCsiHandler({final:"f"},function(I){return x.hVPosition(I)}),x._parser.registerCsiHandler({final:"g"},function(I){return x.tabClear(I)}),x._parser.registerCsiHandler({final:"h"},function(I){return x.setMode(I)}),x._parser.registerCsiHandler({prefix:"?",final:"h"},function(I){return x.setModePrivate(I)}),x._parser.registerCsiHandler({final:"l"},function(I){return x.resetMode(I)}),x._parser.registerCsiHandler({prefix:"?",final:"l"},function(I){return x.resetModePrivate(I)}),x._parser.registerCsiHandler({final:"m"},function(I){return x.charAttributes(I)}),x._parser.registerCsiHandler({final:"n"},function(I){return x.deviceStatus(I)}),x._parser.registerCsiHandler({prefix:"?",final:"n"},function(I){return x.deviceStatusPrivate(I)}),x._parser.registerCsiHandler({intermediates:"!",final:"p"},function(I){return x.softReset(I)}),x._parser.registerCsiHandler({intermediates:" ",final:"q"},function(I){return x.setCursorStyle(I)}),x._parser.registerCsiHandler({final:"r"},function(I){return x.setScrollRegion(I)}),x._parser.registerCsiHandler({final:"s"},function(I){return x.saveCursor(I)}),x._parser.registerCsiHandler({final:"t"},function(I){return x.windowOptions(I)}),x._parser.registerCsiHandler({final:"u"},function(I){return x.restoreCursor(I)}),x._parser.registerCsiHandler({intermediates:"'",final:"}"},function(I){return x.insertColumns(I)}),x._parser.registerCsiHandler({intermediates:"'",final:"~"},function(I){return x.deleteColumns(I)}),x._parser.setExecuteHandler(f.C0.BEL,function(){return x.bell()}),x._parser.setExecuteHandler(f.C0.LF,function(){return x.lineFeed()}),x._parser.setExecuteHandler(f.C0.VT,function(){return x.lineFeed()}),x._parser.setExecuteHandler(f.C0.FF,function(){return x.lineFeed()}),x._parser.setExecuteHandler(f.C0.CR,function(){return x.carriageReturn()}),x._parser.setExecuteHandler(f.C0.BS,function(){return x.backspace()}),x._parser.setExecuteHandler(f.C0.HT,function(){return x.tab()}),x._parser.setExecuteHandler(f.C0.SO,function(){return x.shiftOut()}),x._parser.setExecuteHandler(f.C0.SI,function(){return x.shiftIn()}),x._parser.setExecuteHandler(f.C1.IND,function(){return x.index()}),x._parser.setExecuteHandler(f.C1.NEL,function(){return x.nextLine()}),x._parser.setExecuteHandler(f.C1.HTS,function(){return x.tabSet()}),x._parser.registerOscHandler(0,new p.OscHandler(function(I){return x.setTitle(I),x.setIconName(I),!0})),x._parser.registerOscHandler(1,new p.OscHandler(function(I){return x.setIconName(I)})),x._parser.registerOscHandler(2,new p.OscHandler(function(I){return x.setTitle(I)})),x._parser.registerOscHandler(4,new p.OscHandler(function(I){return x.setAnsiColor(I)})),x._parser.registerEscHandler({final:"7"},function(){return x.saveCursor()}),x._parser.registerEscHandler({final:"8"},function(){return x.restoreCursor()}),x._parser.registerEscHandler({final:"D"},function(){return x.index()}),x._parser.registerEscHandler({final:"E"},function(){return x.nextLine()}),x._parser.registerEscHandler({final:"H"},function(){return x.tabSet()}),x._parser.registerEscHandler({final:"M"},function(){return x.reverseIndex()}),x._parser.registerEscHandler({final:"="},function(){return x.keypadApplicationMode()}),x._parser.registerEscHandler({final:">"},function(){return x.keypadNumericMode()}),x._parser.registerEscHandler({final:"c"},function(){return x.fullReset()}),x._parser.registerEscHandler({final:"n"},function(){return x.setgLevel(2)}),x._parser.registerEscHandler({final:"o"},function(){return x.setgLevel(3)}),x._parser.registerEscHandler({final:"|"},function(){return x.setgLevel(3)}),x._parser.registerEscHandler({final:"}"},function(){return x.setgLevel(2)}),x._parser.registerEscHandler({final:"~"},function(){return x.setgLevel(1)}),x._parser.registerEscHandler({intermediates:"%",final:"@"},function(){return x.selectDefaultCharset()}),x._parser.registerEscHandler({intermediates:"%",final:"G"},function(){return x.selectDefaultCharset()});var R=function(I){B._parser.registerEscHandler({intermediates:"(",final:I},function(){return x.selectCharset("("+I)}),B._parser.registerEscHandler({intermediates:")",final:I},function(){return x.selectCharset(")"+I)}),B._parser.registerEscHandler({intermediates:"*",final:I},function(){return x.selectCharset("*"+I)}),B._parser.registerEscHandler({intermediates:"+",final:I},function(){return x.selectCharset("+"+I)}),B._parser.registerEscHandler({intermediates:"-",final:I},function(){return x.selectCharset("-"+I)}),B._parser.registerEscHandler({intermediates:".",final:I},function(){return x.selectCharset("."+I)}),B._parser.registerEscHandler({intermediates:"/",final:I},function(){return x.selectCharset("/"+I)})},B=this;for(var q in e.CHARSETS)R(q);return x._parser.registerEscHandler({intermediates:"#",final:"8"},function(){return x.screenAlignmentPattern()}),x._parser.setErrorHandler(function(I){return x._logService.error("Parsing error: ",I),I}),x._parser.registerDcsHandler({intermediates:"$",final:"q"},new C(x._bufferService,x._coreService,x._logService,x._optionsService)),x}return _(M,L),Object.defineProperty(M.prototype,"onRequestBell",{get:function(){return this._onRequestBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onRequestReset",{get:function(){return this._onRequestReset.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onRequestSyncScrollBar",{get:function(){return this._onRequestSyncScrollBar.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onRequestWindowsOptionsReport",{get:function(){return this._onRequestWindowsOptionsReport.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onA11yChar",{get:function(){return this._onA11yChar.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onA11yTab",{get:function(){return this._onA11yTab.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onAnsiColorChange",{get:function(){return this._onAnsiColorChange.event},enumerable:!1,configurable:!0}),M.prototype.dispose=function(){L.prototype.dispose.call(this)},M.prototype._preserveStack=function(k,E,H,D){this._parseStack.paused=!0,this._parseStack.cursorStartX=k,this._parseStack.cursorStartY=E,this._parseStack.decodedLength=H,this._parseStack.position=D},M.prototype._logSlowResolvingAsync=function(k){this._logService.logLevel<=l.LogLevelEnum.WARN&&Promise.race([k,new Promise(function(E,H){return setTimeout(function(){return H("#SLOW_TIMEOUT")},5e3)})]).catch(function(E){if("#SLOW_TIMEOUT"!==E)throw E;console.warn("async parser handler taking longer than 5000 ms")})},M.prototype.parse=function(k,E){var H,D=this._activeBuffer.x,Z=this._activeBuffer.y,G=0,N=this._parseStack.paused;if(N){if(H=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,E))return this._logSlowResolvingAsync(H),H;D=this._parseStack.cursorStartX,Z=this._parseStack.cursorStartY,this._parseStack.paused=!1,k.length>y&&(G=this._parseStack.position+y)}if(this._logService.debug("parsing data",k),this._parseBuffer.length<k.length&&this._parseBuffer.length<y&&(this._parseBuffer=new Uint32Array(Math.min(k.length,y))),N||this._dirtyRowService.clearRange(),k.length>y)for(var V=G;V<k.length;V+=y){var $=V+y<k.length?V+y:k.length,x="string"==typeof k?this._stringDecoder.decode(k.substring(V,$),this._parseBuffer):this._utf8Decoder.decode(k.subarray(V,$),this._parseBuffer);if(H=this._parser.parse(this._parseBuffer,x))return this._preserveStack(D,Z,x,V),this._logSlowResolvingAsync(H),H}else if(!N&&(x="string"==typeof k?this._stringDecoder.decode(k,this._parseBuffer):this._utf8Decoder.decode(k,this._parseBuffer),H=this._parser.parse(this._parseBuffer,x)))return this._preserveStack(D,Z,x,0),this._logSlowResolvingAsync(H),H;this._activeBuffer.x===D&&this._activeBuffer.y===Z||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowService.start,this._dirtyRowService.end)},M.prototype.print=function(k,E,H){var D,Z,G=this._charsetService.charset,N=this._optionsService.options.screenReaderMode,V=this._bufferService.cols,$=this._coreService.decPrivateModes.wraparound,x=this._coreService.modes.insertMode,R=this._curAttrData,B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowService.markDirty(this._activeBuffer.y),this._activeBuffer.x&&H-E>0&&2===B.getWidth(this._activeBuffer.x-1)&&B.setCellFromCodePoint(this._activeBuffer.x-1,0,1,R.fg,R.bg,R.extended);for(var q=E;q<H;++q){if(Z=this._unicodeService.wcwidth(D=k[q]),D<127&&G){var I=G[String.fromCharCode(D)];I&&(D=I.charCodeAt(0))}if(N&&this._onA11yChar.fire(u.stringFromCodePoint(D)),Z||!this._activeBuffer.x){if(this._activeBuffer.x+Z-1>=V)if($){for(;this._activeBuffer.x<V;)B.setCellFromCodePoint(this._activeBuffer.x++,0,1,R.fg,R.bg,R.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=V-1,2===Z)continue;if(x&&(B.insertCells(this._activeBuffer.x,Z,this._activeBuffer.getNullCell(R),R),2===B.getWidth(V-1)&&B.setCellFromCodePoint(V-1,t.NULL_CELL_CODE,t.NULL_CELL_WIDTH,R.fg,R.bg,R.extended)),B.setCellFromCodePoint(this._activeBuffer.x++,D,Z,R.fg,R.bg,R.extended),Z>0)for(;--Z;)B.setCellFromCodePoint(this._activeBuffer.x++,0,0,R.fg,R.bg,R.extended)}else B.getWidth(this._activeBuffer.x-1)?B.addCodepointToCell(this._activeBuffer.x-1,D):B.addCodepointToCell(this._activeBuffer.x-2,D)}H-E>0&&(B.loadCell(this._activeBuffer.x-1,this._workCell),this._parser.precedingCodepoint=2===this._workCell.getWidth()||this._workCell.getCode()>65535?0:this._workCell.isCombined()?this._workCell.getChars().charCodeAt(0):this._workCell.content),this._activeBuffer.x<V&&H-E>0&&0===B.getWidth(this._activeBuffer.x)&&!B.hasContent(this._activeBuffer.x)&&B.setCellFromCodePoint(this._activeBuffer.x,0,1,R.fg,R.bg,R.extended),this._dirtyRowService.markDirty(this._activeBuffer.y)},M.prototype.registerCsiHandler=function(k,E){var H=this;return this._parser.registerCsiHandler(k,"t"!==k.final||k.prefix||k.intermediates?E:function(D){return!S(D.params[0],H._optionsService.options.windowOptions)||E(D)})},M.prototype.registerDcsHandler=function(k,E){return this._parser.registerDcsHandler(k,new g.DcsHandler(E))},M.prototype.registerEscHandler=function(k,E){return this._parser.registerEscHandler(k,E)},M.prototype.registerOscHandler=function(k,E){return this._parser.registerOscHandler(k,new p.OscHandler(E))},M.prototype.bell=function(){return this._onRequestBell.fire(),!0},M.prototype.lineFeed=function(){return this._dirtyRowService.markDirty(this._activeBuffer.y),this._optionsService.options.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowService.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0},M.prototype.carriageReturn=function(){return this._activeBuffer.x=0,!0},M.prototype.backspace=function(){var k;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(0===this._activeBuffer.x&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(null===(k=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))||void 0===k?void 0:k.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;var E=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);E.hasWidth(this._activeBuffer.x)&&!E.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0},M.prototype.tab=function(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;var k=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.options.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-k),!0},M.prototype.shiftOut=function(){return this._charsetService.setgLevel(1),!0},M.prototype.shiftIn=function(){return this._charsetService.setgLevel(0),!0},M.prototype._restrictCursor=function(k){void 0===k&&(k=this._bufferService.cols-1),this._activeBuffer.x=Math.min(k,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowService.markDirty(this._activeBuffer.y)},M.prototype._setCursor=function(k,E){this._dirtyRowService.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=k,this._activeBuffer.y=this._activeBuffer.scrollTop+E):(this._activeBuffer.x=k,this._activeBuffer.y=E),this._restrictCursor(),this._dirtyRowService.markDirty(this._activeBuffer.y)},M.prototype._moveCursor=function(k,E){this._restrictCursor(),this._setCursor(this._activeBuffer.x+k,this._activeBuffer.y+E)},M.prototype.cursorUp=function(k){var E=this._activeBuffer.y-this._activeBuffer.scrollTop;return this._moveCursor(0,E>=0?-Math.min(E,k.params[0]||1):-(k.params[0]||1)),!0},M.prototype.cursorDown=function(k){var E=this._activeBuffer.scrollBottom-this._activeBuffer.y;return this._moveCursor(0,E>=0?Math.min(E,k.params[0]||1):k.params[0]||1),!0},M.prototype.cursorForward=function(k){return this._moveCursor(k.params[0]||1,0),!0},M.prototype.cursorBackward=function(k){return this._moveCursor(-(k.params[0]||1),0),!0},M.prototype.cursorNextLine=function(k){return this.cursorDown(k),this._activeBuffer.x=0,!0},M.prototype.cursorPrecedingLine=function(k){return this.cursorUp(k),this._activeBuffer.x=0,!0},M.prototype.cursorCharAbsolute=function(k){return this._setCursor((k.params[0]||1)-1,this._activeBuffer.y),!0},M.prototype.cursorPosition=function(k){return this._setCursor(k.length>=2?(k.params[1]||1)-1:0,(k.params[0]||1)-1),!0},M.prototype.charPosAbsolute=function(k){return this._setCursor((k.params[0]||1)-1,this._activeBuffer.y),!0},M.prototype.hPositionRelative=function(k){return this._moveCursor(k.params[0]||1,0),!0},M.prototype.linePosAbsolute=function(k){return this._setCursor(this._activeBuffer.x,(k.params[0]||1)-1),!0},M.prototype.vPositionRelative=function(k){return this._moveCursor(0,k.params[0]||1),!0},M.prototype.hVPosition=function(k){return this.cursorPosition(k),!0},M.prototype.tabClear=function(k){var E=k.params[0];return 0===E?delete this._activeBuffer.tabs[this._activeBuffer.x]:3===E&&(this._activeBuffer.tabs={}),!0},M.prototype.cursorForwardTab=function(k){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var E=k.params[0]||1;E--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0},M.prototype.cursorBackwardTab=function(k){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var E=k.params[0]||1;E--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0},M.prototype._eraseInBufferLine=function(k,E,H,D){void 0===D&&(D=!1);var Z=this._activeBuffer.lines.get(this._activeBuffer.ybase+k);Z.replaceCells(E,H,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),D&&(Z.isWrapped=!1)},M.prototype._resetBufferLine=function(k){var E=this._activeBuffer.lines.get(this._activeBuffer.ybase+k);E.fill(this._activeBuffer.getNullCell(this._eraseAttrData())),E.isWrapped=!1},M.prototype.eraseInDisplay=function(k){var E;switch(this._restrictCursor(this._bufferService.cols),k.params[0]){case 0:for(this._dirtyRowService.markDirty(E=this._activeBuffer.y),this._eraseInBufferLine(E++,this._activeBuffer.x,this._bufferService.cols,0===this._activeBuffer.x);E<this._bufferService.rows;E++)this._resetBufferLine(E);this._dirtyRowService.markDirty(E);break;case 1:for(this._dirtyRowService.markDirty(E=this._activeBuffer.y),this._eraseInBufferLine(E,0,this._activeBuffer.x+1,!0),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(E+1).isWrapped=!1);E--;)this._resetBufferLine(E);this._dirtyRowService.markDirty(0);break;case 2:for(this._dirtyRowService.markDirty((E=this._bufferService.rows)-1);E--;)this._resetBufferLine(E);this._dirtyRowService.markDirty(0);break;case 3:var H=this._activeBuffer.lines.length-this._bufferService.rows;H>0&&(this._activeBuffer.lines.trimStart(H),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-H,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-H,0),this._onScroll.fire(0))}return!0},M.prototype.eraseInLine=function(k){switch(this._restrictCursor(this._bufferService.cols),k.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols)}return this._dirtyRowService.markDirty(this._activeBuffer.y),!0},M.prototype.insertLines=function(k){this._restrictCursor();var E=k.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var H=this._activeBuffer.ybase+this._activeBuffer.y,Z=this._bufferService.rows-1+this._activeBuffer.ybase-(this._bufferService.rows-1-this._activeBuffer.scrollBottom)+1;E--;)this._activeBuffer.lines.splice(Z-1,1),this._activeBuffer.lines.splice(H,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},M.prototype.deleteLines=function(k){this._restrictCursor();var E=k.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;var H,D=this._activeBuffer.ybase+this._activeBuffer.y;for(H=this._bufferService.rows-1+this._activeBuffer.ybase-(H=this._bufferService.rows-1-this._activeBuffer.scrollBottom);E--;)this._activeBuffer.lines.splice(D,1),this._activeBuffer.lines.splice(H,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},M.prototype.insertChars=function(k){this._restrictCursor();var E=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return E&&(E.insertCells(this._activeBuffer.x,k.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},M.prototype.deleteChars=function(k){this._restrictCursor();var E=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return E&&(E.deleteCells(this._activeBuffer.x,k.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},M.prototype.scrollUp=function(k){for(var E=k.params[0]||1;E--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},M.prototype.scrollDown=function(k){for(var E=k.params[0]||1;E--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(o.DEFAULT_ATTR_DATA));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},M.prototype.scrollLeft=function(k){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var E=k.params[0]||1,H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){var D=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);D.deleteCells(0,E,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),D.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},M.prototype.scrollRight=function(k){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var E=k.params[0]||1,H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){var D=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);D.insertCells(0,E,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),D.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},M.prototype.insertColumns=function(k){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var E=k.params[0]||1,H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){var D=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);D.insertCells(this._activeBuffer.x,E,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),D.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},M.prototype.deleteColumns=function(k){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var E=k.params[0]||1,H=this._activeBuffer.scrollTop;H<=this._activeBuffer.scrollBottom;++H){var D=this._activeBuffer.lines.get(this._activeBuffer.ybase+H);D.deleteCells(this._activeBuffer.x,E,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),D.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},M.prototype.eraseChars=function(k){this._restrictCursor();var E=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return E&&(E.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(k.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},M.prototype.repeatPrecedingCharacter=function(k){if(!this._parser.precedingCodepoint)return!0;for(var E=k.params[0]||1,H=new Uint32Array(E),D=0;D<E;++D)H[D]=this._parser.precedingCodepoint;return this.print(H,0,H.length),!0},M.prototype.sendDeviceAttributesPrimary=function(k){return k.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(f.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(f.C0.ESC+"[?6c")),!0},M.prototype.sendDeviceAttributesSecondary=function(k){return k.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(f.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(f.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(k.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(f.C0.ESC+"[>83;40003;0c")),!0},M.prototype._is=function(k){return 0===(this._optionsService.options.termName+"").indexOf(k)},M.prototype.setMode=function(k){for(var E=0;E<k.length;E++)4===k.params[E]&&(this._coreService.modes.insertMode=!0);return!0},M.prototype.setModePrivate=function(k){for(var E=0;E<k.length;E++)switch(k.params[E]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,e.DEFAULT_CHARSET),this._charsetService.setgCharset(1,e.DEFAULT_CHARSET),this._charsetService.setgCharset(2,e.DEFAULT_CHARSET),this._charsetService.setgCharset(3,e.DEFAULT_CHARSET);break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0;break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0},M.prototype.resetMode=function(k){for(var E=0;E<k.length;E++)4===k.params[E]&&(this._coreService.modes.insertMode=!1);return!0},M.prototype.resetModePrivate=function(k){for(var E=0;E<k.length;E++)switch(k.params[E]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),1049===k.params[E]&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0},M.prototype._updateAttrColor=function(k,E,H,D,Z){return 2===E?(k|=50331648,k&=-16777216,k|=c.AttributeData.fromColorRGB([H,D,Z])):5===E&&(k&=-50331904,k|=33554432|255&H),k},M.prototype._extractColor=function(k,E,H){var D=[0,0,-1,0,0,0],Z=0,G=0;do{if(D[G+Z]=k.params[E+G],k.hasSubParams(E+G)){var N=k.getSubParams(E+G),V=0;do{5===D[1]&&(Z=1),D[G+V+1+Z]=N[V]}while(++V<N.length&&V+G+1+Z<D.length);break}if(5===D[1]&&G+Z>=2||2===D[1]&&G+Z>=5)break;D[1]&&(Z=1)}while(++G+E<k.length&&G+Z<D.length);for(V=2;V<D.length;++V)-1===D[V]&&(D[V]=0);switch(D[0]){case 38:H.fg=this._updateAttrColor(H.fg,D[1],D[3],D[4],D[5]);break;case 48:H.bg=this._updateAttrColor(H.bg,D[1],D[3],D[4],D[5]);break;case 58:H.extended=H.extended.clone(),H.extended.underlineColor=this._updateAttrColor(H.extended.underlineColor,D[1],D[3],D[4],D[5])}return G},M.prototype._processUnderline=function(k,E){E.extended=E.extended.clone(),(!~k||k>5)&&(k=1),E.extended.underlineStyle=k,E.fg|=268435456,0===k&&(E.fg&=-268435457),E.updateExtended()},M.prototype.charAttributes=function(k){if(1===k.length&&0===k.params[0])return this._curAttrData.fg=o.DEFAULT_ATTR_DATA.fg,this._curAttrData.bg=o.DEFAULT_ATTR_DATA.bg,!0;for(var E,H=k.length,D=this._curAttrData,Z=0;Z<H;Z++)(E=k.params[Z])>=30&&E<=37?(D.fg&=-50331904,D.fg|=16777216|E-30):E>=40&&E<=47?(D.bg&=-50331904,D.bg|=16777216|E-40):E>=90&&E<=97?(D.fg&=-50331904,D.fg|=16777224|E-90):E>=100&&E<=107?(D.bg&=-50331904,D.bg|=16777224|E-100):0===E?(D.fg=o.DEFAULT_ATTR_DATA.fg,D.bg=o.DEFAULT_ATTR_DATA.bg):1===E?D.fg|=134217728:3===E?D.bg|=67108864:4===E?(D.fg|=268435456,this._processUnderline(k.hasSubParams(Z)?k.getSubParams(Z)[0]:1,D)):5===E?D.fg|=536870912:7===E?D.fg|=67108864:8===E?D.fg|=1073741824:9===E?D.fg|=2147483648:2===E?D.bg|=134217728:21===E?this._processUnderline(2,D):22===E?(D.fg&=-134217729,D.bg&=-134217729):23===E?D.bg&=-67108865:24===E?D.fg&=-268435457:25===E?D.fg&=-536870913:27===E?D.fg&=-67108865:28===E?D.fg&=-1073741825:29===E?D.fg&=2147483647:39===E?(D.fg&=-67108864,D.fg|=16777215&o.DEFAULT_ATTR_DATA.fg):49===E?(D.bg&=-67108864,D.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):38===E||48===E||58===E?Z+=this._extractColor(k,Z,D):59===E?(D.extended=D.extended.clone(),D.extended.underlineColor=-1,D.updateExtended()):100===E?(D.fg&=-67108864,D.fg|=16777215&o.DEFAULT_ATTR_DATA.fg,D.bg&=-67108864,D.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",E);return!0},M.prototype.deviceStatus=function(k){switch(k.params[0]){case 5:this._coreService.triggerDataEvent(f.C0.ESC+"[0n");break;case 6:this._coreService.triggerDataEvent(f.C0.ESC+"["+(this._activeBuffer.y+1)+";"+(this._activeBuffer.x+1)+"R")}return!0},M.prototype.deviceStatusPrivate=function(k){return 6===k.params[0]&&this._coreService.triggerDataEvent(f.C0.ESC+"[?"+(this._activeBuffer.y+1)+";"+(this._activeBuffer.x+1)+"R"),!0},M.prototype.softReset=function(k){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0},M.prototype.setCursorStyle=function(k){var E=k.params[0]||1;switch(E){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}return this._optionsService.options.cursorBlink=E%2==1,!0},M.prototype.setScrollRegion=function(k){var E,H=k.params[0]||1;return(k.length<2||(E=k.params[1])>this._bufferService.rows||0===E)&&(E=this._bufferService.rows),E>H&&(this._activeBuffer.scrollTop=H-1,this._activeBuffer.scrollBottom=E-1,this._setCursor(0,0)),!0},M.prototype.windowOptions=function(k){if(!S(k.params[0],this._optionsService.options.windowOptions))return!0;var E=k.length>1?k.params[1]:0;switch(k.params[0]){case 14:2!==E&&this._onRequestWindowsOptionsReport.fire(d.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(d.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(f.C0.ESC+"[8;"+this._bufferService.rows+";"+this._bufferService.cols+"t");break;case 22:0!==E&&2!==E||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),0!==E&&1!==E||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:0!==E&&2!==E||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),0!==E&&1!==E||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0},M.prototype.saveCursor=function(k){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0},M.prototype.restoreCursor=function(k){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0},M.prototype.setTitle=function(k){return this._windowTitle=k,this._onTitleChange.fire(k),!0},M.prototype.setIconName=function(k){return this._iconName=k,!0},M.prototype._parseAnsiColorChange=function(k){for(var E,H={colors:[]},D=/(\d+);rgb:([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})/gi;null!==(E=D.exec(k));)H.colors.push({colorIndex:parseInt(E[1]),red:parseInt(E[2],16),green:parseInt(E[3],16),blue:parseInt(E[4],16)});return 0===H.colors.length?null:H},M.prototype.setAnsiColor=function(k){var E=this._parseAnsiColorChange(k);return E?this._onAnsiColorChange.fire(E):this._logService.warn("Expected format <num>;rgb:<rr>/<gg>/<bb> but got data: "+k),!0},M.prototype.nextLine=function(){return this._activeBuffer.x=0,this.index(),!0},M.prototype.keypadApplicationMode=function(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0},M.prototype.keypadNumericMode=function(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0},M.prototype.selectDefaultCharset=function(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,e.DEFAULT_CHARSET),!0},M.prototype.selectCharset=function(k){return 2!==k.length?(this.selectDefaultCharset(),!0):("/"===k[0]||this._charsetService.setgCharset(w[k[0]],e.CHARSETS[k[1]]||e.DEFAULT_CHARSET),!0)},M.prototype.index=function(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0},M.prototype.tabSet=function(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0},M.prototype.reverseIndex=function(){return this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop?(this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)):(this._activeBuffer.y--,this._restrictCursor()),!0},M.prototype.fullReset=function(){return this._parser.reset(),this._onRequestReset.fire(),!0},M.prototype.reset=function(){this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone()},M.prototype._eraseAttrData=function(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal},M.prototype.setgLevel=function(k){return this._charsetService.setgLevel(k),!0},M.prototype.screenAlignmentPattern=function(){var k=new i.CellData;k.content=1<<22|"E".charCodeAt(0),k.fg=this._curAttrData.fg,k.bg=this._curAttrData.bg,this._setCursor(0,0);for(var E=0;E<this._bufferService.rows;++E){var D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y+E);D&&(D.fill(k),D.isWrapped=!1)}return this._dirtyRowService.markAllDirty(),this._setCursor(0,0),!0},M}(n.Disposable);a.InputHandler=T},844:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getDisposeArrayDisposable=a.disposeArray=a.Disposable=void 0;var m=function(){function _(){this._disposables=[],this._isDisposed=!1}return _.prototype.dispose=function(){this._isDisposed=!0;for(var d=0,f=this._disposables;d<f.length;d++)f[d].dispose();this._disposables.length=0},_.prototype.register=function(d){return this._disposables.push(d),d},_.prototype.unregister=function(d){var f=this._disposables.indexOf(d);-1!==f&&this._disposables.splice(f,1)},_}();function h(_){for(var d=0,f=_;d<f.length;d++)f[d].dispose();_.length=0}a.Disposable=m,a.disposeArray=h,a.getDisposeArrayDisposable=function(_){return{dispose:function(){return h(_)}}}},6114:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.isLinux=a.isWindows=a.isIphone=a.isIpad=a.isMac=a.isSafari=a.isFirefox=void 0;var m=typeof navigator>"u",h=m?"node":navigator.userAgent,_=m?"node":navigator.platform;a.isFirefox=h.includes("Firefox"),a.isSafari=/^((?!chrome|android).)*safari/i.test(h),a.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(_),a.isIpad="iPad"===_,a.isIphone="iPhone"===_,a.isWindows=["Windows","Win16","Win32","WinCE"].includes(_),a.isLinux=_.indexOf("Linux")>=0},8273:(F,a)=>{function m(h,_,d,f){if(void 0===d&&(d=0),void 0===f&&(f=h.length),d>=h.length)return h;f=f>=h.length?h.length:(h.length+f)%h.length;for(var e=d=(h.length+d)%h.length;e<f;++e)h[e]=_;return h}Object.defineProperty(a,"__esModule",{value:!0}),a.concat=a.fillFallback=a.fill=void 0,a.fill=function(h,_,d,f){return h.fill?h.fill(_,d,f):m(h,_,d,f)},a.fillFallback=m,a.concat=function(h,_){var d=new h.constructor(h.length+_.length);return d.set(h),d.set(_,h.length),d}},9282:(F,a,m)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.updateWindowsModeWrappedState=void 0;var h=m(643);a.updateWindowsModeWrappedState=function(_){var f=_.buffer.lines.get(_.buffer.ybase+_.buffer.y-1)?.get(_.cols-1),e=_.buffer.lines.get(_.buffer.ybase+_.buffer.y);e&&f&&(e.isWrapped=f[h.CHAR_DATA_CODE_INDEX]!==h.NULL_CELL_CODE&&f[h.CHAR_DATA_CODE_INDEX]!==h.WHITESPACE_CELL_CODE)}},3734:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ExtendedAttrs=a.AttributeData=void 0;var m=function(){function _(){this.fg=0,this.bg=0,this.extended=new h}return _.toColorRGB=function(d){return[d>>>16&255,d>>>8&255,255&d]},_.fromColorRGB=function(d){return(255&d[0])<<16|(255&d[1])<<8|255&d[2]},_.prototype.clone=function(){var d=new _;return d.fg=this.fg,d.bg=this.bg,d.extended=this.extended.clone(),d},_.prototype.isInverse=function(){return 67108864&this.fg},_.prototype.isBold=function(){return 134217728&this.fg},_.prototype.isUnderline=function(){return 268435456&this.fg},_.prototype.isBlink=function(){return 536870912&this.fg},_.prototype.isInvisible=function(){return 1073741824&this.fg},_.prototype.isItalic=function(){return 67108864&this.bg},_.prototype.isDim=function(){return 134217728&this.bg},_.prototype.isStrikethrough=function(){return 2147483648&this.fg},_.prototype.getFgColorMode=function(){return 50331648&this.fg},_.prototype.getBgColorMode=function(){return 50331648&this.bg},_.prototype.isFgRGB=function(){return 50331648==(50331648&this.fg)},_.prototype.isBgRGB=function(){return 50331648==(50331648&this.bg)},_.prototype.isFgPalette=function(){return 16777216==(50331648&this.fg)||33554432==(50331648&this.fg)},_.prototype.isBgPalette=function(){return 16777216==(50331648&this.bg)||33554432==(50331648&this.bg)},_.prototype.isFgDefault=function(){return 0==(50331648&this.fg)},_.prototype.isBgDefault=function(){return 0==(50331648&this.bg)},_.prototype.isAttributeDefault=function(){return 0===this.fg&&0===this.bg},_.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},_.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},_.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},_.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},_.prototype.getUnderlineColor=function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()},_.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},_.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648==(50331648&this.extended.underlineColor):this.isFgRGB()},_.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?16777216==(50331648&this.extended.underlineColor)||33554432==(50331648&this.extended.underlineColor):this.isFgPalette()},_.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?0==(50331648&this.extended.underlineColor):this.isFgDefault()},_.prototype.getUnderlineStyle=function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0},_}();a.AttributeData=m;var h=function(){function _(d,f){void 0===d&&(d=0),void 0===f&&(f=-1),this.underlineStyle=d,this.underlineColor=f}return _.prototype.clone=function(){return new _(this.underlineStyle,this.underlineColor)},_.prototype.isEmpty=function(){return 0===this.underlineStyle},_}();a.ExtendedAttrs=h},9092:(F,a,m)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferStringIterator=a.Buffer=a.MAX_BUFFER_SIZE=void 0;var h=m(6349),_=m(8437),d=m(511),f=m(643),e=m(4634),v=m(4863),n=m(7116),s=m(3734);a.MAX_BUFFER_SIZE=4294967295;var u=function(){function r(t,i,c){this._hasScrollback=t,this._optionsService=i,this._bufferService=c,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=_.DEFAULT_ATTR_DATA.clone(),this.savedCharset=n.DEFAULT_CHARSET,this.markers=[],this._nullCell=d.CellData.fromCharData([0,f.NULL_CELL_CHAR,f.NULL_CELL_WIDTH,f.NULL_CELL_CODE]),this._whitespaceCell=d.CellData.fromCharData([0,f.WHITESPACE_CELL_CHAR,f.WHITESPACE_CELL_WIDTH,f.WHITESPACE_CELL_CODE]),this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return r.prototype.getNullCell=function(t){return t?(this._nullCell.fg=t.fg,this._nullCell.bg=t.bg,this._nullCell.extended=t.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new s.ExtendedAttrs),this._nullCell},r.prototype.getWhitespaceCell=function(t){return t?(this._whitespaceCell.fg=t.fg,this._whitespaceCell.bg=t.bg,this._whitespaceCell.extended=t.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new s.ExtendedAttrs),this._whitespaceCell},r.prototype.getBlankLine=function(t,i){return new _.BufferLine(this._bufferService.cols,this.getNullCell(t),i)},Object.defineProperty(r.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isCursorInViewport",{get:function(){var t=this.ybase+this.y-this.ydisp;return t>=0&&t<this._rows},enumerable:!1,configurable:!0}),r.prototype._getCorrectBufferLength=function(t){if(!this._hasScrollback)return t;var i=t+this._optionsService.options.scrollback;return i>a.MAX_BUFFER_SIZE?a.MAX_BUFFER_SIZE:i},r.prototype.fillViewportRows=function(t){if(0===this.lines.length){void 0===t&&(t=_.DEFAULT_ATTR_DATA);for(var i=this._rows;i--;)this.lines.push(this.getBlankLine(t))}},r.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},r.prototype.resize=function(t,i){var c=this.getNullCell(_.DEFAULT_ATTR_DATA),l=this._getCorrectBufferLength(i);if(l>this.lines.maxLength&&(this.lines.maxLength=l),this.lines.length>0){if(this._cols<t)for(var p=0;p<this.lines.length;p++)this.lines.get(p).resize(t,c);var g=0;if(this._rows<i)for(var w=this._rows;w<i;w++)this.lines.length<i+this.ybase&&(this._optionsService.options.windowsMode?this.lines.push(new _.BufferLine(t,c)):this.ybase>0&&this.lines.length<=this.ybase+this.y+g+1?(this.ybase--,g++,this.ydisp>0&&this.ydisp--):this.lines.push(new _.BufferLine(t,c)));else for(w=this._rows;w>i;w--)this.lines.length>i+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(l<this.lines.maxLength){var y=this.lines.length-l;y>0&&(this.lines.trimStart(y),this.ybase=Math.max(this.ybase-y,0),this.ydisp=Math.max(this.ydisp-y,0),this.savedY=Math.max(this.savedY-y,0)),this.lines.maxLength=l}this.x=Math.min(this.x,t-1),this.y=Math.min(this.y,i-1),g&&(this.y+=g),this.savedX=Math.min(this.savedX,t-1),this.scrollTop=0}if(this.scrollBottom=i-1,this._isReflowEnabled&&(this._reflow(t,i),this._cols>t))for(p=0;p<this.lines.length;p++)this.lines.get(p).resize(t,c);this._cols=t,this._rows=i},Object.defineProperty(r.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.options.windowsMode},enumerable:!1,configurable:!0}),r.prototype._reflow=function(t,i){this._cols!==t&&(t>this._cols?this._reflowLarger(t,i):this._reflowSmaller(t,i))},r.prototype._reflowLarger=function(t,i){var c=e.reflowLargerGetLinesToRemove(this.lines,this._cols,t,this.ybase+this.y,this.getNullCell(_.DEFAULT_ATTR_DATA));if(c.length>0){var l=e.reflowLargerCreateNewLayout(this.lines,c);e.reflowLargerApplyNewLayout(this.lines,l.layout),this._reflowLargerAdjustViewport(t,i,l.countRemoved)}},r.prototype._reflowLargerAdjustViewport=function(t,i,c){for(var l=this.getNullCell(_.DEFAULT_ATTR_DATA),p=c;p-- >0;)0===this.ybase?(this.y>0&&this.y--,this.lines.length<i&&this.lines.push(new _.BufferLine(t,l))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-c,0)},r.prototype._reflowSmaller=function(t,i){for(var c=this.getNullCell(_.DEFAULT_ATTR_DATA),l=[],p=0,g=this.lines.length-1;g>=0;g--){var w=this.lines.get(g);if(!(!w||!w.isWrapped&&w.getTrimmedLength()<=t)){for(var y=[w];w.isWrapped&&g>0;)w=this.lines.get(--g),y.unshift(w);var S=this.ybase+this.y;if(!(S>=g&&S<g+y.length)){var C,T=y[y.length-1].getTrimmedLength(),L=e.reflowSmallerGetNewLineLengths(y,this._cols,t),M=L.length-y.length;C=0===this.ybase&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+M):Math.max(0,this.lines.length-this.lines.maxLength+M);for(var k=[],E=0;E<M;E++){var H=this.getBlankLine(_.DEFAULT_ATTR_DATA,!0);k.push(H)}k.length>0&&(l.push({start:g+y.length+p,newLines:k}),p+=k.length),y.push.apply(y,k);var D=L.length-1,Z=L[D];0===Z&&(Z=L[--D]);for(var G=y.length-M-1,N=T;G>=0;){var V=Math.min(N,Z);if(y[D].copyCellsFrom(y[G],N-V,Z-V,V,!0),0==(Z-=V)&&(Z=L[--D]),0==(N-=V)){G--;var $=Math.max(G,0);N=e.getWrappedLineTrimmedLength(y,$,this._cols)}}for(E=0;E<y.length;E++)L[E]<t&&y[E].setCell(L[E],c);for(var x=M-C;x-- >0;)0===this.ybase?this.y<i-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+p)-i&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+M,this.ybase+i-1)}}}if(l.length>0){var R=[],B=[];for(E=0;E<this.lines.length;E++)B.push(this.lines.get(E));var q=this.lines.length,I=q-1,Q=0,X=l[Q];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+p);var se=0;for(E=Math.min(this.lines.maxLength-1,q+p-1);E>=0;E--)if(X&&X.start>I+se){for(var he=X.newLines.length-1;he>=0;he--)this.lines.set(E--,X.newLines[he]);E++,R.push({index:I+1,amount:X.newLines.length}),se+=X.newLines.length,X=l[++Q]}else this.lines.set(E,B[I--]);var ue=0;for(E=R.length-1;E>=0;E--)R[E].index+=ue,this.lines.onInsertEmitter.fire(R[E]),ue+=R[E].amount;var K=Math.max(0,q+p-this.lines.maxLength);K>0&&this.lines.onTrimEmitter.fire(K)}},r.prototype.stringIndexToBufferIndex=function(t,i,c){for(void 0===c&&(c=!1);i;){var l=this.lines.get(t);if(!l)return[-1,-1];for(var p=c?l.getTrimmedLength():l.length,g=0;g<p;++g)if(l.get(g)[f.CHAR_DATA_WIDTH_INDEX]&&(i-=l.get(g)[f.CHAR_DATA_CHAR_INDEX].length||1),i<0)return[t,g];t++}return[t,0]},r.prototype.translateBufferLineToString=function(t,i,c,l){void 0===c&&(c=0);var p=this.lines.get(t);return p?p.translateToString(i,c,l):""},r.prototype.getWrappedRangeForLine=function(t){for(var i=t,c=t;i>0&&this.lines.get(i).isWrapped;)i--;for(;c+1<this.lines.length&&this.lines.get(c+1).isWrapped;)c++;return{first:i,last:c}},r.prototype.setupTabStops=function(t){for(null!=t?this.tabs[t]||(t=this.prevStop(t)):(this.tabs={},t=0);t<this._cols;t+=this._optionsService.options.tabStopWidth)this.tabs[t]=!0},r.prototype.prevStop=function(t){for(null==t&&(t=this.x);!this.tabs[--t]&&t>0;);return t>=this._cols?this._cols-1:t<0?0:t},r.prototype.nextStop=function(t){for(null==t&&(t=this.x);!this.tabs[++t]&&t<this._cols;);return t>=this._cols?this._cols-1:t<0?0:t},r.prototype.addMarker=function(t){var i=this,c=new v.Marker(t);return this.markers.push(c),c.register(this.lines.onTrim(function(l){c.line-=l,c.line<0&&c.dispose()})),c.register(this.lines.onInsert(function(l){c.line>=l.index&&(c.line+=l.amount)})),c.register(this.lines.onDelete(function(l){c.line>=l.index&&c.line<l.index+l.amount&&c.dispose(),c.line>l.index&&(c.line-=l.amount)})),c.register(c.onDispose(function(){return i._removeMarker(c)})),c},r.prototype._removeMarker=function(t){this.markers.splice(this.markers.indexOf(t),1)},r.prototype.iterator=function(t,i,c,l,p){return new o(this,t,i,c,l,p)},r}();a.Buffer=u;var o=function(){function r(t,i,c,l,p,g){void 0===c&&(c=0),void 0===l&&(l=t.lines.length),void 0===p&&(p=0),void 0===g&&(g=0),this._buffer=t,this._trimRight=i,this._startIndex=c,this._endIndex=l,this._startOverscan=p,this._endOverscan=g,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return r.prototype.hasNext=function(){return this._current<this._endIndex},r.prototype.next=function(){var t=this._buffer.getWrappedRangeForLine(this._current);t.first<this._startIndex-this._startOverscan&&(t.first=this._startIndex-this._startOverscan),t.last>this._endIndex+this._endOverscan&&(t.last=this._endIndex+this._endOverscan),t.first=Math.max(t.first,0),t.last=Math.min(t.last,this._buffer.lines.length);for(var i="",c=t.first;c<=t.last;++c)i+=this._buffer.translateBufferLineToString(c,this._trimRight);return this._current=t.last+1,{range:t,content:i}},r}();a.BufferStringIterator=o},8437:(F,a,m)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferLine=a.DEFAULT_ATTR_DATA=void 0;var h=m(482),_=m(643),d=m(511),f=m(3734);a.DEFAULT_ATTR_DATA=Object.freeze(new f.AttributeData);var e=function(){function v(n,s,u){void 0===u&&(u=!1),this.isWrapped=u,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*n);for(var o=s||d.CellData.fromCharData([0,_.NULL_CELL_CHAR,_.NULL_CELL_WIDTH,_.NULL_CELL_CODE]),r=0;r<n;++r)this.setCell(r,o);this.length=n}return v.prototype.get=function(n){var s=this._data[3*n+0],u=2097151&s;return[this._data[3*n+1],2097152&s?this._combined[n]:u?h.stringFromCodePoint(u):"",s>>22,2097152&s?this._combined[n].charCodeAt(this._combined[n].length-1):u]},v.prototype.set=function(n,s){this._data[3*n+1]=s[_.CHAR_DATA_ATTR_INDEX],s[_.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[n]=s[1],this._data[3*n+0]=2097152|n|s[_.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*n+0]=s[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|s[_.CHAR_DATA_WIDTH_INDEX]<<22},v.prototype.getWidth=function(n){return this._data[3*n+0]>>22},v.prototype.hasWidth=function(n){return 12582912&this._data[3*n+0]},v.prototype.getFg=function(n){return this._data[3*n+1]},v.prototype.getBg=function(n){return this._data[3*n+2]},v.prototype.hasContent=function(n){return 4194303&this._data[3*n+0]},v.prototype.getCodePoint=function(n){var s=this._data[3*n+0];return 2097152&s?this._combined[n].charCodeAt(this._combined[n].length-1):2097151&s},v.prototype.isCombined=function(n){return 2097152&this._data[3*n+0]},v.prototype.getString=function(n){var s=this._data[3*n+0];return 2097152&s?this._combined[n]:2097151&s?h.stringFromCodePoint(2097151&s):""},v.prototype.loadCell=function(n,s){var u=3*n;return s.content=this._data[u+0],s.fg=this._data[u+1],s.bg=this._data[u+2],2097152&s.content&&(s.combinedData=this._combined[n]),268435456&s.bg&&(s.extended=this._extendedAttrs[n]),s},v.prototype.setCell=function(n,s){2097152&s.content&&(this._combined[n]=s.combinedData),268435456&s.bg&&(this._extendedAttrs[n]=s.extended),this._data[3*n+0]=s.content,this._data[3*n+1]=s.fg,this._data[3*n+2]=s.bg},v.prototype.setCellFromCodePoint=function(n,s,u,o,r,t){268435456&r&&(this._extendedAttrs[n]=t),this._data[3*n+0]=s|u<<22,this._data[3*n+1]=o,this._data[3*n+2]=r},v.prototype.addCodepointToCell=function(n,s){var u=this._data[3*n+0];2097152&u?this._combined[n]+=h.stringFromCodePoint(s):(2097151&u?(this._combined[n]=h.stringFromCodePoint(2097151&u)+h.stringFromCodePoint(s),u&=-2097152,u|=2097152):u=s|1<<22,this._data[3*n+0]=u)},v.prototype.insertCells=function(n,s,u,o){if((n%=this.length)&&2===this.getWidth(n-1)&&this.setCellFromCodePoint(n-1,0,1,o?.fg||0,o?.bg||0,o?.extended||new f.ExtendedAttrs),s<this.length-n){for(var r=new d.CellData,t=this.length-n-s-1;t>=0;--t)this.setCell(n+s+t,this.loadCell(n+t,r));for(t=0;t<s;++t)this.setCell(n+t,u)}else for(t=n;t<this.length;++t)this.setCell(t,u);2===this.getWidth(this.length-1)&&this.setCellFromCodePoint(this.length-1,0,1,o?.fg||0,o?.bg||0,o?.extended||new f.ExtendedAttrs)},v.prototype.deleteCells=function(n,s,u,o){if(s<this.length-(n%=this.length)){for(var r=new d.CellData,t=0;t<this.length-n-s;++t)this.setCell(n+t,this.loadCell(n+s+t,r));for(t=this.length-s;t<this.length;++t)this.setCell(t,u)}else for(t=n;t<this.length;++t)this.setCell(t,u);n&&2===this.getWidth(n-1)&&this.setCellFromCodePoint(n-1,0,1,o?.fg||0,o?.bg||0,o?.extended||new f.ExtendedAttrs),0!==this.getWidth(n)||this.hasContent(n)||this.setCellFromCodePoint(n,0,1,o?.fg||0,o?.bg||0,o?.extended||new f.ExtendedAttrs)},v.prototype.replaceCells=function(n,s,u,o){for(n&&2===this.getWidth(n-1)&&this.setCellFromCodePoint(n-1,0,1,o?.fg||0,o?.bg||0,o?.extended||new f.ExtendedAttrs),s<this.length&&2===this.getWidth(s-1)&&this.setCellFromCodePoint(s,0,1,o?.fg||0,o?.bg||0,o?.extended||new f.ExtendedAttrs);n<s&&n<this.length;)this.setCell(n++,u)},v.prototype.resize=function(n,s){if(n!==this.length){if(n>this.length){var u=new Uint32Array(3*n);this.length&&u.set(3*n<this._data.length?this._data.subarray(0,3*n):this._data),this._data=u;for(var o=this.length;o<n;++o)this.setCell(o,s)}else if(n){(u=new Uint32Array(3*n)).set(this._data.subarray(0,3*n)),this._data=u;var r=Object.keys(this._combined);for(o=0;o<r.length;o++){var t=parseInt(r[o],10);t>=n&&delete this._combined[t]}}else this._data=new Uint32Array(0),this._combined={};this.length=n}},v.prototype.fill=function(n){this._combined={},this._extendedAttrs={};for(var s=0;s<this.length;++s)this.setCell(s,n)},v.prototype.copyFrom=function(n){for(var s in this.length!==n.length?this._data=new Uint32Array(n._data):this._data.set(n._data),this.length=n.length,this._combined={},n._combined)this._combined[s]=n._combined[s];for(var s in this._extendedAttrs={},n._extendedAttrs)this._extendedAttrs[s]=n._extendedAttrs[s];this.isWrapped=n.isWrapped},v.prototype.clone=function(){var n=new v(0);for(var s in n._data=new Uint32Array(this._data),n.length=this.length,this._combined)n._combined[s]=this._combined[s];for(var s in this._extendedAttrs)n._extendedAttrs[s]=this._extendedAttrs[s];return n.isWrapped=this.isWrapped,n},v.prototype.getTrimmedLength=function(){for(var n=this.length-1;n>=0;--n)if(4194303&this._data[3*n+0])return n+(this._data[3*n+0]>>22);return 0},v.prototype.copyCellsFrom=function(n,s,u,o,r){var t=n._data;if(r)for(var i=o-1;i>=0;i--)for(var c=0;c<3;c++)this._data[3*(u+i)+c]=t[3*(s+i)+c];else for(i=0;i<o;i++)for(c=0;c<3;c++)this._data[3*(u+i)+c]=t[3*(s+i)+c];var l=Object.keys(n._combined);for(c=0;c<l.length;c++){var p=parseInt(l[c],10);p>=s&&(this._combined[p-s+u]=n._combined[p])}},v.prototype.translateToString=function(n,s,u){void 0===n&&(n=!1),void 0===s&&(s=0),void 0===u&&(u=this.length),n&&(u=Math.min(u,this.getTrimmedLength()));for(var o="";s<u;){var r=this._data[3*s+0],t=2097151&r;o+=2097152&r?this._combined[s]:t?h.stringFromCodePoint(t):_.WHITESPACE_CELL_CHAR,s+=r>>22||1}return o},v}();a.BufferLine=e},4841:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getRangeLength=void 0,a.getRangeLength=function(m,h){if(m.start.y>m.end.y)throw new Error("Buffer range end ("+m.end.x+", "+m.end.y+") cannot be before start ("+m.start.x+", "+m.start.y+")");return h*(m.end.y-m.start.y)+(m.end.x-m.start.x+1)}},4634:(F,a)=>{function m(h,_,d){if(_===h.length-1)return h[_].getTrimmedLength();var f=!h[_].hasContent(d-1)&&1===h[_].getWidth(d-1),e=2===h[_+1].getWidth(0);return f&&e?d-1:d}Object.defineProperty(a,"__esModule",{value:!0}),a.getWrappedLineTrimmedLength=a.reflowSmallerGetNewLineLengths=a.reflowLargerApplyNewLayout=a.reflowLargerCreateNewLayout=a.reflowLargerGetLinesToRemove=void 0,a.reflowLargerGetLinesToRemove=function(h,_,d,f,e){for(var v=[],n=0;n<h.length-1;n++){var s=n,u=h.get(++s);if(u.isWrapped){for(var o=[h.get(n)];s<h.length&&u.isWrapped;)o.push(u),u=h.get(++s);if(f>=n&&f<s)n+=o.length-1;else{for(var r=0,t=m(o,r,_),i=1,c=0;i<o.length;){var l=m(o,i,_),w=Math.min(l-c,d-t);o[r].copyCellsFrom(o[i],c,t,w,!1),(t+=w)===d&&(r++,t=0),(c+=w)===l&&(i++,c=0),0===t&&0!==r&&2===o[r-1].getWidth(d-1)&&(o[r].copyCellsFrom(o[r-1],d-1,t++,1,!1),o[r-1].setCell(d-1,e))}o[r].replaceCells(t,d,e);for(var y=0,S=o.length-1;S>0&&(S>r||0===o[S].getTrimmedLength());S--)y++;y>0&&(v.push(n+o.length-y),v.push(y)),n+=o.length-1}}}return v},a.reflowLargerCreateNewLayout=function(h,_){for(var d=[],f=0,e=_[f],v=0,n=0;n<h.length;n++)if(e===n){var s=_[++f];h.onDeleteEmitter.fire({index:n-v,amount:s}),n+=s-1,v+=s,e=_[++f]}else d.push(n);return{layout:d,countRemoved:v}},a.reflowLargerApplyNewLayout=function(h,_){for(var d=[],f=0;f<_.length;f++)d.push(h.get(_[f]));for(f=0;f<d.length;f++)h.set(f,d[f]);h.length=_.length},a.reflowSmallerGetNewLineLengths=function(h,_,d){for(var f=[],e=h.map(function(t,i){return m(h,i,_)}).reduce(function(t,i){return t+i}),v=0,n=0,s=0;s<e;){if(e-s<d){f.push(e-s);break}v+=d;var u=m(h,n,_);v>u&&(v-=u,n++);var o=2===h[n].getWidth(v-1);o&&v--;var r=o?d-1:d;f.push(r),s+=r}return f},a.getWrappedLineTrimmedLength=m},5295:function(F,a,m){var h,_=this&&this.__extends||(h=function(v,n){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,u){s.__proto__=u}||function(s,u){for(var o in u)Object.prototype.hasOwnProperty.call(u,o)&&(s[o]=u[o])})(v,n)},function(v,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=v}h(v,n),v.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)});Object.defineProperty(a,"__esModule",{value:!0}),a.BufferSet=void 0;var d=m(9092),f=m(8460),e=function(v){function n(s,u){var o=v.call(this)||this;return o._optionsService=s,o._bufferService=u,o._onBufferActivate=o.register(new f.EventEmitter),o.reset(),o}return _(n,v),Object.defineProperty(n.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!1,configurable:!0}),n.prototype.reset=function(){this._normal=new d.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new d.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()},Object.defineProperty(n.prototype,"alt",{get:function(){return this._alt},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"normal",{get:function(){return this._normal},enumerable:!1,configurable:!0}),n.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},n.prototype.activateAltBuffer=function(s){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(s),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},n.prototype.resize=function(s,u){this._normal.resize(s,u),this._alt.resize(s,u)},n.prototype.setupTabStops=function(s){this._normal.setupTabStops(s),this._alt.setupTabStops(s)},n}(m(844).Disposable);a.BufferSet=e},511:function(F,a,m){var h,_=this&&this.__extends||(h=function(n,s){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(u[r]=o[r])})(n,s)},function(n,s){if("function"!=typeof s&&null!==s)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=n}h(n,s),n.prototype=null===s?Object.create(s):(u.prototype=s.prototype,new u)});Object.defineProperty(a,"__esModule",{value:!0}),a.CellData=void 0;var d=m(482),f=m(643),e=m(3734),v=function(n){function s(){var u=null!==n&&n.apply(this,arguments)||this;return u.content=0,u.fg=0,u.bg=0,u.extended=new e.ExtendedAttrs,u.combinedData="",u}return _(s,n),s.fromCharData=function(u){var o=new s;return o.setFromCharData(u),o},s.prototype.isCombined=function(){return 2097152&this.content},s.prototype.getWidth=function(){return this.content>>22},s.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?d.stringFromCodePoint(2097151&this.content):""},s.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},s.prototype.setFromCharData=function(u){this.fg=u[f.CHAR_DATA_ATTR_INDEX],this.bg=0;var o=!1;if(u[f.CHAR_DATA_CHAR_INDEX].length>2)o=!0;else if(2===u[f.CHAR_DATA_CHAR_INDEX].length){var r=u[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=r&&r<=56319){var t=u[f.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=t&&t<=57343?this.content=1024*(r-55296)+t-56320+65536|u[f.CHAR_DATA_WIDTH_INDEX]<<22:o=!0}else o=!0}else this.content=u[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|u[f.CHAR_DATA_WIDTH_INDEX]<<22;o&&(this.combinedData=u[f.CHAR_DATA_CHAR_INDEX],this.content=2097152|u[f.CHAR_DATA_WIDTH_INDEX]<<22)},s.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},s}(e.AttributeData);a.CellData=v},643:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WHITESPACE_CELL_CODE=a.WHITESPACE_CELL_WIDTH=a.WHITESPACE_CELL_CHAR=a.NULL_CELL_CODE=a.NULL_CELL_WIDTH=a.NULL_CELL_CHAR=a.CHAR_DATA_CODE_INDEX=a.CHAR_DATA_WIDTH_INDEX=a.CHAR_DATA_CHAR_INDEX=a.CHAR_DATA_ATTR_INDEX=a.DEFAULT_ATTR=a.DEFAULT_COLOR=void 0,a.DEFAULT_COLOR=256,a.DEFAULT_ATTR=256|a.DEFAULT_COLOR<<9,a.CHAR_DATA_ATTR_INDEX=0,a.CHAR_DATA_CHAR_INDEX=1,a.CHAR_DATA_WIDTH_INDEX=2,a.CHAR_DATA_CODE_INDEX=3,a.NULL_CELL_CHAR="",a.NULL_CELL_WIDTH=1,a.NULL_CELL_CODE=0,a.WHITESPACE_CELL_CHAR=" ",a.WHITESPACE_CELL_WIDTH=1,a.WHITESPACE_CELL_CODE=32},4863:function(F,a,m){var h,_=this&&this.__extends||(h=function(e,v){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(n[u]=s[u])})(e,v)},function(e,v){if("function"!=typeof v&&null!==v)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function n(){this.constructor=e}h(e,v),e.prototype=null===v?Object.create(v):(n.prototype=v.prototype,new n)});Object.defineProperty(a,"__esModule",{value:!0}),a.Marker=void 0;var d=m(8460),f=function(e){function v(n){var s=e.call(this)||this;return s.line=n,s._id=v._nextId++,s.isDisposed=!1,s._onDispose=new d.EventEmitter,s}return _(v,e),Object.defineProperty(v.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),v.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),e.prototype.dispose.call(this))},v._nextId=1,v}(m(844).Disposable);a.Marker=f},7116:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DEFAULT_CHARSET=a.CHARSETS=void 0,a.CHARSETS={},a.DEFAULT_CHARSET=a.CHARSETS.B,a.CHARSETS[0]={"`":"\u25c6",a:"\u2592",b:"\u2409",c:"\u240c",d:"\u240d",e:"\u240a",f:"\xb0",g:"\xb1",h:"\u2424",i:"\u240b",j:"\u2518",k:"\u2510",l:"\u250c",m:"\u2514",n:"\u253c",o:"\u23ba",p:"\u23bb",q:"\u2500",r:"\u23bc",s:"\u23bd",t:"\u251c",u:"\u2524",v:"\u2534",w:"\u252c",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03c0","|":"\u2260","}":"\xa3","~":"\xb7"},a.CHARSETS.A={"#":"\xa3"},a.CHARSETS.B=void 0,a.CHARSETS[4]={"#":"\xa3","@":"\xbe","[":"ij","\\":"\xbd","]":"|","{":"\xa8","|":"f","}":"\xbc","~":"\xb4"},a.CHARSETS.C=a.CHARSETS[5]={"[":"\xc4","\\":"\xd6","]":"\xc5","^":"\xdc","`":"\xe9","{":"\xe4","|":"\xf6","}":"\xe5","~":"\xfc"},a.CHARSETS.R={"#":"\xa3","@":"\xe0","[":"\xb0","\\":"\xe7","]":"\xa7","{":"\xe9","|":"\xf9","}":"\xe8","~":"\xa8"},a.CHARSETS.Q={"@":"\xe0","[":"\xe2","\\":"\xe7","]":"\xea","^":"\xee","`":"\xf4","{":"\xe9","|":"\xf9","}":"\xe8","~":"\xfb"},a.CHARSETS.K={"@":"\xa7","[":"\xc4","\\":"\xd6","]":"\xdc","{":"\xe4","|":"\xf6","}":"\xfc","~":"\xdf"},a.CHARSETS.Y={"#":"\xa3","@":"\xa7","[":"\xb0","\\":"\xe7","]":"\xe9","`":"\xf9","{":"\xe0","|":"\xf2","}":"\xe8","~":"\xec"},a.CHARSETS.E=a.CHARSETS[6]={"@":"\xc4","[":"\xc6","\\":"\xd8","]":"\xc5","^":"\xdc","`":"\xe4","{":"\xe6","|":"\xf8","}":"\xe5","~":"\xfc"},a.CHARSETS.Z={"#":"\xa3","@":"\xa7","[":"\xa1","\\":"\xd1","]":"\xbf","{":"\xb0","|":"\xf1","}":"\xe7"},a.CHARSETS.H=a.CHARSETS[7]={"@":"\xc9","[":"\xc4","\\":"\xd6","]":"\xc5","^":"\xdc","`":"\xe9","{":"\xe4","|":"\xf6","}":"\xe5","~":"\xfc"},a.CHARSETS["="]={"#":"\xf9","@":"\xe0","[":"\xe9","\\":"\xe7","]":"\xea","^":"\xee",_:"\xe8","`":"\xf4","{":"\xe4","|":"\xf6","}":"\xfc","~":"\xfb"}},2584:(F,a)=>{var m,h;Object.defineProperty(a,"__esModule",{value:!0}),a.C1=a.C0=void 0,(h=a.C0||(a.C0={})).NUL="\0",h.SOH="\x01",h.STX="\x02",h.ETX="\x03",h.EOT="\x04",h.ENQ="\x05",h.ACK="\x06",h.BEL="\x07",h.BS="\b",h.HT="\t",h.LF="\n",h.VT="\v",h.FF="\f",h.CR="\r",h.SO="\x0e",h.SI="\x0f",h.DLE="\x10",h.DC1="\x11",h.DC2="\x12",h.DC3="\x13",h.DC4="\x14",h.NAK="\x15",h.SYN="\x16",h.ETB="\x17",h.CAN="\x18",h.EM="\x19",h.SUB="\x1a",h.ESC="\x1b",h.FS="\x1c",h.GS="\x1d",h.RS="\x1e",h.US="\x1f",h.SP=" ",h.DEL="\x7f",(m=a.C1||(a.C1={})).PAD="\x80",m.HOP="\x81",m.BPH="\x82",m.NBH="\x83",m.IND="\x84",m.NEL="\x85",m.SSA="\x86",m.ESA="\x87",m.HTS="\x88",m.HTJ="\x89",m.VTS="\x8a",m.PLD="\x8b",m.PLU="\x8c",m.RI="\x8d",m.SS2="\x8e",m.SS3="\x8f",m.DCS="\x90",m.PU1="\x91",m.PU2="\x92",m.STS="\x93",m.CCH="\x94",m.MW="\x95",m.SPA="\x96",m.EPA="\x97",m.SOS="\x98",m.SGCI="\x99",m.SCI="\x9a",m.CSI="\x9b",m.ST="\x9c",m.OSC="\x9d",m.PM="\x9e",m.APC="\x9f"},7399:(F,a,m)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.evaluateKeyboardEvent=void 0;var h=m(2584),_={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};a.evaluateKeyboardEvent=function(d,f,e,v){var n={type:0,cancel:!1,key:void 0},s=(d.shiftKey?1:0)|(d.altKey?2:0)|(d.ctrlKey?4:0)|(d.metaKey?8:0);switch(d.keyCode){case 0:"UIKeyInputUpArrow"===d.key?n.key=f?h.C0.ESC+"OA":h.C0.ESC+"[A":"UIKeyInputLeftArrow"===d.key?n.key=f?h.C0.ESC+"OD":h.C0.ESC+"[D":"UIKeyInputRightArrow"===d.key?n.key=f?h.C0.ESC+"OC":h.C0.ESC+"[C":"UIKeyInputDownArrow"===d.key&&(n.key=f?h.C0.ESC+"OB":h.C0.ESC+"[B");break;case 8:if(d.shiftKey){n.key=h.C0.BS;break}if(d.altKey){n.key=h.C0.ESC+h.C0.DEL;break}n.key=h.C0.DEL;break;case 9:if(d.shiftKey){n.key=h.C0.ESC+"[Z";break}n.key=h.C0.HT,n.cancel=!0;break;case 13:n.key=d.altKey?h.C0.ESC+h.C0.CR:h.C0.CR,n.cancel=!0;break;case 27:n.key=h.C0.ESC,d.altKey&&(n.key=h.C0.ESC+h.C0.ESC),n.cancel=!0;break;case 37:if(d.metaKey)break;s?(n.key=h.C0.ESC+"[1;"+(s+1)+"D",n.key===h.C0.ESC+"[1;3D"&&(n.key=h.C0.ESC+(e?"b":"[1;5D"))):n.key=f?h.C0.ESC+"OD":h.C0.ESC+"[D";break;case 39:if(d.metaKey)break;s?(n.key=h.C0.ESC+"[1;"+(s+1)+"C",n.key===h.C0.ESC+"[1;3C"&&(n.key=h.C0.ESC+(e?"f":"[1;5C"))):n.key=f?h.C0.ESC+"OC":h.C0.ESC+"[C";break;case 38:if(d.metaKey)break;s?(n.key=h.C0.ESC+"[1;"+(s+1)+"A",e||n.key!==h.C0.ESC+"[1;3A"||(n.key=h.C0.ESC+"[1;5A")):n.key=f?h.C0.ESC+"OA":h.C0.ESC+"[A";break;case 40:if(d.metaKey)break;s?(n.key=h.C0.ESC+"[1;"+(s+1)+"B",e||n.key!==h.C0.ESC+"[1;3B"||(n.key=h.C0.ESC+"[1;5B")):n.key=f?h.C0.ESC+"OB":h.C0.ESC+"[B";break;case 45:d.shiftKey||d.ctrlKey||(n.key=h.C0.ESC+"[2~");break;case 46:n.key=s?h.C0.ESC+"[3;"+(s+1)+"~":h.C0.ESC+"[3~";break;case 36:n.key=s?h.C0.ESC+"[1;"+(s+1)+"H":f?h.C0.ESC+"OH":h.C0.ESC+"[H";break;case 35:n.key=s?h.C0.ESC+"[1;"+(s+1)+"F":f?h.C0.ESC+"OF":h.C0.ESC+"[F";break;case 33:d.shiftKey?n.type=2:n.key=h.C0.ESC+"[5~";break;case 34:d.shiftKey?n.type=3:n.key=h.C0.ESC+"[6~";break;case 112:n.key=s?h.C0.ESC+"[1;"+(s+1)+"P":h.C0.ESC+"OP";break;case 113:n.key=s?h.C0.ESC+"[1;"+(s+1)+"Q":h.C0.ESC+"OQ";break;case 114:n.key=s?h.C0.ESC+"[1;"+(s+1)+"R":h.C0.ESC+"OR";break;case 115:n.key=s?h.C0.ESC+"[1;"+(s+1)+"S":h.C0.ESC+"OS";break;case 116:n.key=s?h.C0.ESC+"[15;"+(s+1)+"~":h.C0.ESC+"[15~";break;case 117:n.key=s?h.C0.ESC+"[17;"+(s+1)+"~":h.C0.ESC+"[17~";break;case 118:n.key=s?h.C0.ESC+"[18;"+(s+1)+"~":h.C0.ESC+"[18~";break;case 119:n.key=s?h.C0.ESC+"[19;"+(s+1)+"~":h.C0.ESC+"[19~";break;case 120:n.key=s?h.C0.ESC+"[20;"+(s+1)+"~":h.C0.ESC+"[20~";break;case 121:n.key=s?h.C0.ESC+"[21;"+(s+1)+"~":h.C0.ESC+"[21~";break;case 122:n.key=s?h.C0.ESC+"[23;"+(s+1)+"~":h.C0.ESC+"[23~";break;case 123:n.key=s?h.C0.ESC+"[24;"+(s+1)+"~":h.C0.ESC+"[24~";break;default:if(!d.ctrlKey||d.shiftKey||d.altKey||d.metaKey)if(e&&!v||!d.altKey||d.metaKey)!e||d.altKey||d.ctrlKey||d.shiftKey||!d.metaKey?d.key&&!d.ctrlKey&&!d.altKey&&!d.metaKey&&d.keyCode>=48&&1===d.key.length?n.key=d.key:d.key&&d.ctrlKey&&"_"===d.key&&(n.key=h.C0.US):65===d.keyCode&&(n.type=1);else{var u=_[d.keyCode],o=u&&u[d.shiftKey?1:0];o?n.key=h.C0.ESC+o:d.keyCode>=65&&d.keyCode<=90&&(n.key=h.C0.ESC+String.fromCharCode(d.ctrlKey?d.keyCode-64:d.keyCode+32))}else d.keyCode>=65&&d.keyCode<=90?n.key=String.fromCharCode(d.keyCode-64):32===d.keyCode?n.key=h.C0.NUL:d.keyCode>=51&&d.keyCode<=55?n.key=String.fromCharCode(d.keyCode-51+27):56===d.keyCode?n.key=h.C0.DEL:219===d.keyCode?n.key=h.C0.ESC:220===d.keyCode?n.key=h.C0.FS:221===d.keyCode&&(n.key=h.C0.GS)}return n}},482:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Utf8ToUtf32=a.StringToUtf32=a.utf32ToString=a.stringFromCodePoint=void 0,a.stringFromCodePoint=function(_){return _>65535?(_-=65536,String.fromCharCode(55296+(_>>10))+String.fromCharCode(_%1024+56320)):String.fromCharCode(_)},a.utf32ToString=function(_,d,f){void 0===d&&(d=0),void 0===f&&(f=_.length);for(var e="",v=d;v<f;++v){var n=_[v];n>65535?(n-=65536,e+=String.fromCharCode(55296+(n>>10))+String.fromCharCode(n%1024+56320)):e+=String.fromCharCode(n)}return e};var m=function(){function _(){this._interim=0}return _.prototype.clear=function(){this._interim=0},_.prototype.decode=function(d,f){var e=d.length;if(!e)return 0;var v=0,n=0;this._interim&&(56320<=(o=d.charCodeAt(n++))&&o<=57343?f[v++]=1024*(this._interim-55296)+o-56320+65536:(f[v++]=this._interim,f[v++]=o),this._interim=0);for(var s=n;s<e;++s){var u=d.charCodeAt(s);if(55296<=u&&u<=56319){if(++s>=e)return this._interim=u,v;var o;56320<=(o=d.charCodeAt(s))&&o<=57343?f[v++]=1024*(u-55296)+o-56320+65536:(f[v++]=u,f[v++]=o)}else 65279!==u&&(f[v++]=u)}return v},_}();a.StringToUtf32=m;var h=function(){function _(){this.interim=new Uint8Array(3)}return _.prototype.clear=function(){this.interim.fill(0)},_.prototype.decode=function(d,f){var e=d.length;if(!e)return 0;var v,n,s,u,o=0,r=0,t=0;if(this.interim[0]){var i=!1,c=this.interim[0];c&=192==(224&c)?31:224==(240&c)?15:7;for(var l=0,p=void 0;(p=63&this.interim[++l])&&l<4;)c<<=6,c|=p;for(var g=192==(224&this.interim[0])?2:224==(240&this.interim[0])?3:4,w=g-l;t<w;){if(t>=e)return 0;if(128!=(192&(p=d[t++]))){t--,i=!0;break}this.interim[l++]=p,c<<=6,c|=63&p}i||(2===g?c<128?t--:f[o++]=c:3===g?c<2048||c>=55296&&c<=57343||65279===c||(f[o++]=c):c<65536||c>1114111||(f[o++]=c)),this.interim.fill(0)}for(var y=e-4,S=t;S<e;){for(;!(!(S<y)||128&(v=d[S])||128&(n=d[S+1])||128&(s=d[S+2])||128&(u=d[S+3]));)f[o++]=v,f[o++]=n,f[o++]=s,f[o++]=u,S+=4;if((v=d[S++])<128)f[o++]=v;else if(192==(224&v)){if(S>=e)return this.interim[0]=v,o;if(128!=(192&(n=d[S++]))){S--;continue}if((r=(31&v)<<6|63&n)<128){S--;continue}f[o++]=r}else if(224==(240&v)){if(S>=e)return this.interim[0]=v,o;if(128!=(192&(n=d[S++]))){S--;continue}if(S>=e)return this.interim[0]=v,this.interim[1]=n,o;if(128!=(192&(s=d[S++]))){S--;continue}if((r=(15&v)<<12|(63&n)<<6|63&s)<2048||r>=55296&&r<=57343||65279===r)continue;f[o++]=r}else if(240==(248&v)){if(S>=e)return this.interim[0]=v,o;if(128!=(192&(n=d[S++]))){S--;continue}if(S>=e)return this.interim[0]=v,this.interim[1]=n,o;if(128!=(192&(s=d[S++]))){S--;continue}if(S>=e)return this.interim[0]=v,this.interim[1]=n,this.interim[2]=s,o;if(128!=(192&(u=d[S++]))){S--;continue}if((r=(7&v)<<18|(63&n)<<12|(63&s)<<6|63&u)<65536||r>1114111)continue;f[o++]=r}}return o},_}();a.Utf8ToUtf32=h},225:(F,a,m)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeV6=void 0;var h,_=m(8273),d=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],f=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],e=function(){function v(){if(this.version="6",!h){h=new Uint8Array(65536),_.fill(h,1),h[0]=0,_.fill(h,0,1,32),_.fill(h,0,127,160),_.fill(h,2,4352,4448),h[9001]=2,h[9002]=2,_.fill(h,2,11904,42192),h[12351]=1,_.fill(h,2,44032,55204),_.fill(h,2,63744,64256),_.fill(h,2,65040,65050),_.fill(h,2,65072,65136),_.fill(h,2,65280,65377),_.fill(h,2,65504,65511);for(var n=0;n<d.length;++n)_.fill(h,0,d[n][0],d[n][1]+1)}}return v.prototype.wcwidth=function(n){return n<32?0:n<127?1:n<65536?h[n]:function(s,u){var o,r=0,t=u.length-1;if(s<u[0][0]||s>u[t][1])return!1;for(;t>=r;)if(s>u[o=r+t>>1][1])r=o+1;else{if(!(s<u[o][0]))return!0;t=o-1}return!1}(n,f)?0:n>=131072&&n<=196605||n>=196608&&n<=262141?2:1},v}();a.UnicodeV6=e},5981:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WriteBuffer=void 0;var m=typeof queueMicrotask>"u"?function(_){Promise.resolve().then(_)}:queueMicrotask,h=function(){function _(d){this._action=d,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0}return _.prototype.writeSync=function(d,f){if(void 0!==f&&this._syncCalls>f)this._syncCalls=0;else if(this._pendingData+=d.length,this._writeBuffer.push(d),this._callbacks.push(void 0),this._syncCalls++,!this._isSyncWriting){var e;for(this._isSyncWriting=!0;e=this._writeBuffer.shift();){this._action(e);var v=this._callbacks.shift();v&&v()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}},_.prototype.write=function(d,f){var e=this;if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout(function(){return e._innerWrite()})),this._pendingData+=d.length,this._writeBuffer.push(d),this._callbacks.push(f)},_.prototype._innerWrite=function(d,f){var e=this;void 0===d&&(d=0),void 0===f&&(f=!0);for(var v=d||Date.now();this._writeBuffer.length>this._bufferOffset;){var n=this._writeBuffer[this._bufferOffset],s=this._action(n,f);if(s)return void s.catch(function(o){return m(function(){throw o}),Promise.resolve(!1)}).then(function(o){return Date.now()-v>=12?setTimeout(function(){return e._innerWrite(0,o)}):e._innerWrite(v,o)});var u=this._callbacks[this._bufferOffset];if(u&&u(),this._bufferOffset++,this._pendingData-=n.length,Date.now()-v>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(function(){return e._innerWrite()})):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0)},_}();a.WriteBuffer=h},5770:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PAYLOAD_LIMIT=void 0,a.PAYLOAD_LIMIT=1e7},6351:(F,a,m)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DcsHandler=a.DcsParser=void 0;var h=m(482),_=m(8742),d=m(5770),f=[],e=function(){function s(){this._handlers=Object.create(null),this._active=f,this._ident=0,this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return s.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=f},s.prototype.registerHandler=function(u,o){void 0===this._handlers[u]&&(this._handlers[u]=[]);var r=this._handlers[u];return r.push(o),{dispose:function(){var t=r.indexOf(o);-1!==t&&r.splice(t,1)}}},s.prototype.clearHandler=function(u){this._handlers[u]&&delete this._handlers[u]},s.prototype.setHandlerFallback=function(u){this._handlerFb=u},s.prototype.reset=function(){if(this._active.length)for(var u=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;u>=0;--u)this._active[u].unhook(!1);this._stack.paused=!1,this._active=f,this._ident=0},s.prototype.hook=function(u,o){if(this.reset(),this._ident=u,this._active=this._handlers[u]||f,this._active.length)for(var r=this._active.length-1;r>=0;r--)this._active[r].hook(o);else this._handlerFb(this._ident,"HOOK",o)},s.prototype.put=function(u,o,r){if(this._active.length)for(var t=this._active.length-1;t>=0;t--)this._active[t].put(u,o,r);else this._handlerFb(this._ident,"PUT",h.utf32ToString(u,o,r))},s.prototype.unhook=function(u,o){if(void 0===o&&(o=!0),this._active.length){var r=!1,t=this._active.length-1,i=!1;if(this._stack.paused&&(t=this._stack.loopPosition-1,r=o,i=this._stack.fallThrough,this._stack.paused=!1),!i&&!1===r){for(;t>=0&&!0!==(r=this._active[t].unhook(u));t--)if(r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=t,this._stack.fallThrough=!1,r;t--}for(;t>=0;t--)if((r=this._active[t].unhook(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=t,this._stack.fallThrough=!0,r}else this._handlerFb(this._ident,"UNHOOK",u);this._active=f,this._ident=0},s}();a.DcsParser=e;var v=new _.Params;v.addParam(0);var n=function(){function s(u){this._handler=u,this._data="",this._params=v,this._hitLimit=!1}return s.prototype.hook=function(u){this._params=u.length>1||u.params[0]?u.clone():v,this._data="",this._hitLimit=!1},s.prototype.put=function(u,o,r){this._hitLimit||(this._data+=h.utf32ToString(u,o,r),this._data.length>d.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},s.prototype.unhook=function(u){var o=this,r=!1;if(this._hitLimit)r=!1;else if(u&&(r=this._handler(this._data,this._params))instanceof Promise)return r.then(function(t){return o._params=v,o._data="",o._hitLimit=!1,t});return this._params=v,this._data="",this._hitLimit=!1,r},s}();a.DcsHandler=n},2015:function(F,a,m){var h,_=this&&this.__extends||(h=function(r,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,c){i.__proto__=c}||function(i,c){for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(i[l]=c[l])})(r,t)},function(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=r}h(r,t),r.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(a,"__esModule",{value:!0}),a.EscapeSequenceParser=a.VT500_TRANSITION_TABLE=a.TransitionTable=void 0;var d=m(844),f=m(8273),e=m(8742),v=m(6242),n=m(6351),s=function(){function r(t){this.table=new Uint8Array(t)}return r.prototype.setDefault=function(t,i){f.fill(this.table,t<<4|i)},r.prototype.add=function(t,i,c,l){this.table[i<<8|t]=c<<4|l},r.prototype.addMany=function(t,i,c,l){for(var p=0;p<t.length;p++)this.table[i<<8|t[p]]=c<<4|l},r}();a.TransitionTable=s;var u=160;a.VT500_TRANSITION_TABLE=function(){var r=new s(4095),t=Array.apply(null,Array(256)).map(function(w,y){return y}),i=function(w,y){return t.slice(w,y)},c=i(32,127),l=i(0,24);l.push(25),l.push.apply(l,i(28,32));var p,g=i(0,14);for(p in r.setDefault(1,0),r.addMany(c,0,2,0),g)r.addMany([24,26,153,154],p,3,0),r.addMany(i(128,144),p,3,0),r.addMany(i(144,152),p,3,0),r.add(156,p,0,0),r.add(27,p,11,1),r.add(157,p,4,8),r.addMany([152,158,159],p,0,7),r.add(155,p,11,3),r.add(144,p,11,9);return r.addMany(l,0,3,0),r.addMany(l,1,3,1),r.add(127,1,0,1),r.addMany(l,8,0,8),r.addMany(l,3,3,3),r.add(127,3,0,3),r.addMany(l,4,3,4),r.add(127,4,0,4),r.addMany(l,6,3,6),r.addMany(l,5,3,5),r.add(127,5,0,5),r.addMany(l,2,3,2),r.add(127,2,0,2),r.add(93,1,4,8),r.addMany(c,8,5,8),r.add(127,8,5,8),r.addMany([156,27,24,26,7],8,6,0),r.addMany(i(28,32),8,0,8),r.addMany([88,94,95],1,0,7),r.addMany(c,7,0,7),r.addMany(l,7,0,7),r.add(156,7,0,0),r.add(127,7,0,7),r.add(91,1,11,3),r.addMany(i(64,127),3,7,0),r.addMany(i(48,60),3,8,4),r.addMany([60,61,62,63],3,9,4),r.addMany(i(48,60),4,8,4),r.addMany(i(64,127),4,7,0),r.addMany([60,61,62,63],4,0,6),r.addMany(i(32,64),6,0,6),r.add(127,6,0,6),r.addMany(i(64,127),6,0,0),r.addMany(i(32,48),3,9,5),r.addMany(i(32,48),5,9,5),r.addMany(i(48,64),5,0,6),r.addMany(i(64,127),5,7,0),r.addMany(i(32,48),4,9,5),r.addMany(i(32,48),1,9,2),r.addMany(i(32,48),2,9,2),r.addMany(i(48,127),2,10,0),r.addMany(i(48,80),1,10,0),r.addMany(i(81,88),1,10,0),r.addMany([89,90,92],1,10,0),r.addMany(i(96,127),1,10,0),r.add(80,1,11,9),r.addMany(l,9,0,9),r.add(127,9,0,9),r.addMany(i(28,32),9,0,9),r.addMany(i(32,48),9,9,12),r.addMany(i(48,60),9,8,10),r.addMany([60,61,62,63],9,9,10),r.addMany(l,11,0,11),r.addMany(i(32,128),11,0,11),r.addMany(i(28,32),11,0,11),r.addMany(l,10,0,10),r.add(127,10,0,10),r.addMany(i(28,32),10,0,10),r.addMany(i(48,60),10,8,10),r.addMany([60,61,62,63],10,0,11),r.addMany(i(32,48),10,9,12),r.addMany(l,12,0,12),r.add(127,12,0,12),r.addMany(i(28,32),12,0,12),r.addMany(i(32,48),12,9,12),r.addMany(i(48,64),12,0,11),r.addMany(i(64,127),12,12,13),r.addMany(i(64,127),10,12,13),r.addMany(i(64,127),9,12,13),r.addMany(l,13,13,13),r.addMany(c,13,13,13),r.add(127,13,0,13),r.addMany([27,156,24,26],13,14,0),r.add(u,0,2,0),r.add(u,8,5,8),r.add(u,6,0,6),r.add(u,11,0,11),r.add(u,13,13,13),r}();var o=function(r){function t(i){void 0===i&&(i=a.VT500_TRANSITION_TABLE);var c=r.call(this)||this;return c._transitions=i,c._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},c.initialState=0,c.currentState=c.initialState,c._params=new e.Params,c._params.addParam(0),c._collect=0,c.precedingCodepoint=0,c._printHandlerFb=function(l,p,g){},c._executeHandlerFb=function(l){},c._csiHandlerFb=function(l,p){},c._escHandlerFb=function(l){},c._errorHandlerFb=function(l){return l},c._printHandler=c._printHandlerFb,c._executeHandlers=Object.create(null),c._csiHandlers=Object.create(null),c._escHandlers=Object.create(null),c._oscParser=new v.OscParser,c._dcsParser=new n.DcsParser,c._errorHandler=c._errorHandlerFb,c.registerEscHandler({final:"\\"},function(){return!0}),c}return _(t,r),t.prototype._identifier=function(i,c){void 0===c&&(c=[64,126]);var l=0;if(i.prefix){if(i.prefix.length>1)throw new Error("only one byte as prefix supported");if((l=i.prefix.charCodeAt(0))&&60>l||l>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(i.intermediates){if(i.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(var p=0;p<i.intermediates.length;++p){var g=i.intermediates.charCodeAt(p);if(32>g||g>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");l<<=8,l|=g}}if(1!==i.final.length)throw new Error("final must be a single byte");var w=i.final.charCodeAt(0);if(c[0]>w||w>c[1])throw new Error("final must be in range "+c[0]+" .. "+c[1]);return(l<<=8)|w},t.prototype.identToString=function(i){for(var c=[];i;)c.push(String.fromCharCode(255&i)),i>>=8;return c.reverse().join("")},t.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},t.prototype.setPrintHandler=function(i){this._printHandler=i},t.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},t.prototype.registerEscHandler=function(i,c){var l=this._identifier(i,[48,126]);void 0===this._escHandlers[l]&&(this._escHandlers[l]=[]);var p=this._escHandlers[l];return p.push(c),{dispose:function(){var g=p.indexOf(c);-1!==g&&p.splice(g,1)}}},t.prototype.clearEscHandler=function(i){this._escHandlers[this._identifier(i,[48,126])]&&delete this._escHandlers[this._identifier(i,[48,126])]},t.prototype.setEscHandlerFallback=function(i){this._escHandlerFb=i},t.prototype.setExecuteHandler=function(i,c){this._executeHandlers[i.charCodeAt(0)]=c},t.prototype.clearExecuteHandler=function(i){this._executeHandlers[i.charCodeAt(0)]&&delete this._executeHandlers[i.charCodeAt(0)]},t.prototype.setExecuteHandlerFallback=function(i){this._executeHandlerFb=i},t.prototype.registerCsiHandler=function(i,c){var l=this._identifier(i);void 0===this._csiHandlers[l]&&(this._csiHandlers[l]=[]);var p=this._csiHandlers[l];return p.push(c),{dispose:function(){var g=p.indexOf(c);-1!==g&&p.splice(g,1)}}},t.prototype.clearCsiHandler=function(i){this._csiHandlers[this._identifier(i)]&&delete this._csiHandlers[this._identifier(i)]},t.prototype.setCsiHandlerFallback=function(i){this._csiHandlerFb=i},t.prototype.registerDcsHandler=function(i,c){return this._dcsParser.registerHandler(this._identifier(i),c)},t.prototype.clearDcsHandler=function(i){this._dcsParser.clearHandler(this._identifier(i))},t.prototype.setDcsHandlerFallback=function(i){this._dcsParser.setHandlerFallback(i)},t.prototype.registerOscHandler=function(i,c){return this._oscParser.registerHandler(i,c)},t.prototype.clearOscHandler=function(i){this._oscParser.clearHandler(i)},t.prototype.setOscHandlerFallback=function(i){this._oscParser.setHandlerFallback(i)},t.prototype.setErrorHandler=function(i){this._errorHandler=i},t.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},t.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,0!==this._parseStack.state&&(this._parseStack.state=2,this._parseStack.handlers=[])},t.prototype._preserveStack=function(i,c,l,p,g){this._parseStack.state=i,this._parseStack.handlers=c,this._parseStack.handlerPos=l,this._parseStack.transition=p,this._parseStack.chunkPos=g},t.prototype.parse=function(i,c,l){var p,g=0,w=0,y=0;if(this._parseStack.state)if(2===this._parseStack.state)this._parseStack.state=0,y=this._parseStack.chunkPos+1;else{if(void 0===l||1===this._parseStack.state)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");var S=this._parseStack.handlers,C=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(!1===l&&C>-1)for(;C>=0&&!0!==(p=S[C](this._params));C--)if(p instanceof Promise)return this._parseStack.handlerPos=C,p;this._parseStack.handlers=[];break;case 4:if(!1===l&&C>-1)for(;C>=0&&!0!==(p=S[C]());C--)if(p instanceof Promise)return this._parseStack.handlerPos=C,p;this._parseStack.handlers=[];break;case 6:if(p=this._dcsParser.unhook(24!==(g=i[this._parseStack.chunkPos])&&26!==g,l))return p;27===g&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(p=this._oscParser.end(24!==(g=i[this._parseStack.chunkPos])&&26!==g,l))return p;27===g&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,y=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(var T=y;T<c;++T){switch((w=this._transitions.table[this.currentState<<8|((g=i[T])<160?g:u)])>>4){case 2:for(var L=T+1;;++L){if(L>=c||(g=i[L])<32||g>126&&g<u){this._printHandler(i,T,L),T=L-1;break}if(++L>=c||(g=i[L])<32||g>126&&g<u){this._printHandler(i,T,L),T=L-1;break}if(++L>=c||(g=i[L])<32||g>126&&g<u){this._printHandler(i,T,L),T=L-1;break}if(++L>=c||(g=i[L])<32||g>126&&g<u){this._printHandler(i,T,L),T=L-1;break}}break;case 3:this._executeHandlers[g]?this._executeHandlers[g]():this._executeHandlerFb(g),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:T,code:g,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:for(var M=(S=this._csiHandlers[this._collect<<8|g])?S.length-1:-1;M>=0&&!0!==(p=S[M](this._params));M--)if(p instanceof Promise)return this._preserveStack(3,S,M,w,T),p;M<0&&this._csiHandlerFb(this._collect<<8|g,this._params),this.precedingCodepoint=0;break;case 8:do{switch(g){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(g-48)}}while(++T<c&&(g=i[T])>47&&g<60);T--;break;case 9:this._collect<<=8,this._collect|=g;break;case 10:for(var k=this._escHandlers[this._collect<<8|g],E=k?k.length-1:-1;E>=0&&!0!==(p=k[E]());E--)if(p instanceof Promise)return this._preserveStack(4,k,E,w,T),p;E<0&&this._escHandlerFb(this._collect<<8|g),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|g,this._params);break;case 13:for(var H=T+1;;++H)if(H>=c||24===(g=i[H])||26===g||27===g||g>127&&g<u){this._dcsParser.put(i,T,H),T=H-1;break}break;case 14:if(p=this._dcsParser.unhook(24!==g&&26!==g))return this._preserveStack(6,[],0,w,T),p;27===g&&(w|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(var D=T+1;;D++)if(D>=c||(g=i[D])<32||g>127&&g<u){this._oscParser.put(i,T,D),T=D-1;break}break;case 6:if(p=this._oscParser.end(24!==g&&26!==g))return this._preserveStack(5,[],0,w,T),p;27===g&&(w|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&w}},t}(d.Disposable);a.EscapeSequenceParser=o},6242:(F,a,m)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.OscHandler=a.OscParser=void 0;var h=m(5770),_=m(482),d=[],f=function(){function v(){this._state=0,this._active=d,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return v.prototype.registerHandler=function(n,s){void 0===this._handlers[n]&&(this._handlers[n]=[]);var u=this._handlers[n];return u.push(s),{dispose:function(){var o=u.indexOf(s);-1!==o&&u.splice(o,1)}}},v.prototype.clearHandler=function(n){this._handlers[n]&&delete this._handlers[n]},v.prototype.setHandlerFallback=function(n){this._handlerFb=n},v.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=d},v.prototype.reset=function(){if(2===this._state)for(var n=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;n>=0;--n)this._active[n].end(!1);this._stack.paused=!1,this._active=d,this._id=-1,this._state=0},v.prototype._start=function(){if(this._active=this._handlers[this._id]||d,this._active.length)for(var n=this._active.length-1;n>=0;n--)this._active[n].start();else this._handlerFb(this._id,"START")},v.prototype._put=function(n,s,u){if(this._active.length)for(var o=this._active.length-1;o>=0;o--)this._active[o].put(n,s,u);else this._handlerFb(this._id,"PUT",_.utf32ToString(n,s,u))},v.prototype.start=function(){this.reset(),this._state=1},v.prototype.put=function(n,s,u){if(3!==this._state){if(1===this._state)for(;s<u;){var o=n[s++];if(59===o){this._state=2,this._start();break}if(o<48||57<o)return void(this._state=3);-1===this._id&&(this._id=0),this._id=10*this._id+o-48}2===this._state&&u-s>0&&this._put(n,s,u)}},v.prototype.end=function(n,s){if(void 0===s&&(s=!0),0!==this._state){if(3!==this._state)if(1===this._state&&this._start(),this._active.length){var u=!1,o=this._active.length-1,r=!1;if(this._stack.paused&&(o=this._stack.loopPosition-1,u=s,r=this._stack.fallThrough,this._stack.paused=!1),!r&&!1===u){for(;o>=0&&!0!==(u=this._active[o].end(n));o--)if(u instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!1,u;o--}for(;o>=0;o--)if((u=this._active[o].end(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!0,u}else this._handlerFb(this._id,"END",n);this._active=d,this._id=-1,this._state=0}},v}();a.OscParser=f;var e=function(){function v(n){this._handler=n,this._data="",this._hitLimit=!1}return v.prototype.start=function(){this._data="",this._hitLimit=!1},v.prototype.put=function(n,s,u){this._hitLimit||(this._data+=_.utf32ToString(n,s,u),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},v.prototype.end=function(n){var s=this,u=!1;if(this._hitLimit)u=!1;else if(n&&(u=this._handler(this._data))instanceof Promise)return u.then(function(o){return s._data="",s._hitLimit=!1,o});return this._data="",this._hitLimit=!1,u},v}();a.OscHandler=e},8742:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Params=void 0;var m=2147483647,h=function(){function _(d,f){if(void 0===d&&(d=32),void 0===f&&(f=32),this.maxLength=d,this.maxSubParamsLength=f,f>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(d),this.length=0,this._subParams=new Int32Array(f),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(d),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}return _.fromArray=function(d){var f=new _;if(!d.length)return f;for(var e=d[0]instanceof Array?1:0;e<d.length;++e){var v=d[e];if(v instanceof Array)for(var n=0;n<v.length;++n)f.addSubParam(v[n]);else f.addParam(v)}return f},_.prototype.clone=function(){var d=new _(this.maxLength,this.maxSubParamsLength);return d.params.set(this.params),d.length=this.length,d._subParams.set(this._subParams),d._subParamsLength=this._subParamsLength,d._subParamsIdx.set(this._subParamsIdx),d._rejectDigits=this._rejectDigits,d._rejectSubDigits=this._rejectSubDigits,d._digitIsSub=this._digitIsSub,d},_.prototype.toArray=function(){for(var d=[],f=0;f<this.length;++f){d.push(this.params[f]);var e=this._subParamsIdx[f]>>8,v=255&this._subParamsIdx[f];v-e>0&&d.push(Array.prototype.slice.call(this._subParams,e,v))}return d},_.prototype.reset=function(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1},_.prototype.addParam=function(d){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(d<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=d>m?m:d}},_.prototype.addSubParam=function(d){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(d<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=d>m?m:d,this._subParamsIdx[this.length-1]++}},_.prototype.hasSubParams=function(d){return(255&this._subParamsIdx[d])-(this._subParamsIdx[d]>>8)>0},_.prototype.getSubParams=function(d){var f=this._subParamsIdx[d]>>8,e=255&this._subParamsIdx[d];return e-f>0?this._subParams.subarray(f,e):null},_.prototype.getSubParamsAll=function(){for(var d={},f=0;f<this.length;++f){var e=this._subParamsIdx[f]>>8,v=255&this._subParamsIdx[f];v-e>0&&(d[f]=this._subParams.slice(e,v))}return d},_.prototype.addDigit=function(d){var f;if(!(this._rejectDigits||!(f=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var e=this._digitIsSub?this._subParams:this.params,v=e[f-1];e[f-1]=~v?Math.min(10*v+d,m):d}},_}();a.Params=h},5741:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.AddonManager=void 0;var m=function(){function h(){this._addons=[]}return h.prototype.dispose=function(){for(var _=this._addons.length-1;_>=0;_--)this._addons[_].instance.dispose()},h.prototype.loadAddon=function(_,d){var f=this,e={instance:d,dispose:d.dispose,isDisposed:!1};this._addons.push(e),d.dispose=function(){return f._wrappedAddonDispose(e)},d.activate(_)},h.prototype._wrappedAddonDispose=function(_){if(!_.isDisposed){for(var d=-1,f=0;f<this._addons.length;f++)if(this._addons[f]===_){d=f;break}if(-1===d)throw new Error("Could not dispose an addon that has not been loaded");_.isDisposed=!0,_.dispose.apply(_.instance),this._addons.splice(d,1)}},h}();a.AddonManager=m},8771:(F,a,m)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferApiView=void 0;var h=m(3785),_=m(511),d=function(){function f(e,v){this._buffer=e,this.type=v}return f.prototype.init=function(e){return this._buffer=e,this},Object.defineProperty(f.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!1,configurable:!0}),f.prototype.getLine=function(e){var v=this._buffer.lines.get(e);if(v)return new h.BufferLineApiView(v)},f.prototype.getNullCell=function(){return new _.CellData},f}();a.BufferApiView=d},3785:(F,a,m)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferLineApiView=void 0;var h=m(511),_=function(){function d(f){this._line=f}return Object.defineProperty(d.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"length",{get:function(){return this._line.length},enumerable:!1,configurable:!0}),d.prototype.getCell=function(f,e){if(!(f<0||f>=this._line.length))return e?(this._line.loadCell(f,e),e):this._line.loadCell(f,new h.CellData)},d.prototype.translateToString=function(f,e,v){return this._line.translateToString(f,e,v)},d}();a.BufferLineApiView=_},8285:(F,a,m)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferNamespaceApi=void 0;var h=m(8771),_=m(8460),d=function(){function f(e){var v=this;this._core=e,this._onBufferChange=new _.EventEmitter,this._normal=new h.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new h.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(function(){return v._onBufferChange.fire(v.active)})}return Object.defineProperty(f.prototype,"onBufferChange",{get:function(){return this._onBufferChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"active",{get:function(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"normal",{get:function(){return this._normal.init(this._core.buffers.normal)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"alternate",{get:function(){return this._alternate.init(this._core.buffers.alt)},enumerable:!1,configurable:!0}),f}();a.BufferNamespaceApi=d},7975:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ParserApi=void 0;var m=function(){function h(_){this._core=_}return h.prototype.registerCsiHandler=function(_,d){return this._core.registerCsiHandler(_,function(f){return d(f.toArray())})},h.prototype.addCsiHandler=function(_,d){return this.registerCsiHandler(_,d)},h.prototype.registerDcsHandler=function(_,d){return this._core.registerDcsHandler(_,function(f,e){return d(f,e.toArray())})},h.prototype.addDcsHandler=function(_,d){return this.registerDcsHandler(_,d)},h.prototype.registerEscHandler=function(_,d){return this._core.registerEscHandler(_,d)},h.prototype.addEscHandler=function(_,d){return this.registerEscHandler(_,d)},h.prototype.registerOscHandler=function(_,d){return this._core.registerOscHandler(_,d)},h.prototype.addOscHandler=function(_,d){return this.registerOscHandler(_,d)},h}();a.ParserApi=m},7090:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeApi=void 0;var m=function(){function h(_){this._core=_}return h.prototype.register=function(_){this._core.unicodeService.register(_)},Object.defineProperty(h.prototype,"versions",{get:function(){return this._core.unicodeService.versions},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"activeVersion",{get:function(){return this._core.unicodeService.activeVersion},set:function(_){this._core.unicodeService.activeVersion=_},enumerable:!1,configurable:!0}),h}();a.UnicodeApi=m},744:function(F,a,m){var h,_=this&&this.__extends||(h=function(o,r){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(t[c]=i[c])})(o,r)},function(o,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function t(){this.constructor=o}h(o,r),o.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}),d=this&&this.__decorate||function(o,r,t,i){var c,l=arguments.length,p=l<3?r:null===i?i=Object.getOwnPropertyDescriptor(r,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)p=Reflect.decorate(o,r,t,i);else for(var g=o.length-1;g>=0;g--)(c=o[g])&&(p=(l<3?c(p):l>3?c(r,t,p):c(r,t))||p);return l>3&&p&&Object.defineProperty(r,t,p),p},f=this&&this.__param||function(o,r){return function(t,i){r(t,i,o)}};Object.defineProperty(a,"__esModule",{value:!0}),a.BufferService=a.MINIMUM_ROWS=a.MINIMUM_COLS=void 0;var e=m(2585),v=m(5295),n=m(8460),s=m(844);a.MINIMUM_COLS=2,a.MINIMUM_ROWS=1;var u=function(o){function r(t){var i=o.call(this)||this;return i._optionsService=t,i.isUserScrolling=!1,i._onResize=new n.EventEmitter,i._onScroll=new n.EventEmitter,i.cols=Math.max(t.options.cols||0,a.MINIMUM_COLS),i.rows=Math.max(t.options.rows||0,a.MINIMUM_ROWS),i.buffers=new v.BufferSet(t,i),i}return _(r,o),Object.defineProperty(r.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),r.prototype.dispose=function(){o.prototype.dispose.call(this),this.buffers.dispose()},r.prototype.resize=function(t,i){this.cols=t,this.rows=i,this.buffers.resize(t,i),this.buffers.setupTabStops(this.cols),this._onResize.fire({cols:t,rows:i})},r.prototype.reset=function(){this.buffers.reset(),this.isUserScrolling=!1},r.prototype.scroll=function(t,i){void 0===i&&(i=!1);var c,l=this.buffer;(c=this._cachedBlankLine)&&c.length===this.cols&&c.getFg(0)===t.fg&&c.getBg(0)===t.bg||(c=l.getBlankLine(t,i),this._cachedBlankLine=c),c.isWrapped=i;var p=l.ybase+l.scrollTop,g=l.ybase+l.scrollBottom;if(0===l.scrollTop){var w=l.lines.isFull;g===l.lines.length-1?w?l.lines.recycle().copyFrom(c):l.lines.push(c.clone()):l.lines.splice(g+1,0,c.clone()),w?this.isUserScrolling&&(l.ydisp=Math.max(l.ydisp-1,0)):(l.ybase++,this.isUserScrolling||l.ydisp++)}else l.lines.shiftElements(p+1,g-p+1-1,-1),l.lines.set(g,c.clone());this.isUserScrolling||(l.ydisp=l.ybase),this._onScroll.fire(l.ydisp)},r.prototype.scrollLines=function(t,i,c){var l=this.buffer;if(t<0){if(0===l.ydisp)return;this.isUserScrolling=!0}else t+l.ydisp>=l.ybase&&(this.isUserScrolling=!1);var p=l.ydisp;l.ydisp=Math.max(Math.min(l.ydisp+t,l.ybase),0),p!==l.ydisp&&(i||this._onScroll.fire(l.ydisp))},r.prototype.scrollPages=function(t){this.scrollLines(t*(this.rows-1))},r.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},r.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},r.prototype.scrollToLine=function(t){var i=t-this.buffer.ydisp;0!==i&&this.scrollLines(i)},d([f(0,e.IOptionsService)],r)}(s.Disposable);a.BufferService=u},7994:(F,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CharsetService=void 0;var m=function(){function h(){this.glevel=0,this._charsets=[]}return h.prototype.reset=function(){this.charset=void 0,this._charsets=[],this.glevel=0},h.prototype.setgLevel=function(_){this.glevel=_,this.charset=this._charsets[_]},h.prototype.setgCharset=function(_,d){this._charsets[_]=d,this.glevel===_&&(this.charset=d)},h}();a.CharsetService=m},1753:function(F,a,m){var h=this&&this.__decorate||function(o,r,t,i){var c,l=arguments.length,p=l<3?r:null===i?i=Object.getOwnPropertyDescriptor(r,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)p=Reflect.decorate(o,r,t,i);else for(var g=o.length-1;g>=0;g--)(c=o[g])&&(p=(l<3?c(p):l>3?c(r,t,p):c(r,t))||p);return l>3&&p&&Object.defineProperty(r,t,p),p},_=this&&this.__param||function(o,r){return function(t,i){r(t,i,o)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CoreMouseService=void 0;var d=m(2585),f=m(8460),e={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(o){return 4!==o.button&&1===o.action&&(o.ctrl=!1,o.alt=!1,o.shift=!1,!0)}},VT200:{events:19,restrict:function(o){return 32!==o.action}},DRAG:{events:23,restrict:function(o){return 32!==o.action||3!==o.button}},ANY:{events:31,restrict:function(o){return!0}}};function v(o,r){var t=(o.ctrl?16:0)|(o.shift?4:0)|(o.alt?8:0);return 4===o.button?(t|=64,t|=o.action):(t|=3&o.button,4&o.button&&(t|=64),8&o.button&&(t|=128),32===o.action?t|=32:0!==o.action||r||(t|=3)),t}var n=String.fromCharCode,s={DEFAULT:function(o){var r=[v(o,!1)+32,o.col+32,o.row+32];return r[0]>255||r[1]>255||r[2]>255?"":"\x1b[M"+n(r[0])+n(r[1])+n(r[2])},SGR:function(o){var r=0===o.action&&4!==o.button?"m":"M";return"\x1b[<"+v(o,!0)+";"+o.col+";"+o.row+r}},u=function(){function o(r,t){this._bufferService=r,this._coreService=t,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._onProtocolChange=new f.EventEmitter,this._lastEvent=null;for(var i=0,c=Object.keys(e);i<c.length;i++){var l=c[i];this.addProtocol(l,e[l])}for(var p=0,g=Object.keys(s);p<g.length;p++){var w=g[p];this.addEncoding(w,s[w])}this.reset()}return o.prototype.addProtocol=function(r,t){this._protocols[r]=t},o.prototype.addEncoding=function(r,t){this._encodings[r]=t},Object.defineProperty(o.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(r){if(!this._protocols[r])throw new Error('unknown protocol "'+r+'"');this._activeProtocol=r,this._onProtocolChange.fire(this._protocols[r].events)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"areMouseEventsActive",{get:function(){return 0!==this._protocols[this._activeProtocol].events},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(r){if(!this._encodings[r])throw new Error('unknown encoding "'+r+'"');this._activeEncoding=r},enumerable:!1,configurable:!0}),o.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(o.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!1,configurable:!0}),o.prototype.triggerMouseEvent=function(r){if(r.col<0||r.col>=this._bufferService.cols||r.row<0||r.row>=this._bufferService.rows||4===r.button&&32===r.action||3===r.button&&32!==r.action||4!==r.button&&(2===r.action||3===r.action)||(r.col++,r.row++,32===r.action&&this._lastEvent&&this._compareEvents(this._lastEvent,r))||!this._protocols[this._activeProtocol].restrict(r))return!1;var t=this._encodings[this._activeEncoding](r);return t&&("DEFAULT"===this._activeEncoding?this._coreService.triggerBinaryEvent(t):this._coreService.triggerDataEvent(t,!0)),this._lastEvent=r,!0},o.prototype.explainEvents=function(r){return{down:!!(1&r),up:!!(2&r),drag:!!(4&r),move:!!(8&r),wheel:!!(16&r)}},o.prototype._compareEvents=function(r,t){return r.col===t.col&&r.row===t.row&&r.button===t.button&&r.action===t.action&&r.ctrl===t.ctrl&&r.alt===t.alt&&r.shift===t.shift},h([_(0,d.IBufferService),_(1,d.ICoreService)],o)}();a.CoreMouseService=u},6975:function(F,a,m){var h,_=this&&this.__extends||(h=function(t,i){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(c[p]=l[p])})(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function c(){this.constructor=t}h(t,i),t.prototype=null===i?Object.create(i):(c.prototype=i.prototype,new c)}),d=this&&this.__decorate||function(t,i,c,l){var p,g=arguments.length,w=g<3?i:null===l?l=Object.getOwnPropertyDescriptor(i,c):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)w=Reflect.decorate(t,i,c,l);else for(var y=t.length-1;y>=0;y--)(p=t[y])&&(w=(g<3?p(w):g>3?p(i,c,w):p(i,c))||w);return g>3&&w&&Object.defineProperty(i,c,w),w},f=this&&this.__param||function(t,i){return function(c,l){i(c,l,t)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CoreService=void 0;var e=m(2585),v=m(8460),n=m(1439),s=m(844),u=Object.freeze({insertMode:!1}),o=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),r=function(t){function i(c,l,p,g){var w=t.call(this)||this;return w._bufferService=l,w._logService=p,w._optionsService=g,w.isCursorInitialized=!1,w.isCursorHidden=!1,w._onData=w.register(new v.EventEmitter),w._onUserInput=w.register(new v.EventEmitter),w._onBinary=w.register(new v.EventEmitter),w._scrollToBottom=c,w.register({dispose:function(){return w._scrollToBottom=void 0}}),w.modes=n.clone(u),w.decPrivateModes=n.clone(o),w}return _(i,t),Object.defineProperty(i.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),i.prototype.reset=function(){this.modes=n.clone(u),this.decPrivateModes=n.clone(o)},i.prototype.triggerDataEvent=function(c,l){if(void 0===l&&(l=!1),!this._optionsService.options.disableStdin){var p=this._bufferService.buffer;p.ybase!==p.ydisp&&this._scrollToBottom(),l&&this._onUserInput.fire(),this._logService.debug('sending data "'+c+'"',function(){return c.split("").map(function(g){return g.charCodeAt(0)})}),this._onData.fire(c)}},i.prototype.triggerBinaryEvent=function(c){this._optionsService.options.disableStdin||(this._logService.debug('sending binary "'+c+'"',function(){return c.split("").map(function(l){return l.charCodeAt(0)})}),this._onBinary.fire(c))},d([f(1,e.IBufferService),f(2,e.ILogService),f(3,e.IOptionsService)],i)}(s.Disposable);a.CoreService=r},3730:function(F,a,m){var h=this&&this.__decorate||function(e,v,n,s){var u,o=arguments.length,r=o<3?v:null===s?s=Object.getOwnPropertyDescriptor(v,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,v,n,s);else for(var t=e.length-1;t>=0;t--)(u=e[t])&&(r=(o<3?u(r):o>3?u(v,n,r):u(v,n))||r);return o>3&&r&&Object.defineProperty(v,n,r),r},_=this&&this.__param||function(e,v){return function(n,s){v(n,s,e)}};Object.defineProperty(a,"__esModule",{value:!0}),a.DirtyRowService=void 0;var d=m(2585),f=function(){function e(v){this._bufferService=v,this.clearRange()}return Object.defineProperty(e.prototype,"start",{get:function(){return this._start},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this._end},enumerable:!1,configurable:!0}),e.prototype.clearRange=function(){this._start=this._bufferService.buffer.y,this._end=this._bufferService.buffer.y},e.prototype.markDirty=function(v){v<this._start?this._start=v:v>this._end&&(this._end=v)},e.prototype.markRangeDirty=function(v,n){if(v>n){var s=v;v=n,n=s}v<this._start&&(this._start=v),n>this._end&&(this._end=n)},e.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},h([_(0,d.IBufferService)],e)}();a.DirtyRowService=f},4348:function(F,a,m){var h=this&&this.__spreadArray||function(v,n){for(var s=0,u=n.length,o=v.length;s<u;s++,o++)v[o]=n[s];return v};Object.defineProperty(a,"__esModule",{value:!0}),a.InstantiationService=a.ServiceCollection=void 0;var _=m(2585),d=m(8343),f=function(){function v(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];this._entries=new Map;for(var u=0,o=n;u<o.length;u++){var r=o[u];this.set(r[0],r[1])}}return v.prototype.set=function(n,s){var u=this._entries.get(n);return this._entries.set(n,s),u},v.prototype.forEach=function(n){this._entries.forEach(function(s,u){return n(u,s)})},v.prototype.has=function(n){return this._entries.has(n)},v.prototype.get=function(n){return this._entries.get(n)},v}();a.ServiceCollection=f;var e=function(){function v(){this._services=new f,this._services.set(_.IInstantiationService,this)}return v.prototype.setService=function(n,s){this._services.set(n,s)},v.prototype.getService=function(n){return this._services.get(n)},v.prototype.createInstance=function(n){for(var s=[],u=1;u<arguments.length;u++)s[u-1]=arguments[u];for(var o=d.getServiceDependencies(n).sort(function(g,w){return g.index-w.index}),r=[],t=0,i=o;t<i.length;t++){var c=i[t],l=this._services.get(c.id);if(!l)throw new Error("[createInstance] "+n.name+" depends on UNKNOWN service "+c.id+".");r.push(l)}var p=o.length>0?o[0].index:s.length;if(s.length!==p)throw new Error("[createInstance] First service dependency of "+n.name+" at position "+(p+1)+" conflicts with "+s.length+" static arguments");return new(n.bind.apply(n,h([void 0],h(h([],s),r))))},v}();a.InstantiationService=e},7866:function(F,a,m){var h=this&&this.__decorate||function(n,s,u,o){var r,t=arguments.length,i=t<3?s:null===o?o=Object.getOwnPropertyDescriptor(s,u):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(n,s,u,o);else for(var c=n.length-1;c>=0;c--)(r=n[c])&&(i=(t<3?r(i):t>3?r(s,u,i):r(s,u))||i);return t>3&&i&&Object.defineProperty(s,u,i),i},_=this&&this.__param||function(n,s){return function(u,o){s(u,o,n)}},d=this&&this.__spreadArray||function(n,s){for(var u=0,o=s.length,r=n.length;u<o;u++,r++)n[r]=s[u];return n};Object.defineProperty(a,"__esModule",{value:!0}),a.LogService=void 0;var f=m(2585),e={debug:f.LogLevelEnum.DEBUG,info:f.LogLevelEnum.INFO,warn:f.LogLevelEnum.WARN,error:f.LogLevelEnum.ERROR,off:f.LogLevelEnum.OFF},v=function(){function n(s){var u=this;this._optionsService=s,this.logLevel=f.LogLevelEnum.OFF,this._updateLogLevel(),this._optionsService.onOptionChange(function(o){"logLevel"===o&&u._updateLogLevel()})}return n.prototype._updateLogLevel=function(){this.logLevel=e[this._optionsService.options.logLevel]},n.prototype._evalLazyOptionalParams=function(s){for(var u=0;u<s.length;u++)"function"==typeof s[u]&&(s[u]=s[u]())},n.prototype._log=function(s,u,o){this._evalLazyOptionalParams(o),s.call.apply(s,d([console,"xterm.js: "+u],o))},n.prototype.debug=function(s){for(var u=[],o=1;o<arguments.length;o++)u[o-1]=arguments[o];this.logLevel<=f.LogLevelEnum.DEBUG&&this._log(console.log,s,u)},n.prototype.info=function(s){for(var u=[],o=1;o<arguments.length;o++)u[o-1]=arguments[o];this.logLevel<=f.LogLevelEnum.INFO&&this._log(console.info,s,u)},n.prototype.warn=function(s){for(var u=[],o=1;o<arguments.length;o++)u[o-1]=arguments[o];this.logLevel<=f.LogLevelEnum.WARN&&this._log(console.warn,s,u)},n.prototype.error=function(s){for(var u=[],o=1;o<arguments.length;o++)u[o-1]=arguments[o];this.logLevel<=f.LogLevelEnum.ERROR&&this._log(console.error,s,u)},h([_(0,f.IOptionsService)],n)}();a.LogService=v},7302:(F,a,m)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.OptionsService=a.DEFAULT_OPTIONS=a.DEFAULT_BELL_SOUND=void 0;var h=m(8460),_=m(6114),d=m(1439);a.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",a.DEFAULT_OPTIONS=Object.freeze({cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,customGlyphs:!0,bellSound:a.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,linkTooltipHoverDuration:500,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!0,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:_.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1});var f=["normal","bold","100","200","300","400","500","600","700","800","900"],e=["cols","rows"],v=function(){function n(s){this._onOptionChange=new h.EventEmitter,this.options=d.clone(a.DEFAULT_OPTIONS);for(var u=0,o=Object.keys(s);u<o.length;u++){var r=o[u];if(r in this.options)try{this.options[r]=this._sanitizeAndValidateOption(r,s[r])}catch(i){console.error(i)}}}return Object.defineProperty(n.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!1,configurable:!0}),n.prototype.setOption=function(s,u){if(!(s in a.DEFAULT_OPTIONS))throw new Error('No option with key "'+s+'"');if(e.includes(s))throw new Error('Option "'+s+'" can only be set in the constructor');this.options[s]!==u&&(u=this._sanitizeAndValidateOption(s,u),this.options[s]!==u&&(this.options[s]=u,this._onOptionChange.fire(s)))},n.prototype._sanitizeAndValidateOption=function(s,u){switch(s){case"bellStyle":case"cursorStyle":case"rendererType":case"wordSeparator":u||(u=a.DEFAULT_OPTIONS[s]);break;case"fontWeight":case"fontWeightBold":if("number"==typeof u&&1<=u&&u<=1e3)break;u=f.includes(u)?u:a.DEFAULT_OPTIONS[s];break;case"cursorWidth":u=Math.floor(u);case"lineHeight":case"tabStopWidth":if(u<1)throw new Error(s+" cannot be less than 1, value: "+u);break;case"minimumContrastRatio":u=Math.max(1,Math.min(21,Math.round(10*u)/10));break;case"scrollback":if((u=Math.min(u,4294967295))<0)throw new Error(s+" cannot be less than 0, value: "+u);break;case"fastScrollSensitivity":case"scrollSensitivity":if(u<=0)throw new Error(s+" cannot be less than or equal to 0, value: "+u);case"rows":case"cols":if(!u&&0!==u)throw new Error(s+" must be numeric, value: "+u)}return u},n.prototype.getOption=function(s){if(!(s in a.DEFAULT_OPTIONS))throw new Error('No option with key "'+s+'"');return this.options[s]},n}();a.OptionsService=v},8343:(F,a)=>{function m(h,_,d){_.di$target===_?_.di$dependencies.push({id:h,index:d}):(_.di$dependencies=[{id:h,index:d}],_.di$target=_)}Object.defineProperty(a,"__esModule",{value:!0}),a.createDecorator=a.getServiceDependencies=a.serviceRegistry=void 0,a.serviceRegistry=new Map,a.getServiceDependencies=function(h){return h.di$dependencies||[]},a.createDecorator=function(h){if(a.serviceRegistry.has(h))return a.serviceRegistry.get(h);var _=function(d,f,e){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");m(_,d,e)};return _.toString=function(){return h},a.serviceRegistry.set(h,_),_}},2585:(F,a,m)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.IUnicodeService=a.LogLevelEnum=a.IOptionsService=a.ILogService=a.IInstantiationService=a.IDirtyRowService=a.ICharsetService=a.ICoreService=a.ICoreMouseService=a.IBufferService=void 0;var h,_=m(8343);a.IBufferService=_.createDecorator("BufferService"),a.ICoreMouseService=_.createDecorator("CoreMouseService"),a.ICoreService=_.createDecorator("CoreService"),a.ICharsetService=_.createDecorator("CharsetService"),a.IDirtyRowService=_.createDecorator("DirtyRowService"),a.IInstantiationService=_.createDecorator("InstantiationService"),a.ILogService=_.createDecorator("LogService"),a.IOptionsService=_.createDecorator("OptionsService"),(h=a.LogLevelEnum||(a.LogLevelEnum={}))[h.DEBUG=0]="DEBUG",h[h.INFO=1]="INFO",h[h.WARN=2]="WARN",h[h.ERROR=3]="ERROR",h[h.OFF=4]="OFF",a.IUnicodeService=_.createDecorator("UnicodeService")},1480:(F,a,m)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeService=void 0;var h=m(8460),_=m(225),d=function(){function f(){this._providers=Object.create(null),this._active="",this._onChange=new h.EventEmitter;var e=new _.UnicodeV6;this.register(e),this._active=e.version,this._activeProvider=e}return Object.defineProperty(f.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"versions",{get:function(){return Object.keys(this._providers)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"activeVersion",{get:function(){return this._active},set:function(e){if(!this._providers[e])throw new Error('unknown Unicode version "'+e+'"');this._active=e,this._activeProvider=this._providers[e],this._onChange.fire(e)},enumerable:!1,configurable:!0}),f.prototype.register=function(e){this._providers[e.version]=e},f.prototype.wcwidth=function(e){return this._activeProvider.wcwidth(e)},f.prototype.getStringCellWidth=function(e){for(var v=0,n=e.length,s=0;s<n;++s){var u=e.charCodeAt(s);if(55296<=u&&u<=56319){if(++s>=n)return v+this.wcwidth(u);var o=e.charCodeAt(s);56320<=o&&o<=57343?u=1024*(u-55296)+o-56320+65536:v+=this.wcwidth(o)}v+=this.wcwidth(u)}return v},f}();a.UnicodeService=d}},J={};function ee(F){var a=J[F];if(void 0!==a)return a.exports;var m=J[F]={exports:{}};return le[F].call(m.exports,m,m.exports,ee),m.exports}var z={};return(()=>{var F=z;Object.defineProperty(F,"__esModule",{value:!0}),F.Terminal=void 0;var a=ee(3236),m=ee(9042),h=ee(7975),_=ee(7090),d=ee(5741),f=ee(8285),e=function(){function v(n){this._core=new a.Terminal(n),this._addonManager=new d.AddonManager}return v.prototype._checkProposedApi=function(){if(!this._core.optionsService.options.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")},Object.defineProperty(v.prototype,"onBell",{get:function(){return this._core.onBell},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"onData",{get:function(){return this._core.onData},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"element",{get:function(){return this._core.element},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"parser",{get:function(){return this._checkProposedApi(),this._parser||(this._parser=new h.ParserApi(this._core)),this._parser},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"unicode",{get:function(){return this._checkProposedApi(),new _.UnicodeApi(this._core)},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"rows",{get:function(){return this._core.rows},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"cols",{get:function(){return this._core.cols},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"buffer",{get:function(){return this._checkProposedApi(),this._buffer||(this._buffer=new f.BufferNamespaceApi(this._core)),this._buffer},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"markers",{get:function(){return this._checkProposedApi(),this._core.markers},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"modes",{get:function(){var n=this._core.coreService.decPrivateModes,s="none";switch(this._core.coreMouseService.activeProtocol){case"X10":s="x10";break;case"VT200":s="vt200";break;case"DRAG":s="drag";break;case"ANY":s="any"}return{applicationCursorKeysMode:n.applicationCursorKeys,applicationKeypadMode:n.applicationKeypad,bracketedPasteMode:n.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:s,originMode:n.origin,reverseWraparoundMode:n.reverseWraparound,sendFocusMode:n.sendFocus,wraparoundMode:n.wraparound}},enumerable:!1,configurable:!0}),v.prototype.blur=function(){this._core.blur()},v.prototype.focus=function(){this._core.focus()},v.prototype.resize=function(n,s){this._verifyIntegers(n,s),this._core.resize(n,s)},v.prototype.open=function(n){this._core.open(n)},v.prototype.attachCustomKeyEventHandler=function(n){this._core.attachCustomKeyEventHandler(n)},v.prototype.registerLinkMatcher=function(n,s,u){return this._checkProposedApi(),this._core.registerLinkMatcher(n,s,u)},v.prototype.deregisterLinkMatcher=function(n){this._checkProposedApi(),this._core.deregisterLinkMatcher(n)},v.prototype.registerLinkProvider=function(n){return this._checkProposedApi(),this._core.registerLinkProvider(n)},v.prototype.registerCharacterJoiner=function(n){return this._checkProposedApi(),this._core.registerCharacterJoiner(n)},v.prototype.deregisterCharacterJoiner=function(n){this._checkProposedApi(),this._core.deregisterCharacterJoiner(n)},v.prototype.registerMarker=function(n){return this._checkProposedApi(),this._verifyIntegers(n),this._core.addMarker(n)},v.prototype.addMarker=function(n){return this.registerMarker(n)},v.prototype.hasSelection=function(){return this._core.hasSelection()},v.prototype.select=function(n,s,u){this._verifyIntegers(n,s,u),this._core.select(n,s,u)},v.prototype.getSelection=function(){return this._core.getSelection()},v.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},v.prototype.clearSelection=function(){this._core.clearSelection()},v.prototype.selectAll=function(){this._core.selectAll()},v.prototype.selectLines=function(n,s){this._verifyIntegers(n,s),this._core.selectLines(n,s)},v.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},v.prototype.scrollLines=function(n){this._verifyIntegers(n),this._core.scrollLines(n)},v.prototype.scrollPages=function(n){this._verifyIntegers(n),this._core.scrollPages(n)},v.prototype.scrollToTop=function(){this._core.scrollToTop()},v.prototype.scrollToBottom=function(){this._core.scrollToBottom()},v.prototype.scrollToLine=function(n){this._verifyIntegers(n),this._core.scrollToLine(n)},v.prototype.clear=function(){this._core.clear()},v.prototype.write=function(n,s){this._core.write(n,s)},v.prototype.writeUtf8=function(n,s){this._core.write(n,s)},v.prototype.writeln=function(n,s){this._core.write(n),this._core.write("\r\n",s)},v.prototype.paste=function(n){this._core.paste(n)},v.prototype.getOption=function(n){return this._core.optionsService.getOption(n)},v.prototype.setOption=function(n,s){this._core.optionsService.setOption(n,s)},v.prototype.refresh=function(n,s){this._verifyIntegers(n,s),this._core.refresh(n,s)},v.prototype.reset=function(){this._core.reset()},v.prototype.loadAddon=function(n){return this._addonManager.loadAddon(this,n)},Object.defineProperty(v,"strings",{get:function(){return m},enumerable:!1,configurable:!0}),v.prototype._verifyIntegers=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];for(var u=0,o=n;u<o.length;u++){var r=o[u];if(r===1/0||isNaN(r)||r%1!=0)throw new Error("This API only accepts integers")}},v}();F.Terminal=e})(),z})()}}]);